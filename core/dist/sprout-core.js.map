{"version":3,"file":"sprout-core.js","mappings":"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","sources":["webpack://jssprout/./src/core/consts.js","webpack://jssprout/./src/core/DOM_utils.js","webpack://jssprout/./src/core/paint_utils.js","webpack://jssprout/./src/core/node_actions.js","webpack://jssprout/./src/core/prop_utils.js","webpack://jssprout/./src/core/state_utils.js","webpack://jssprout/./src/core/commands.js","webpack://jssprout/./src/core/ReactiveElement.js","webpack://jssprout/./src/core/debug_utils.js","webpack://jssprout/./src/core/StatefulArray.js","webpack://jssprout/./src/core/proxy_handlers.js","webpack://jssprout/./src/core/StateManager.js","webpack://jssprout/./src/build/index.js","webpack://jssprout/./src/core/attr_utils.js","webpack://jssprout/./src/core/ConditionalElement.js","webpack://jssprout/./src/core/ReactiveCustomElement.js","webpack://jssprout/./src/core/index.js"],"sourcesContent":["import { extendElementClassWithReactiveElementClass } from \"./ReactiveElement.js\";\n\nexport const BOOLEAN_ATTRIBUTES = [\n    'hidden',\n    'checked'\n]\n\nexport const SUPPORTED_ATTRIBUTES_FOR_BINDING = [\n    'hidden',\n    'value',\n    'checked'\n]\n\n// Some elements like inputs has certain properties that can be used in _bind command, like: 'value', or 'checked\nexport const SUPPORTED_PROPERTIES_FOR_BINDING = [\n    'value',\n    'checked'\n]\nexport const SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING = [\n    null, // If no type is specified - defaults to 'text' - \n    // getAttribute('type') returns null\n    'text', \n    'color', \n    'date', \n    'datetime-local', \n    'email', \n    'month', \n    'number', \n    'password',\n    'range',\n    'search',\n    'tel',\n    'time',\n    'url',\n    'week'\n];\n\n// These are \"built-in\" state props that are automatically added to state objects,\n// and should not be included in the normal state change/check flow\nexport const BUILT_IN_STATE_PROPS = [\n    '_global',\n    '_gettingDependenciesFor',\n    '_localStateManager',\n    '_stateManager',\n    '_binding',\n    '_populate',\n    '_isActive'\n]\n\nexport const GLOBAL_STATE_VAR_NAME = \"SproutGlobalState\";\nexport const GLOBAL_STATE_FUNCTION_NAME = \"getGlobalState\";\n\nexport const ERROR_MESSAGES = {\n    NO_DEPENDENCIES_ARRAY_IN_SET_HOOK(stateProp) {\n        return `State set hook, must include a dependencies array! None was found for ${stateProp}`;\n    }\n}\n\nexport const HTML_ELEMENTS_CLASSES_MAP = [\n    { class: HTMLAnchorElement, element: \"a\" },\n    { class: HTMLAreaElement, element: \"area\" },\n    { class: HTMLAudioElement, element: \"audio\" },\n    // { class: HTMLBaseElement, element: \"base\" },\n    { class: HTMLBodyElement, element: \"body\" },\n    { class: HTMLBRElement, element: \"br\" },\n    { class: HTMLButtonElement, element: \"button\" },\n    { class: HTMLCanvasElement, element: \"canvas\" },\n    { class: HTMLDataElement, element: \"data\" },\n    { class: HTMLDataListElement, element: \"datalist\" },\n    { class: HTMLDetailsElement, element: \"details\" },\n    { class: HTMLDialogElement, element: \"dialog\" },\n    { class: HTMLDivElement, element: \"div\" },\n    { class: HTMLDListElement, element: \"dl\" },\n    { class: HTMLEmbedElement, element: \"embed\" },\n    { class: HTMLFieldSetElement, element: \"fieldset\" },\n    { class: HTMLFormElement, element: \"form\" },\n    /*\n    { class: HTMLHeadingElement, element: \"h1\" },\n    { class: HTMLHeadingElement, element: \"h2\" },\n    { class: HTMLHeadingElement, element: \"h3\" },\n    { class: HTMLHeadingElement, element: \"h4\" },\n    { class: HTMLHeadingElement, element: \"h5\" },\n    { class: HTMLHeadingElement, element: \"h6\" },\n     */\n    { class: HTMLHRElement, element: \"hr\" },\n    { class: HTMLHtmlElement, element: \"html\" },\n    { class: HTMLIFrameElement, element: \"iframe\" },\n    { class: HTMLImageElement, element: \"img\" },\n    { class: HTMLInputElement, element: \"input\" },\n    { class: HTMLLabelElement, element: \"label\" },\n    { class: HTMLLegendElement, element: \"legend\" },\n    { class: HTMLLIElement, element: \"li\" },\n    { class: HTMLLinkElement, element: \"link\" },\n    { class: HTMLMapElement, element: \"map\" },\n    { class: HTMLMetaElement, element: \"meta\" },\n    { class: HTMLMeterElement, element: \"meter\" },\n    { class: HTMLObjectElement, element: \"object\" },\n    { class: HTMLOListElement, element: \"ol\" },\n    { class: HTMLOptGroupElement, element: \"optgroup\" },\n    { class: HTMLOptionElement, element: \"option\" },\n    // { class: HTMLOutputElement, element: \"output\" },\n    { class: HTMLParagraphElement, element: \"p\" },\n    // { class: HTMLParamElement, element: \"param\" },\n    { class: HTMLPictureElement, element: \"picture\" },\n    { class: HTMLPreElement, element: \"pre\" },\n    { class: HTMLProgressElement, element: \"progress\" },\n    { class: HTMLQuoteElement, element: \"blockquote\" },\n    { class: HTMLQuoteElement, element: \"q\" },\n    // { class: HTMLScriptElement, element: \"script\" },\n    { class: HTMLSelectElement, element: \"select\" },\n    { class: HTMLSourceElement, element: \"source\" },\n    { class: HTMLSpanElement, element: \"span\" },\n    // { class: HTMLStyleElement, element: \"style\" },\n    { class: HTMLTableElement, element: \"table\" },\n    { class: HTMLTableCellElement, element: \"td\" },\n    { class: HTMLTableCellElement, element: \"th\" },\n    { class: HTMLTableRowElement, element: \"tr\" },\n    { class: HTMLTableSectionElement, element: \"thead\" },\n    { class: HTMLTableSectionElement, element: \"tbody\" },\n    { class: HTMLTableSectionElement, element: \"tfoot\" },\n    { class: HTMLTextAreaElement, element: \"textarea\" },\n    { class: HTMLTimeElement, element: \"time\" },\n    { class: HTMLTitleElement, element: \"title\" },\n    { class: HTMLTrackElement, element: \"track\" },\n    { class: HTMLUListElement, element: \"ul\" },\n    { class: HTMLVideoElement, element: \"video\" },\n    { class: HTMLSlotElement, element: \"slot\" },\n    // We can't use HTMLElement more than once, so we will use a class extending it\n    // { class: class extends HTMLElement{}, element: \"code\" }\n];\n\n// For development purposes only,\n// turn this on to see exactly which functions in each entity are called and when.\nexport const DEBUG_MODE = false;\n\nexport const DEFAULT_TEMPLATE_DOM = document.createElement('div');\n\nexport const NODES_STATE = {\n    // This is a global object that maps abstract \"DOM actions\" to nodes (the nodes can be elements, text nodes, attribute nodes)\n    // It is resolved to actual DOM API functions on RequestAnimationFrame calls, and then is RESET.\n    // it is a \"singleton\" object\n    nodeActionsMap: new Map(),\n    // Maps events binding functions to (custom) elements\n    eventBindingFunctions: new Map(),\n    conditionalRenders: new Map(),\n    // Save requestAnimationFrame Id, to cancel if the rAF wasn't called yet on the same frame, so DOM operations will be batched to a single frame,\n    // preventing several rAFs running for the same frame\n    paintRafId: null,\n    // Similar as above but for event bindings\n    eventBindRafId: null,\n    // Same for conditional renders\n    conditionalRenderRafId: null,\n    activateRafId: null,\n    elementActivateFunctions: new Map()\n}\n\nexport const CONDITIONAL_OPERATORS = [\n    '=',\n    '==',\n    '!=',\n    '!==',\n    '<',\n    '<=',\n    '>',\n    '>='\n];\n\nexport const MAX_OPERATIONS_PER_ANIMATION_FRAME = 100;\n","export function isElementAList(element) {\n  return element.tagName === \"OL\" || element.tagName === \"UL\";\n}\n\n","import { doUpdateDOM } from \"./node_actions\";\nimport { NODES_STATE, MAX_OPERATIONS_PER_ANIMATION_FRAME } from \"./consts\";\n\nlet { \n    paintRafId,\n    eventBindingFunctions, \n    eventBindRafId, \n    conditionalRenderRafId,\n    conditionalRenders,\n    nodeActionsMap,\n    activateRafId,\n    elementActivateFunctions\n} = NODES_STATE; \n\nexport function queueBindEvents(element, bindFunction) {\n    eventBindingFunctions.set(element, bindFunction);\n    if (eventBindingFunctions.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (eventBindRafId) cancelAnimationFrame(eventBindRafId);\n        eventBindRafId = null;\n    }\n    if (!eventBindRafId) {\n        eventBindRafId = requestAnimationFrame(()=> {\n            eventBindRafId = null;\n            eventBindingFunctions.forEach(bindFn=> bindFn());\n            eventBindingFunctions.clear();\n        });\n    }\n}\n\nexport function queueActivate(element, activateFn) {\n    elementActivateFunctions.set(element, activateFn);\n    if (elementActivateFunctions.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (activateRafId) cancelAnimationFrame(activateRafId);\n        activateRafId = null;\n    }\n    if (!activateRafId) {\n        activateRafId = requestAnimationFrame(()=> {\n            activateRafId = null;\n            elementActivateFunctions.forEach(activateFn=> activateFn());\n            elementActivateFunctions.clear();\n        });\n    }\n}\n\nexport function queuePaint() {\n    if (nodeActionsMap.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (paintRafId) cancelAnimationFrame(paintRafId);\n        paintRafId = null;\n    }\n    if (!paintRafId) {\n        paintRafId = requestAnimationFrame(()=> {\n            paintRafId = null;\n            doUpdateDOM();\n        });\n    }\n}\nexport function queueConditionalRender(element, renderFunction) {\n    conditionalRenders.set(element, renderFunction);\n    if (conditionalRenders.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (conditionalRenderRafId) cancelAnimationFrame(conditionalRenderRafId);\n        conditionalRenderRafId = null;\n    }\n    if (!conditionalRenderRafId) {\n        conditionalRenderRafId = requestAnimationFrame(()=> {\n            conditionalRenderRafId = null;\n            conditionalRenders.forEach(renderFn=> renderFn());\n            conditionalRenders.clear();\n        });\n    }\n}","import { stateToElement, resolveStateMapToDocumentFragment } from \"./state_utils.js\";\nimport { isElementAList } from \"./DOM_utils.js\";\nimport { queueConditionalRender, queuePaint } from \"./paint_utils.js\";\nimport { NODES_STATE } from \"./consts.js\";\n\n// Also, if doesn't exist - create it\nfunction getNodeActionsForNode(node) {\n    const { nodeActionsMap } = NODES_STATE;\n    if (!nodeActionsMap.has(node)) nodeActionsMap.set(node, getNewNodeActionsObject());\n    const nodeActions = nodeActionsMap.get(node);\n    return nodeActions;\n}\n\nexport function setStateNodeAction(node, nodeActionsObject, value) {\n    if (node.nodeType === Node.ATTRIBUTE_NODE)\n        nodeActionsObject[\"setAttribute\"] = value; \n    else if (node.nodeType === Node.TEXT_NODE)\n        nodeActionsObject[\"textContent\"] = value;\n}\n\nexport function addRemoveAction(nodeActions, elementToRemove, stateIdentifier) {\n    if (!nodeActions.remove.has(stateIdentifier)) {\n        nodeActions.remove.set(stateIdentifier, new Set())\n    }\n    nodeActions.remove.get(stateIdentifier).add(elementToRemove);\n}\nexport function addReplaceAction(nodeActions, oldElement, newElement) {\n    nodeActions.replace.set(oldElement, newElement);\n}\nexport function addSwitchAction(nodeActions, newElement) {\n    nodeActions.switch = newElement;\n}\n// stateIdentifier can be a State object (for state maps),\n// or a State property (for conditionally rendered elements)\nexport function addAppendAction(nodeActions, nodeToAppend, stateIdentifier) {\n    if (!nodeActions.append.has(stateIdentifier)) {\n        nodeActions.append.set(stateIdentifier, new Set());\n    }\n    nodeActions.append.get(stateIdentifier).add(nodeToAppend);\n}\nexport function addStateAttributeToNode(attributeNode, value) {\n    const nodeActions = getNodeActionsForNode(attributeNode);\n    setStateNodeAction(attributeNode, nodeActions, value);\n}\nexport function addAppendActionToNode(node, nodeToAppend, stateIdentifier) {\n    const nodeActions = getNodeActionsForNode(node);\n    addAppendAction(nodeActions, nodeToAppend, stateIdentifier);\n}\n\n// This is an object used to represent pending node actions,\n// that are batched and executed in reflows (requestAnimationFrame)\nexport function getNewNodeActionsObject() {\n    return ({\n        // Nodes to append to the end of node's children, \n        // keys are state objects, or state props (string) \n        // to prevent duplicate pending\n        append: new Map(),\n        // Replace each key node on Map, with value node\n        replace: new Map(),\n        // Insert value node after key node in parent node's children\n        after: new Map(),\n        // Remove these nodes from the DOM\n        // keys are state objects, or state props (string) \n        // to prevent duplicate pending\n        remove: new Map(),\n        switch: null,\n        get hasPendingActions() {\n            return (\n                this.switch !== null ||\n                this.append.size || \n                this.replace.size || \n                this.after.size || \n                this.remove.size\n            );\n        }\n    });\n}\n\n\n// This *updates*/*\"fills\"* the nodeActionsMap!\nexport function generateStateNodeActions(stateManager, stateProp) {\n    const { nodeActionsMap } = NODES_STATE;\n    const value = stateManager.state[stateProp];\n    const stateNodes = stateManager.stateNodes[stateProp];\n    // This is a map, where keys are \"parent elements\" containing \n    // custom element instanced created from a state array (\"state map\").\n    // The values are the custom element name. \n    // The actual array of state objects is in state[stateProp]\n    const stateMapElements = stateManager.stateArrayMaps[stateProp];\n    const conditionallyRenderingElements = stateManager.conditionallyRenderingElements[stateProp];\n\n    // Note, since the value change is handled by a custom setter - that setter checks if the set value is the same - \n    // if it is - it won't call handleStateChange, and it won't reach here.\n    if (stateNodes) {\n        stateNodes.forEach(node=> {\n            if (!nodeActionsMap.has(node)) nodeActionsMap.set(node, {});\n            const nodeActionsObject = nodeActionsMap.get(node);\n            setStateNodeAction(node, nodeActionsObject, value);\n        });\n    }\n\n    if (stateMapElements) {\n        // An array of state objects\n        const stateMapArray = value;\n        console.log (`Has ${stateMapElements.size} stateMapElements`);\n        stateMapElements.forEach((customElementName, parentElement)=> {\n            //const newMappedElement = parentElement.cloneNode(true);\n            const stateMapNodeActions = getNewNodeActionsObject();\n            let currentStateMapArrayIndex = -1;\n            const isParentAList = isElementAList(parentElement);\n            // Compares state map arrays to actual DOM elements (by comparing state objects)\n            if (parentElement.children.length) {\n                Array.prototype.forEach.call(parentElement.children, (childElement, currentIndex)=> {\n                    let customElement = childElement;\n                    // State map elements inside Lists are wrapped with a <li>\n                    if (isParentAList) customElement = childElement.firstElementChild;\n                    let stateItem = stateMapArray[currentIndex]; \n                    if (stateItem?.hasOwnProperty('state')) stateItem = stateItem.state;\n                    if (!stateItem) {\n                        addRemoveAction(stateMapNodeActions, childElement);\n                        // newMappedElement.removeChild(newMappedElement.children[currentIndex]);\n                    }\n                    else if (customElement.state !== stateItem) {\n                        const replaceWithChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                        // newMappedElement.replaceChild(replaceWithChild, newMappedElement.children[currentIndex]);\n                        addReplaceAction(stateMapNodeActions, childElement, replaceWithChild);\n                    }\n                    currentStateMapArrayIndex = currentIndex;\n                });\n            }\n\n            // If there are more state objects in the stateMapArray - append equivalent child elements \n            currentStateMapArrayIndex++;\n            for (let i = currentStateMapArrayIndex, len=stateMapArray.length; i<len; i++) {\n                const stateItem = stateMapArray[i];\n                // New state item === new child element to append\n                if (stateItem) {\n                    const newChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                    // newMappedElement.appendChild(newChild);\n                    addAppendAction(stateMapNodeActions, newChild, stateItem);\n                }\n            }\n\n            // addSwitchAction(stateMapNodeActions, newMappedElement);\n            if (stateMapNodeActions.hasPendingActions) {\n                nodeActionsMap.set(parentElement, stateMapNodeActions);\n            }\n        });\n    }\n\n    if (conditionallyRenderingElements) {\n        // Should be slot element\n        conditionallyRenderingElements.forEach(element=> {\n            queueConditionalRender(this, ()=> element.render());\n        });\n    }\n\n    if (nodeActionsMap.size) queuePaint();\n}\n\nfunction resolveNodeActionsMapToDOMActions() {\n    const batchActions = [];\n    const attributeActions = [];\n    const elementActions = [];\n\n    const { nodeActionsMap } = NODES_STATE;\n\n    nodeActionsMap.forEach((nodeActions, node)=> {\n        // Attribute change\n        if (nodeActions.hasOwnProperty(\"setAttribute\")) {\n            const value = nodeActions.setAttribute;\n            if (typeof value === \"boolean\") {\n                if (!node.hasOwnProperty(\"originalOwnerElement\")) {\n                    console.error(\"originalOwnerElement not found on boolean attribute node! Should never happen!\");\n                }\n                if (value === false) {\n                    // Remove attribute if it exists, otherwise - do nothing\n                    if (node.originalOwnerElement.hasAttribute(node.name)) {\n                        attributeActions.push(()=> {\n                            node.originalOwnerElement.removeAttributeNode(node);\n                        });\n                    }\n                }\n                // state changed to true\n                else {\n                    if (!node.originalOwnerElement.hasAttribute(node.name)) {\n                        attributeActions.push(()=> {\n                            node.originalOwnerElement.setAttributeNode(node);\n                        });\n                    }\n                }\n            }\n            else {\n                if (typeof value === \"string\" && node.nodeValue !== value) {\n                    attributeActions.push (()=> node.nodeValue = value);\n                }\n            }\n        }\n\n        // Text change\n        else if (nodeActions.hasOwnProperty(\"textContent\")) {\n            const value = String(nodeActions.textContent);\n            if (node.nodeValue === value) return;\n            elementActions.push (()=> node.nodeValue = value);\n        }\n\n        // DOM change\n        else if (nodeActions.switch) {\n            elementActions.push(()=> node.replaceWith(nodeActions.switch));\n        }\n        else {\n            nodeActions.replace.forEach((newNode, oldNode)=> {\n                elementActions.push(()=> \n                    //oldNode.replaceWith(newNode));\n                    node.replaceChild(newNode, oldNode));\n            });\n            for (const removes of nodeActions.remove.values()) {\n                for (const nodeToRemove of removes) {\n                    if (nodeToRemove.parentNode && nodeToRemove.parentNode === node) {\n                        elementActions.push(()=> node.removeChild(nodeToRemove));\n                    }\n                }\n            }\n            for (const appends of nodeActions.append.values()) {\n                for (const newChildElement of appends) {\n                    elementActions.push(()=> node.appendChild(newChildElement));\n                }\n            }\n        }\n    });\n\n    return [...attributeActions, ...elementActions];\n}\n\n// For debugging purposes\nexport function logNodeActions() {\n    const { nodeActionsMap } = NODES_STATE;\n    [...nodeActionsMap.entries()]\n    .map(([node, actions])=> {\n\n        switch (node.nodeType) {\n            case Node.ELEMENT_NODE: {\n                console.log (\"Actions for\", node);\n                const appendElements = [...actions.append.values()];\n                if (appendElements.length) {\n                    console.log(\"Append\", appendElements);\n                }\n                const replaceElements = [...actions.replace.entries()];\n                if (replaceElements.length) {\n                    console.log(\"Append\", replaceElements);\n                }\n                if (actions.remove.size) {\n                    console.log (\"Remove\", actions.remove);\n                }\n                break;\n            }\n\n            case Node.ATTRIBUTE_NODE: {\n                console.log (\"Set Attribute\", node.nodeName, \"on\", node.originalOwnerElement, \"to\", actions.setAttribute);\n                break;\n            }\n\n            case Node.TEXT_NODE: {\n                console.log (\"Set text content for\", node.parentNode, \"to\", actions.textContent);\n                break;\n            }\n        }\n    });\n}\n// This function runs on requestAnimationFrame to run pending Node actions\nexport function doUpdateDOM() {\n    let { nodeActionsMap } = NODES_STATE;\n    if (nodeActionsMap.size) {\n        // logNodeActions();\n        const DOMActions = resolveNodeActionsMapToDOMActions(nodeActionsMap);\n        DOMActions.forEach(DOMAction=> DOMAction());\n        NODES_STATE.nodeActionsMap = new Map();\n    }\n}\n\n","\n// Sets an internal read-only \"hidden\" property on an object:\nexport function setHiddenProperty(obj, propName, propValue, enumerable=false) {\n    Object.defineProperty(obj, propName, {\n        value: propValue,\n        configurable: false,\n        writable: false,\n        enumerable,\n    });\n}","import { BOOLEAN_ATTRIBUTES, BUILT_IN_STATE_PROPS } from \"./consts.js\";\nimport { generateStateNodeActions } from './node_actions.js';\nimport { setHiddenProperty } from \"./prop_utils.js\";\n\nlet handleStatesRAFId = null;\n\nif (typeof HTMLElement === 'undefined') {\n    console.warn (\"HTMLElement was not found! This probably means you are running in a non-browser environment, and can lead to unexpected results\");\n}\nelse {\n    // Make sure \"setAttribute\" is not overridable\n    Object.defineProperty(globalThis, \"elementSetAttribute\", {\n        value: HTMLElement.prototype.setAttribute,\n        writable: false,\n        configurable: false\n    });\n}\n\n\nexport const setAttribute = function(attrName, attrValue) {\n    if (BOOLEAN_ATTRIBUTES.includes(attrName)) {\n        if (attrValue === \"false\") {\n            this.removeAttribute(attrName);\n        }\n        else {\n            elementSetAttribute.call(this, attrName, \"\");\n        }\n    }\n    else {\n        elementSetAttribute.call(this, attrName, attrValue);\n    }\n}\n\n// This creates the binding to state props on \"State attributes\".\n// This function is called when a custom element instance ic connected to the DOM\nexport const setStateAttribute = function(attrName, stateProp) {\n    let equalityValue = null;\n    if (stateProp.indexOf(':') !== -1) {\n        if (stateProp.indexOf('is_') === 0) {\n            const colonIndex = stateProp.indexOf(':');\n            if (colonIndex === -1) {\n                throw Error(\"When using conditional equality state attribute, you must include a colon character followed by an equality value!\");\n            }\n            equalityValue = stateProp.substring(colonIndex+1);\n            stateProp = stateProp.substring(3, colonIndex);\n        }\n    }\n    let [stateVal, theState] = this.getState(stateProp, true); \n\n    if (stateVal === undefined) {\n        console.warn(`State value for ${stateProp} is undefined. State values should never be undefined.`)\n        return;\n    }\n    if (!theState) {\n        console.warn (\"No State object with state prop: \" + stateProp);\n        return;\n    }\n    if (equalityValue) {\n        const conditionalStateProp = \"is_\"+stateProp+equalityValue;\n        const originalStateProp = stateProp;\n        Object.defineProperty(theState, conditionalStateProp, {\n            get() {\n                return this[originalStateProp] === equalityValue\n            },\n            enumerable: false\n        });\n        theState._stateManager.addStateDependency(stateProp, conditionalStateProp);\n        stateVal = theState[conditionalStateProp];\n        stateProp = conditionalStateProp;\n    }\n\n    const valueToSet = stateVal;\n    this.removeAttribute(attrName);\n    // Create an \"Attribute Node\"\n    const stateAttrNode = document.createAttribute(attrName);\n    stateAttrNode.nodeValue = valueToSet;\n    // Saves a readonly boolean that marks this as a \"state attribute node\"\n    setHiddenProperty(stateAttrNode, \"isStateAttribute\", true);\n    // Save ownerElement to a different property,\n    // so if the attribute is removed (in case of a boolean attribute),\n    // and later re-attached, we would know which element to add it back to.\n    setHiddenProperty(stateAttrNode, \"originalOwnerElement\", this);\n/*\n    Object.defineProperty(stateAttrNode, \"stateValue\", {\n        value: valueToSet,\n        writeable: true,\n        configurable: false,\n        enumerable: true\n    });\n*/\n    if (typeof valueToSet === \"boolean\") {\n        // A boolean attribute value should ALWAYS be an empty string,\n        // the value itself never changes, it is removed fron the element if false, \n        // and added if true\n        stateAttrNode.nodeValue = \"\";\n    }\n\n    // Adds the attribute to the element\n    if (valueToSet !== false) {\n        this.setAttributeNode(stateAttrNode);\n    }\n\n    theState._stateManager.addStateNode(stateProp, stateAttrNode, typeof valueToSet === \"boolean\");\n\n}\nexport const setStateText = function(stateProp) {\n    const [stateVal, theState] = this.getState(stateProp, true); \n\n    if (stateVal === undefined || stateVal === null) {\n        console.warn(`State value for ${stateProp} is undefined or null for _text command`);\n        return;\n    }\n    if (!theState) {\n        console.warn (\"No State object with state prop: \" + stateProp);\n        return;\n    }\n    const valueToSet = stateVal;\n    const textNode = document.createTextNode(valueToSet);\n    setHiddenProperty(textNode, \"isStateAttribute\", true);\n    this.appendChild(textNode);\n    theState._stateManager.addStateNode(stateProp, textNode);\n}\n\n// Convert a stateObject to a custom element, used in State Map Arrays\nexport function stateToElement(stateObject, elemName, wrapInElement) {\n    const customElementInstance = document.createElement(elemName);\n    customElementInstance.setInitialState(stateObject);\n    let returnElement;\n    if (wrapInElement) {\n        returnElement = document.createElement(wrapInElement);\n        returnElement.appendChild(customElementInstance);\n    }\n    else {\n        returnElement = customElementInstance;\n    }\n    return returnElement;\n}\n\nexport function mapStateArrayToElements(stateItems, elemName, wrapInElement) {\n    // Each state item should be a stateManager\n    return stateItems.map(stateItem => {\n        if (stateItem.hasOwnProperty('state')) stateItem = stateItem.state;\n        if (typeof stateItem !== 'object') {\n            console.warn(\"item in State array for _map is not an object: \", stateItem);\n            return {};\n        }\n        return stateToElement(stateItem, elemName, wrapInElement);\n    });\n}\n\n// Main function that handles all state changes in a state object\nexport function handleStateChange(stateManager, stateProp) {\n    console.log (\"handleStateChange:\", stateProp);\n    if (BUILT_IN_STATE_PROPS.includes(stateProp)) return;\n    // Populate the next Node Actions to perform\n    generateStateNodeActions(stateManager, stateProp);\n\n    const state = stateManager.state;\n    // Run on[stateProp]Change hooks\n    if (state.hasOwnProperty(`on_${stateProp}Change`)) {\n        if (typeof state[`on_${stateProp}Change`] === \"function\")\n            state[`on_${stateProp}Change`].call(state);\n    }\n\n    const stateDependencies = stateManager.stateDependencies[stateProp];\n    if (stateDependencies) {\n        stateDependencies.forEach(depStateProp=> {\n            // A \"Setter\" hook\n            if (depStateProp.indexOf('set_') === 0) {\n                const setStateProp = depStateProp.substring(4);\n                const func = state[depStateProp][0];\n                if (func && typeof func === \"function\") {\n                    state[setStateProp] = func.call(state);\n                    return;\n                }\n            }\n            generateStateNodeActions(stateManager, depStateProp);\n            if (state.hasOwnProperty(`on${depStateProp}Change`)) {\n                if (typeof state[`on${depStateProp}Change`] === \"function\")\n                    state[`on${depStateProp}Change`].call(state);\n            }\n        });\n    }\n\n    // Global state\n    if (!state._global) {\n        const globalStateDependencies = stateManager.globalStateDependencies[stateProp];\n        globalStateDependencies?.forEach((depStateProps, depStateManager)=> {\n            const depState = depStateManager.state;\n            depStateProps.forEach(depStateProp=> {\n                // A \"Setter\" hook\n                if (depStateProp.indexOf('set_') === 0) {\n                    const setStateProp = depStateProp.substring(4);\n                    const func = state[depStateProp][0];\n                    if (func && typeof func === \"function\") {\n                        depState[setStateProp] = func.call(depState);\n                        return;\n                    }\n                }\n                generateStateNodeActions(depStateManager, depStateProp);\n                if (state.hasOwnProperty(`on${depStateProp}Change`)) {\n                    if (typeof state[`on${depStateProp}Change`] === \"function\")\n                        depState[`on${depStateProp}Change`].call(depState);\n                }\n            });\n        });\n    }\n}\n\nexport function populateStateFromInitialState(state, initialState) {\n    state._populate = true;\n    const descriptors = Object.getOwnPropertyDescriptors(initialState);\n    let descrp;\n    for (let key in descriptors) {\n        if (BUILT_IN_STATE_PROPS.includes(key)) {\n            delete descriptors[key];\n            continue;\n        }\n        descrp = descriptors[key];\n        if (descrp.hasOwnProperty('get') && typeof descrp.get === \"function\") {\n            descrp.get.bind(state);\n        }\n        if (descrp.hasOwnProperty('value')) {\n            const value = descrp.value;\n            if (typeof value === \"function\") {\n                descrp.value.bind(state);\n            }\n            else if (Array.isArray(value) && key.indexOf(\"set_\") === 0) {\n                const func = value?.[0];\n                if (func && typeof func === \"function\") {\n                    func.bind(state);\n                }\n            }\n        }\n    }\n\n    // If state set hooks should run on initialization - \n    // they should run by the proxy handler for \"defineProperty\"\n    Object.defineProperties(state, descriptors);\n    delete state._populate;\n}\n\n/* Experimental rendering of state maps using DocumentFragment. Not stable */\n/* \nexport function resolveStateMapToDocumentFragment({ customElementName, parentElement}, stateMapArray) {\n    const resolvedDocumentFragment = new DocumentFragment();\n    // const stateMapNodeActions = getNewNodeActionsObject();\n    let currentStateMapArrayIndex = -1;\n    const isParentAList = isElementAList(parentElement);\n    // Compares state map arrays to actual DOM elements (by comparing state objects)\n    if (parentElement.children.length) {\n        Array.prototype.forEach.call(parentElement.children, (childElement, currentIndex)=> {\n            let customElementChild = childElement;\n            // State map elements inside Lists are wrapped with a <li>\n            if (isParentAList) customElementChild = childElement.firstElementChild;\n            let stateItem = stateMapArray[currentIndex]; \n            if (stateItem?.hasOwnProperty('state')) stateItem = stateItem.state;\n            if (stateItem && customElementChild.state !== stateItem) {\n                const newCustomElementChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                resolvedDocumentFragment.appendChild(newCustomElementChild);\n            }\n            else {\n                resolvedDocumentFragment.append(childElement)\n            }\n            currentStateMapArrayIndex = currentIndex;\n        });\n    }\n\n    // If there are more state objects in the stateMapArray - append equivalent child elements \n    currentStateMapArrayIndex++;\n    for (let i = currentStateMapArrayIndex, len=stateMapArray.length; i<len; i++) {\n        const stateItem = stateMapArray[i];\n        // New state item === new child element to append\n        if (stateItem) {\n            // Make sure we don't already have a pending append action for the same state object\n            const newChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n            resolvedDocumentFragment.appendChild(newChild);\n        }\n    }\n\n    return resolvedDocumentFragment;\n    if (resolvedDocumentFragment.children.length) {\n        parentElement.innerHTML = '';\n        //addReplaceAction(stateMapNodeActions, childElement, replaceWithChild);\n        //nodeActionsMap.set(parentElement, stateMapNodeActions);\n    }    \n}\n*/\n\n","import { mapStateArrayToElements } from \"./state_utils.js\";\nimport { SUPPORTED_ATTRIBUTES_FOR_BINDING, SUPPORTED_PROPERTIES_FOR_BINDING, SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING } from \"./consts.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { isElementAList } from \"./DOM_utils.js\";\nimport { attributeValueToTypedValue } from \"./attr_utils.js\";\n\nfunction mapStateToElements(stateItemsPropertyName, customElementName, parentElement) {\n    const [stateItemsArray, theState] = parentElement.getState(stateItemsPropertyName, true);\n    if (!stateItemsArray || !Array.isArray(stateItemsArray)) {\n        console.warn (\"state value for _map is not an array, in state property: \" + stateItemsPropertyName);\n        return null;\n    }\n    const wrapInElement = isElementAList(parentElement) ? \"li\" : undefined;\n    const elements = mapStateArrayToElements(stateItemsArray, customElementName, wrapInElement);\n    parentElement.innerHTML = \"\";\n    if (elements.length) {\n        parentElement.append(...elements);\n    }\n    return theState;\n}\n\n// Functions that run and handles \"Command\" attributes. Note, they should always be called\n// with the \"this\" context set to the custom element the command is defined on\nexport const COMMANDS = {\n    map: function(commandValue) {\n        // The command value (\"argument\") is \"<stateProp>:<custom element name>\"\n        const [stateItemsPropertyName, customElementName] = commandValue.split(':');\n        const thiselement = this;\n        const theState = mapStateToElements(stateItemsPropertyName, customElementName, thiselement);\n        if (!theState) {\n            console.warn (`Mapping ${stateItemsPropertyName} to ${customElementName} failed!`);\n            return;\n        }\n        theState._stateManager.addStateMap(stateItemsPropertyName, customElementName, thiselement);\n    },\n    text: function(commandValue) {\n        const stateProp = commandValue;\n        this.initialSetText(stateProp);\n        // DO NOT CALL .normalize()! It might change the Text Nodes!\n    },\n    bind: function(commandValue) {\n        const [attributeName, statePropName] = commandValue.split(':');\n        if (!attributeName || !statePropName) {\n            console.warn (\"Incorrect usage of _bind command! Please pass <attribute-name>:<state-prop-name>\");\n            return;\n        }\n        if (!attributeName in SUPPORTED_ATTRIBUTES_FOR_BINDING) {\n            console.warn (`Attribute ${attributeName} is not supported for _bind command!`);\n            return;\n        }\n        this.bindAttributeToState(attributeName, statePropName);\n\n        if (SUPPORTED_PROPERTIES_FOR_BINDING.includes(attributeName)) {\n            if (attributeName === \"value\" && this.tagName === \"INPUT\" && SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING.includes(this.getAttribute('type'))) {\n                this.addEventListener(\"input\", \n                    ()=> this.updateStateFromProperty(\"value\")\n                );\n            }\n            else if (attributeName === \"checked\" && this.tagName === \"INPUT\" && this.getAttribute('type') === \"checkbox\") {\n                this.addEventListener(\"change\", \n                    ()=> this.updateStateFromProperty(\"checked\")\n                );\n            }\n        }\n   },\n}","import { COMMANDS as COMMAND_ATTRIBUTES } from \"./commands.js\";\nimport { BOOLEAN_ATTRIBUTES, SUPPORTED_ATTRIBUTES_FOR_BINDING, GLOBAL_STATE_FUNCTION_NAME, DEFAULT_TEMPLATE_DOM } from \"./consts.js\";\nimport { queueActivate } from \"./paint_utils.js\";\nimport { setAttribute, setStateAttribute, setStateText } from \"./state_utils.js\";\n\nexport function extendElementClassWithReactiveElementClass(elementClass, appScope = window) {\n    class ReactiveElement extends elementClass {\n        // Should contain the \"root\" DOM element containing this element\n        host = null\n\n        // For input elements - to force bubble-up of change events\n        #changeEventHandler\n\n        #wasMounted = false\n\n        // Used for the _bind command, which allows \"reverse-binding\" attribute values to state props,\n        // keys are attribute names, values are state prop names\n        #boundAttributesToState = {}\n\n        static observedAttributes = [\"ref\"]\n                                    .concat(SUPPORTED_ATTRIBUTES_FOR_BINDING)\n                                    .concat(Object.keys(COMMAND_ATTRIBUTES).map(command => ('_' + command.toLowerCase())));\n\n\n        bindAttributeToState(attrName, statePropName) {\n            this.#boundAttributesToState[attrName] = statePropName;\n        }\n        unbindAttributeToState(attrName) {\n            delete this.#boundAttributesToState[attrName];\n        }\n        \n        // For input elements\n        updateStateFromProperty(propertyName) {\n            let newValue = this[propertyName];\n            const stateProp = this.#boundAttributesToState[propertyName];\n            const [stateValue, theState] = this.getState(stateProp, true);\n            if (stateValue !== newValue) theState[stateProp] = newValue;\n\n        }\n\n        #updateStateFromAttribute(attributeName) {\n            let newValue = this.getAttribute(attributeName);\n            if (BOOLEAN_ATTRIBUTES.includes(attributeName)) {\n                if (newValue === null) newValue = false;\n                else newValue = true;\n            }\n            const stateProp = this.#boundAttributesToState[attributeName];\n            const [stateValue, theState] = this.getState(stateProp, true);\n            if (stateValue !== newValue) theState[stateProp] = newValue;\n        }\n\n        disconnectedCallback() {\n            if (this.#changeEventHandler) this.removeEventListener('change', this.#changeEventHandler);\n            const host = this.host ?? this;\n            if (host.ref) {\n                const thisRefName = this.getAttribute('ref');\n                if (thisRefName) { \n                    delete host.ref[thisRefName];\n                    delete host.events[thisRefName];\n                }\n            }\n            this.#boundAttributesToState = {};\n        }\n\n        activate() {\n            // Keep it here and not in bindEvents! \n            if (this?.tagName === \"INPUT\") {\n                this.#changeEventHandler = function() {\n                    const changeEvent = new Event('inputChange', { bubbles: true, composed: true });\n                    this.dispatchEvent(changeEvent);\n                }\n                // Change events does not automatically bubbles, we need to listen and bubble up a new event\n                this.addEventListener('change', this.#changeEventHandler, false);\n            }\n\n            const commands = [];\n            const attributeNames = this.getAttributeNames();\n            for (const attrName of attributeNames) {\n                const attrValue = this.getAttribute(attrName);\n                // This also resolves \"State attributes\"\n                this.initialSetAttribute(attrName, attrValue);\n\n                // Save \"Command attributes\"\\\n                if (attrName.indexOf('_') === 0) {\n                    const command = attrName.substring(1);\n                    commands.push({ command, args: attrValue });\n                }\n            } \n            commands.forEach(({ command, args})=> {\n                COMMAND_ATTRIBUTES[command]?.call(this, args);\n            });\n\n        }\n        connectedCallback() {\n            if (this.#wasMounted) return;\n            // IMPORTANT: THIS *CAN* be NULL, DO NOT CHANGE IT!\n            // It is part of the way a check is made to see if an element is part of ShadowDOM!\n            // host will be null if the element is part of the DOM === the \"root\" custom element will have null in .host\n            // THIS SHOULD BE THE FIRST THING THAT HAPPENS!\n            this.host = this.getRootNode().host;\n            if (this.host) {\n                // Once the host custom element is connected\n                // then its 'State' is ready and activated,\n                // then we can call the sub-elements 'activate()',\n                // which relies on an active state.\n                // Doing it like this, allow visual render faster,\n                // defering the state handling.\n                this.host.addEventListener(\"connected\", \n                    ()=> this.activate()),\n                { once: true }\n            }\n            else {\n                queueActivate(()=> this.activate());\n            }\n            this.#wasMounted = true;\n        }\n\n        attributeChangedCallback(attributeName, oldValue, newValue) { \n            if (oldValue === newValue) return;\n            if (!this.isConnected) return;\n\n            if (attributeName === \"ref\") {\n                const host = this.isNativeElement ? this.host : this;\n                const refValue = newValue;\n                host.ref[refValue] = this;\n            }\n\n            if (attributeName in this.#boundAttributesToState) {\n                this.#updateStateFromAttribute(attributeName);\n            }\n        }\n\n        // Gets state value of stateProp,\n        // tries to resolve from local state(s) first,\n        // and then from global. If the second argument is true, returns both the state value and the state objec\n        getState(stateProp, returnStateObject=false) {\n            let theState;\n            // If this is a reactive element inside a reactive web component - the host should be the containing web component - \n            // we should reference its state, if host is null - it is most likely the host web component\n            let thisInstance = this.isNativeElement && this.host ? this.host : this;\n            // if (!thisInstance) return returnStateObject ? [undefined, undefined] : undefined;\n            let stateVal;\n            if (thisInstance && thisInstance.state) {\n                stateVal = thisInstance.state?.[stateProp];\n            }\n\n            let globalState = false;\n            while (stateVal === undefined && typeof thisInstance.host !== 'undefined' && thisInstance.host !== null) {\n                thisInstance = thisInstance.host;\n                stateVal = thisInstance.state?.[stateProp];\n            }\n\n            if (stateVal !== undefined) theState = thisInstance.state;\n            else {\n                globalState = appScope[GLOBAL_STATE_FUNCTION_NAME]();\n                stateVal = globalState?.[stateProp];\n                if (stateVal !== undefined) theState = globalState;\n            } \n            if (returnStateObject) {\n                return [stateVal, theState];\n            }\n            return stateVal;\n        }\n        \n        findElement(refName) {\n            const host = this.host || this;\n            // if Shadow DOM is used, the \"root\" element is shadowRoot, otherwise it is the \n            // web component itself\n            let root = host;\n            if (appScope.SPROUT_CONFIG.useShadow) {\n                root = host.shadowRoot;\n            }\n            return host.ref.hasOwnProperty(refName) ? host.ref[refName] : root.querySelector(`[ref=\"${refName}\"]`);\n        }\n\n        // The \"initialSetX\" functions are called:\n        // 1. When a custom element instance is first created (before it's connected) - \n        // state attribute values are set to their state prop names (e.g: '$name').\n        // 2. When a custom element instance becomes connected (added to the DOM) - state attribute values are actually resolved to the\n        // value of their respective state prop values, and binding between them occurs.\n        initialSetText(stateProp) {\n            setStateText.call(this, stateProp);\n        }\n        initialSetAttribute(attributeName, attributeValue) {\n            attributeValue = String(attributeValue);\n            let valueToSet = attributeValue;\n            /*\n            // \"Property Attribute\"\n            if (attributeValue.indexOf('@') === 0 && this.host && this.isConnected) {\n                valueToSet = this.host.getAttribute(attributeValue.substring(1));\n            } \n            */\n            \n            // \"State attribute\"\n            if (attributeValue.indexOf('$') === 0 && this.isConnected)  {\n                let stateProp = attributeValue.substring(1);\n                setStateAttribute.call(this, attributeName, stateProp);\n            }\n            // normal attribute\n            else {\n                setAttribute.call(this, attributeName, valueToSet);\n            }\n        }\n    }\n\n    /*\n    if (DEBUG_MODE) {\n        const descriptors = Object.getOwnPropertyDescriptors(ReactiveElement.prototype);\n        for (const key in descriptors) {\n            const descrp = descriptors[key];\n            Object.defineProperty(ReactiveElement.prototype, key, {\n                writable: descrp.writable,\n                configurable: descrp.configurable,\n                enumerable: descrp.enumerable,\n                value: ()=> {\n                    `Calling ${key} on ReactiveElement for ${elementClass.toString()}`;\n                    descrp.value();\n                }\n            });\n        }\n    }\n    */\n\n    return ReactiveElement;\n}\n","function debugGetProxyHandler(scopeName, originalObject) {\n    return {\n        get(target, property, receiver) {\n            if (typeof property === \"symbol\") return Reflect.get(...arguments);\n            console.debug (`Property ${property} called on ${scopeName}`);\n            if (property === \"prototype\") {\n                // return Object.getPrototypeOf(originalObject.prototype);\n                return originalObject.prototype;\n            }\n            if (typeof target[property] === \"function\") {\n                return new Proxy(target[property], debugApplyProxyHandler(property, `${scopeName}.${property}`));\n            }\n            else if (typeof target[property] === \"object\") {\n                if (!target[property].hasOwnProperty(\"_stateManager\")) {\n                    return new Proxy(target[property], debugGetProxyHandler(`${scopeName}.${property}`));\n                }\n            }\n            return Reflect.get(...arguments);\n        }\n    }\n}\n\nfunction debugApplyProxyHandler(funcName, scopeName) {\n    return {\n        construct(target, args, newTarget) {\n            console.debug(`Constructing ${funcName}`);\n            return Reflect.construct(target, args, newTarget);\n        },\n        apply(target, thisArg, argumentsList) {\n            console.debug(`Function: ${funcName} with arguments: ${argumentsList} called on ${scopeName}`);\n            return Reflect.apply(...arguments);\n        },\n    }\n}\nexport function putObjectInDebugMode(obj, name) {\n    return new Proxy(obj, debugGetProxyHandler(name, obj));\n}","import StateManager from \"./StateManager.js\";\nimport { StatefulArrayHandler } from \"./proxy_handlers.js\";\nimport { handleStateChange } from \"./state_utils.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\n\nclass StatefulArray extends Array {\n\n    // This will define which \"constructor\" JS calls whenever it needs to construct a new array while calling some Array native functions\n    static get [Symbol.species]() {\n        return Array;\n    }\n\n    // If any of these are \"set\" - handle state change in the value\n    dependencyProps = new Map();\n\n    // We set the $$operation property on functions that manipulates the array in a way that can change its length,\n    // to prevent redundant calls for handleStateChange.\n    // The call will be made when the \"length\" property of the array will be changed\n    splice(...args) {\n        this.$$operation = \"splice\";\n        const result = super.splice(...args);\n        delete this.$$operation;\n        return result;\n    }\n    shift(...args) {\n        this.$$operation = \"shift\";\n        const result = super.shift(...args);\n        delete this.$$operation;\n        return result;\n    }\n    unshift(...args) {\n        this.$$operation = \"splice\";\n        const result = super.unshift(...args);\n        delete this.$$operation;\n        return result;\n    }\n\n    sort(...args) {\n        this.$$operation = \"sort\";\n        const result = super.sort(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    reverse(...args) {\n        this.$$operation = \"reverse\";\n        const result = super.reverse(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    fill(...args) {\n        this.$$operation = \"fill\";\n        const result = super.fill(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n    \n    copyWithin(...args) {\n        this.$$operation = \"copyWithin\";\n        const result = super.sort(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    slice(...args) {\n        this.$$operation = \"slice\";\n        const result = super.slice(...args);\n        delete this.$$operation;\n        return result;\n    }\n\n    /*\n    clone() {\n        this.$$operation = \"clone\";\n        const result = this.map(item=> item);\n        delete this.$$operation;\n        return result;\n    }\n    */\n    toArray() {\n        this.$$operation = \"toArray\";\n        /*\n        const result = [];\n        for (let i = 0, len=this.length; i<len; i++) {\n            result.push(Object.assign({}, this[i]));\n        }\n        */\n        const result = this.rawArray;\n        delete this.$$operation;\n        return result;\n    }\n    // noConvertToStateItems can be used in internal methods where a normal array is returned and you just want to recreate a StatefulArray,\n    // with the same state items\n\n    // NOTE: original Array constructor can get a series of arguments to build an array from, OR a single number,\n    // to create an array with that number as a length\n    constructor(initialArray, parentStateObject, arrayStateProp, noConvertToStateItems=false, appScope = window) {\n        const StateManager = appScope.SPROUT_CONFIG.stateManagerClass;\n\n        if (!Array.isArray(initialArray)) {\n            throw Error(\"Argument for StateFulArray constructor must be an array!\");\n        }\n\n        const rawArray = initialArray;\n        let statefulArray;\n        if (!noConvertToStateItems) {\n            statefulArray = rawArray.map((item, index)=> {\n                if (item?.hasOwnProperty('state')) return item;\n                if (Array.isArray(item)) return item; // return new StatefulArray(item, this[index].state, index, false, appScope); \n                if (typeof item === 'object') return new StateManager(item, arrayStateProp, parentStateObject._stateManager, false, appScope);\n                return item;\n            });\n        }\n        super(...statefulArray);\n\n        this.parentStateObject = parentStateObject;\n        this.arrayStateProp = arrayStateProp;\n        this.rawArray = rawArray;\n\n        statefulArray = new Proxy(this, StatefulArrayHandler(parentStateObject?._stateManager, arrayStateProp, appScope));\n        return statefulArray;\n    }\n}\n\nif (DEBUG_MODE) {\n    StatefulArray = putObjectInDebugMode(StatefulArray, \"StatefulArray\");\n}\n\nexport default StatefulArray;","import StateManager from \"./StateManager.js\";\nimport { handleStateChange } from \"./state_utils.js\";\nimport StatefulArray from \"./StatefulArray.js\";\nimport { BUILT_IN_STATE_PROPS, ERROR_MESSAGES } from \"./consts.js\";\n\nexport const StatefulArrayHandler = function(parentStateManager, arrayStateProp, appScope = window) {\n    const StateManager = appScope.SPROUT_CONFIG.stateManagerClass;\n    return {\n        set(targetArray, property, value) {\n            // A change in array length triggers state change in the array state prop\n            if (property === \"length\") {\n                const setResult = Reflect.set(targetArray, property, value);\n                parentStateManager.setDirtyProp(arrayStateProp);\n                // queueMicrotask(()=> handleStateChange(parentStateManager, arrayStateProp));\n                return setResult;\n            }\n\n            // Return if the value is the same\n            if (targetArray[property] === value) return true;\n\n            const index = Number(property);\n            if (!isNaN(index)) { // Check if the property is a numeric index\n                // If we set it to a new object, convert it to a state object\n                if (typeof value === 'object' && (!value.hasOwnProperty('_stateManager') && !value.hasOwnProperty('state'))) {\n                    value = new StateManager(value, arrayStateProp, parentStateManager, false, appScope);\n                }\n                // Make sure state values are always state manager values\n                // Sometimes they can be state objects (because of the custom get handler in the Proxy)\n                if (value.hasOwnProperty('_stateManager')) {\n                    value = value._stateManager;\n                }\n                // This means the object actions are part of a native array function ('splice' etc.), and that we should NOT\n                // mark $$mapAction on values\n                if (!targetArray.hasOwnProperty('$$operation')) {\n                    let doStateChangeHandle = false;\n                    if (index < targetArray.length) {\n                        doStateChangeHandle = true;\n                    }\n                    const setResult = Reflect.set(targetArray, property, value);\n                    // Only handle state change if this is a change for an existing array item,\n                    // if it's a new item, it will already be handled on the \"length\" property set\n                    // Without this check we will have a redundant state check\n                    if (doStateChangeHandle) {\n                        parentStateManager.setDirtyProp(arrayStateProp);\n                        //queueMicrotask(()=> handleStateChange(parentStateManager, arrayStateProp));\n                    }\n                    return setResult;\n                }\n            }\n            return Reflect.set(targetArray, property, value);\n        },\n        \n        get(targetArray, property, receiver) {\n            // if (typeof property === 'symbol') return Reflect.get(...arguments);\n            // if (property === 'hasOwnProperty') return Reflect.get(...arguments);\n            const index = Number(property);\n            if (!isNaN(index)) {\n                if (!targetArray[index]) return undefined;\n                if (targetArray[index].hasOwnProperty('state')) return targetArray[index].state;\n                // Could be another array\n                return targetArray[index];\n            }\n\n            /*\n            // If this property is set on the array, it means the get is part of a \"dependency check\"\n            if (targetArray.hasOwnProperty(\"_gettingDependenciesFor\")) {\n                targetArray.dependencyProps.set(property, targetArray._gettingDependenciesFor);\n                delete targetArray._gettingDependenciesFor;\n            }\n            */\n            \n            return Reflect.get(...arguments);\n        }\n    }\n}\n\nexport const StateObjectValueHandler = function(rootStateObj, objPropertyName, appScope = window) {\n    return {\n        defineProperty(targetObj, property, descriptor) {\n            if (typeof descriptor?.value !== \"undefined\") {\n                const value = descriptor.value;\n                // Could already be a StatefulArray (needs to find better way to detect this)\n                if (Array.isArray(value)) {\n                    if (!value?.[0]?._stateManager) {\n                        descriptor.value = new StatefulArray(descriptor.value, rootStateObj, objPropertyName, false, appScope);\n                    }\n                }\n                else if (typeof value === \"object\") {\n                    descriptor.value = new Proxy(descriptor.value, StateObjectValueHandler(rootStateObj, objPropertyName, appScope))\n\n                }\n            }\n            else if (typeof descriptor?.get === \"function\") {\n                descriptor.get.call(targetObj);\n            }\n            // Don't use \"arguments\" here - they are not linked to argument changes in 'strict'\n            const definePropertyResult = Reflect.defineProperty(targetObj, property, descriptor);\n            const stateManager = rootStateObj._stateManager;\n            stateManager.setDirtyProp(objPropertyName);\n            // queueMicrotask(()=> handleStateChange(stateManager, objPropertyName));\n            return definePropertyResult;\n        },\n    }\n}\nexport const StateHandler = function(stateObj, appScope = window) {\n    return {\n        defineProperty(targetState, stateProp, descriptor) {\n            if (BUILT_IN_STATE_PROPS.includes(stateProp) || targetState?._binding) {\n                return Reflect.defineProperty(...arguments);\n            }\n            const origTargetState = targetState;\n            const dependencies = new Set();\n            // Will be the actual prop name if this is a state hook setter\n            let setStateProp;\n            targetState = new Proxy(targetState, {\n                get(target, property, receiver) {\n                    if (property === \"_global\") {\n                        target._global._gettingDependenciesFor = stateProp;\n                        target._global._localStateManager = target._stateManager;\n\n                    }\n                    if (BUILT_IN_STATE_PROPS.includes(property)) {\n                        return Reflect.get(...arguments);\n                    }\n                    if (Array.isArray(target[property])) {\n                        target[property]._gettingDependenciesFor = stateProp;\n                    }\n                    dependencies.add(property);\n                    return Reflect.get(...arguments);\n                }\n            });\n            if (typeof descriptor?.value !== \"undefined\") {\n                const value = descriptor.value;\n                // Could already be a StatefulArray (needs to find better way to detect this)\n                if (Array.isArray(value)) {\n                    // Setter Hook\n                    if (stateProp.indexOf('set_') === 0) {\n                        const deps = value?.[1];\n                        if (!deps) throw Error(ERROR_MESSAGES.NO_DEPENDENCIES_ARRAY_IN_SET_HOOK(stateProp));\n                        // Second item should be an array of dependencies\n                        value?.[1].forEach(depProp=> {\n                            dependencies.add(depProp);\n                        });\n                        // Third item can be a boolean stating if to run the setter on initialization\n                        if (value?.[2] === true) {\n                            setStateProp = stateProp.substring(4);\n                            const func = value?.[0];\n                            if (func && typeof func === \"function\") {\n                                stateObj[setStateProp] = func.call(stateObj);\n                            }\n                        }\n                        else {\n                            if (value?.[3]) {\n                                stateObj[setStateProp] = value[3]\n                            }\n                        }\n                    }\n                    else if (!value?.[0]?._stateManager) {\n                        descriptor.value = new StatefulArray(descriptor.value, stateObj, stateProp, false, appScope);\n                    }\n                }\n                else if (typeof value === 'object') {\n                    descriptor.value = new Proxy(descriptor.value, StateObjectValueHandler(stateObj, stateProp, appScope));\n                }\n            }\n            else if (typeof descriptor?.get === \"function\") {\n                descriptor.get.call(targetState);\n            }\n\n            if (dependencies.size) {\n                dependencies.forEach(dep=> stateObj._stateManager.addStateDependency(dep, stateProp));\n            }\n\n            // Don't use \"arguments\" here - they are not linked to argument changes in 'strict'\n            const definePropertyResult = Reflect.defineProperty(origTargetState, stateProp, descriptor);\n            const stateManager = stateObj._stateManager;\n            if (setStateProp) stateProp = setStateProp;\n            if (!origTargetState.hasOwnProperty(\"_populate\"))\n                stateManager.setDirtyProp(stateProp);\n                // queueMicrotask(()=> handleStateChange(stateManager, stateProp));\n            return definePropertyResult;\n        },\n        get(targetState, property, receiver) {\n            if (property === 'hasOwnProperty') return Reflect.get(...arguments);\n            // Global state access\n            if (!targetState.hasOwnProperty('_global')) {\n                if (targetState.hasOwnProperty(\"_gettingDependenciesFor\")) {\n                    targetState._stateManager.addGlobalStateDependency(property, targetState._gettingDependenciesFor, targetState._localStateManager);\n                    delete targetState._gettingDependenciesFor;\n                    delete targetState._localStateManager;\n                    return Reflect.get(...arguments);\n                }\n            }\n            // property can be a Symbol on rare occasions, then indexOf will be undefined (that's the reason for the question mark)\n            // This handles using the negate operator on state properties\n            if (typeof property?.indexOf === 'function' && property?.indexOf('!') === 0) {\n                const originalProperty = property.substring(1);\n                if (targetState.hasOwnProperty(originalProperty)) {\n                    return !targetState[originalProperty];\n                }\n            }\n            return Reflect.get(...arguments);\n        }\n    }\n};\n","import { handleStateChange, populateStateFromInitialState } from \"./state_utils.js\";\nimport { StateHandler } from \"./proxy_handlers.js\";\nimport { GLOBAL_STATE_FUNCTION_NAME } from \"./consts.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\nimport { setHiddenProperty } from \"./prop_utils.js\";\n\n// This class actually handles \"State\". It returns a proxied \"state\" object,\n// while handling all state changes and triggers behind the scenes\nclass StateManager {\n\n    // The privateState is used to actually contain values to read from,\n    // as custom getters and setters are defined\n    privateState = {}\n    // This represents the \"publicly\" exposed state object\n    state = {};\n\n    // Saves \"map\" connections between a state array value and a custom element name,\n    // this will enable creating/removing new custom elements when items of a state array change\n    stateArrayMaps = {};\n    // conditionallyRenderingElements = {};\n    // A map that maps state props to \"dependencies\", each time a stateProp which is a key here,\n    // is changed, a state change is triggered for its dependencies as well\n    stateDependencies = {};\n    conditionallyRenderingElements = {};\n\n    // Maps state props to state nodes,\n    // Keys are state props, and values are sets of Nodes\n    stateNodes = {}\n\n    // These are used when the state object is part of Stateful Array\n    parentStateProp\n    parentStateManager\n    // parentStatePropName is used if the state object is e.g. an item of an array on a state object,\n    // or a value in an object on a state object - any change on the child state object should trigger state\n    // changes on the parentStateProp\n    // host is the host element that the state is attached to\n    \n    dirtyProps = new Set();\n\n    #handleStateChangeRAF_ID = null;\n    setDirtyProp(prop) {\n        this.dirtyProps.add(prop);\n        if (this.#handleStateChangeRAF_ID) {\n            cancelAnimationFrame(this.#handleStateChangeRAF_ID);\n            // clearTimeout(this.#handleStateChangeRAF_ID);\n\n        }\n        this.#handleStateChangeRAF_ID = requestAnimationFrame(()=> {\n            this.#handleStateChangeRAF_ID = null;\n            if (this.dirtyProps.size > 0) {\n                this.handleStateChanges();\n            }\n        });\n    }\n\n    handleStateChanges() {\n        console.log (\"Handling state changes for\", this);\n        const stateProps = [...this.dirtyProps];\n        this.dirtyProps.clear();\n        stateProps.forEach(prop=> {\n            handleStateChange(this, prop);\n        });\n    }\n    constructor(initialState, parentStateProp, parentStateManager, isGlobal = false, appScope=window) {\n        this.parentStateProp = parentStateProp;\n        this.parentStateManager = parentStateManager;\n\n        // Saves the actual state manager instance to a readonly _stateManager\n        setHiddenProperty(this.state, \"_stateManager\", this, true);\n        \n        // Initialize a proxy on the \"public state\"\n        this.state = new Proxy(this.state, StateHandler(this.state, appScope));\n        if (!isGlobal) setHiddenProperty(this.state, \"_global\", appScope[GLOBAL_STATE_FUNCTION_NAME](), true);\n        else {\n            // This maps depencdies between \"local\" state properties to global state changes\n            // The difference between the normal dependencies object, is that each depenency\n            // also includes a state object (which is the state context of the property),\n            // in other words, if a local state \"relies\" on a global state change - we save this\n            // mapping here.\n            // The keys are global state properties, where each value is a Map,\n            // in the map, the keys are local state manager objects, and the values are sets with\n            // local property names\n            this.globalStateDependencies = {};\n            this.addGlobalStateDependency = (stateProp, depStateProp, stateManager)=> {\n                if (!this.globalStateDependencies.hasOwnProperty(stateProp)) {\n                    this.globalStateDependencies[stateProp] = new Map();\n                }\n                if (!this.globalStateDependencies[stateProp].has(stateManager)) {\n                    this.globalStateDependencies[stateProp].set(stateManager, new Set());\n                }\n                this.globalStateDependencies[stateProp].get(stateManager).add(depStateProp);\n            }\n        }\n        if (initialState) {\n            populateStateFromInitialState(this.state, initialState);\n        }\n\n        setHiddenProperty(this.state, \"_isActive\", this, true);\n    }\n\n    addStateDependency(stateProp, depStateProp) {\n        if (!this.stateDependencies.hasOwnProperty(stateProp)) {\n            this.stateDependencies[stateProp] = new Set();\n        }\n        this.stateDependencies[stateProp].add(depStateProp);\n    }\n\n    addStateMap(stateProp, customElementName, parentElement) {\n        if (!this.stateArrayMaps.hasOwnProperty(stateProp)) {\n            this.stateArrayMaps[stateProp] = new Map();\n        }\n        this.stateArrayMaps[stateProp].set(parentElement, customElementName);\n    }\n\n\n    addConditionallyRenderingElements(stateProp, element) {\n        if (!this.conditionallyRenderingElements.hasOwnProperty(stateProp)){\n            this.conditionallyRenderingElements[stateProp] = new Set();\n        }\n        element.originalParentElement = element.parentElement || element.host?.shadowRoot;\n        this.conditionallyRenderingElements[stateProp].add(element);\n    }\n    \n   \n    // Node here is either an Attribute Node or a Text Node\n    addStateNode(stateProp, stateNode, isBooleanStateProp=false) {\n        if (!this.stateNodes.hasOwnProperty(stateProp)) {\n            this.stateNodes[stateProp] = new Set();\n            this.setAndBindStateProperty(stateProp, isBooleanStateProp);\n        }\n        this.stateNodes[stateProp].add(stateNode);\n    }\n    setAndBindStateProperty(stateProp) {\n        let stateObj = this.state;\n        let originalStateProp = stateProp;\n        const isNegationProp = stateProp.indexOf('!') === 0;\n        if (isNegationProp) {\n            originalStateProp = stateProp.substring(1);\n        }\n        let descriptor = Object.getOwnPropertyDescriptor(stateObj, originalStateProp);\n        if (!descriptor) {\n            stateObj = stateObj._global;\n            descriptor = Object.getOwnPropertyDescriptor(stateObj, originalStateProp);\n            if (!descriptor) {\n                throw Error(`Could not bind state prop ${stateProp}. State prop ${originalStateProp} not defined!`);\n            }\n        }\n\n        stateObj._binding = true;\n\n        // Some state props can be getters (which usually references other state values)\n        // These should be treated differently: should not be saved in privateState, and should not have a setter defined\n        const isValueProp = descriptor.hasOwnProperty('value');\n        const stateManager = stateObj._stateManager;\n\n        if (isNegationProp) {\n            const negateStateProp = stateProp;\n            if (isValueProp) {\n                if (!stateManager.privateState.hasOwnProperty(negateStateProp)) {\n                    Object.defineProperty(stateObj, negateStateProp, {\n                        get() {\n                            return !stateManager.privateState[originalStateProp];\n                        },\n                        set() {\n                            throw Error(\"Cannot directly set a negation State property!\");\n                        },\n                        enumerable: true,\n                    });\n                    stateManager.addStateDependency(originalStateProp, negateStateProp);\n                }\n            }\n            else {\n                if (!stateManager.state.hasOwnProperty(negateStateProp)) {\n                    Object.defineProperty(stateObj, negateStateProp, {\n                        get() {\n                            return !stateManager.state[originalStateProp];\n                        },\n                        set() {\n                            throw Error(\"Cannot directly set a negation State property!\");\n                        },\n                        enumerable: true,\n                    });\n                    stateManager.addStateDependency(originalStateProp, negateStateProp);\n                }\n            }\n        }\n        else {\n            if (isValueProp) {\n                if (!stateManager.privateState.hasOwnProperty(stateProp)) {\n                    stateManager.privateState[stateProp] = stateObj[stateProp];\n                }\n                Object.defineProperty(stateObj, stateProp, {\n                    set(value) {\n                        const currentVal = stateManager.privateState[stateProp];\n                        if (value === currentVal) return;\n                        // Sets value to \"private state\"\n                        stateManager.privateState[stateProp] = value;\n                        handleStateChange(stateManager, stateProp);\n                        // If this is an item in a Stateful Array, also trigger a state change for the state prop that contains the array\n                        if (stateManager.parentStateManager) {\n                            handleStateChange(stateManager.parentStateManager, stateManager.parentStateProp);\n                        }\n                    },\n                    get() {\n                        // Value is always retrieved from the \"private\" state\n                        return stateManager.privateState[stateProp];\n                    }\n                });\n            }\n            // If is a getter then - it can't be set, and the getter will return the value.\n        }\n        delete this.state._binding;\n    }\n}    \n\nif (DEBUG_MODE) {\n    StateManager = putObjectInDebugMode(StateManager, 'StateManager');\n}\n\nexport default StateManager;\n","\n\n// This is the script that takes Template elements from the page and defines Reactive Custom Elements\nexport default function(appScope, appName) {\n\n    // Create custom elements from templates\n    async function defineCustomElementFromTemplate(template, elemName, globalStylesheet) {\n        const templateContent = document.importNode(template.content, true);\n        const style = templateContent.querySelector('style');\n        if (style) templateContent.removeChild(style);\n        const runtime = templateContent.querySelector('script');\n        if (runtime) templateContent.removeChild(runtime);\n\n        customElements.define(\n            elemName, \n            class extends appScope.ReactiveCustomElement {\n                constructor() {\n                    super(templateContent, runtime, style?.textContent, globalStylesheet);\n                }\n            }\n        );\n    }\n\n    function build() {\n        let globalStylesheet;\n        const globalStyle = document.querySelector(`head > style[app=\"${appName}\"]`);\n        if (globalStyle) {\n            globalStylesheet = new CSSStyleSheet();\n            globalStylesheet.replaceSync(globalStyle.textContent);\n        }\n        Array.prototype.forEach.call(document.querySelectorAll(`template[app=\"${appName}\"]`), template => {\n            defineCustomElementFromTemplate(template, template.getAttribute('for'), globalStylesheet);\n        });\n        if (typeof globalThis[`${appName}_runtime`] === 'function') {\n            const globalRuntimeFunction = globalThis[`${appName}_runtime`];\n            globalRuntimeFunction.call(appScope);\n        }\n    }\n    build();\n}","// Convert attribute values to \"typed\" values\nexport function attributeValueToTypedValue(attrValue) {\n    let typedValue = attrValue;\n    if (attrValue === \"true\") typedValue = true;\n    else if (attrValue === \"false\") typedValue = false;\n    else if (!isNaN(Number(attrValue))) typedValue = Number(attrValue);\n    return typedValue; \n}\n\n// Check if attribute node is a \"Command\" or a \"State Attribute\" \nexport function isSpecialAttribute(attrNode) {\n    if (typeof attrNode !== \"object\" && attrNode.constructor.name !== \"Attr\") throw Error(\"Passed non Attribute to isSpecialAttribute!\");\n    return attrNode.nodeName.indexOf('_') === 0 || attrNode.nodeValue.indexOf('$') === 0;\n}","import { attributeValueToTypedValue } from \"./attr_utils\";\nimport { CONDITIONAL_OPERATORS } from \"./consts\";\nimport { queueConditionalRender } from \"./paint_utils\";\n\n// returns a Boolean according to the conditional equality of conditional to conditionStateValue\nexport function resolveConditional(conditional, conditionStateValue) {\n    const typeOf = typeof conditional;\n    if (typeOf !== 'string') {\n        return conditionStateValue === conditional;\n    }\n    else {\n        if (conditional === \"always\") return true;\n        if (CONDITIONAL_OPERATORS.includes(conditional[0])) {\n            const conditionFn = new Function(`return ${conditionStateValue}${conditional}`);\n            return conditionFn();\n        }\n        else {\n            return conditionStateValue === conditional;\n        }\n    }\n}\n\nexport function getConditionalElementClass(ReactiveElementClass) {\n    class ConditionalElement extends ReactiveElementClass {\n\n        #conditionStateProp\n        #renderMap\n        #wasMounted = false\n\n        render(isFirstRender=false) {\n            let stateValue;\n            if (this.#conditionStateProp.indexOf('@') === 0) {\n                stateValue = this.host.getAttribute(this.#conditionStateProp.substring(1));\n            }\n            else {\n                stateValue = this.getState(this.#conditionStateProp);\n            }\n\n            if (stateValue === undefined) {\n                throw Error(`State value for ${this.#conditionStateProp} not found while rendering conditional-render element:`, this);\n            }\n            const elementsToRender = [];\n\n            this.#renderMap.forEach((elements, conditional)=> {\n                if (resolveConditional(conditional, stateValue)) {\n                    elementsToRender.push(...elements);\n                }\n            });\n\n            if (isFirstRender) {\n                this.innerHTML = \"\";\n                this.append(...elementsToRender);\n            }\n            else if (elementsToRender.length) {\n                queueConditionalRender(this, ()=> {\n                    this.innerHTML = \"\";\n                    this.append(...elementsToRender);\n                });\n            }\n        }\n        connectedCallback() {\n            this.host = this.getRootNode().host;\n            if (!this.host) {\n                throw Error(\"<conditional-render> must be used as part of a custom element template! Cannot be used outside of a custom element.\");\n            }\n            if (this.#wasMounted) return;\n            const conditionAttributeValue = this.getAttribute(\"_condition\");\n            if (!conditionAttributeValue) {\n                throw Error(\"conditional-render elements must have a _condition command attribute\");\n            }\n            if (!this.children || !this.children.length) {\n                throw Error(\"Conditional element must have children!\");\n            }\n\n            const statePropName = conditionAttributeValue;\n            this.#conditionStateProp = statePropName;\n\n            const isConditionStatic = this.#conditionStateProp.indexOf('@') === 0;\n            let stateValue, stateObject;\n            if (!isConditionStatic) {\n                [stateValue, stateObject] = this.getState(statePropName, true);\n                if (typeof stateValue === \"undefined\") {\n                    throw Error(`State property ${statePropName} not defined for _condition command!`);\n                }\n            }\n            const renderMap = new Map();\n            renderMap.set(\"always\", []);\n            const children = [...this.children];\n\n            children.forEach(conditionalChild=> {\n                const _if = conditionalChild.getAttribute('_if');\n                if (_if) {\n                    const expectedValue = attributeValueToTypedValue(_if);\n                    if (!renderMap.has(expectedValue)) renderMap.set(expectedValue, []);\n                    renderMap.get(expectedValue).push(conditionalChild);\n                }\n                else {\n                    renderMap.get(\"always\").push(conditionalChild);\n                }\n            });\n            this.#renderMap = renderMap;\n\n            if (!isConditionStatic) {\n                stateObject._stateManager.addConditionallyRenderingElements(statePropName, this);\n            }\n            this.render(true);\n            this.#wasMounted = true;\n        }\n    }\n\n    return ConditionalElement;\n}\n\n","import { COMMANDS as COMMAND_ATTRIBUTES } from \"./commands.js\";\nimport { BOOLEAN_ATTRIBUTES, SUPPORTED_ATTRIBUTES_FOR_BINDING, GLOBAL_STATE_FUNCTION_NAME, DEFAULT_TEMPLATE_DOM } from \"./consts.js\";\nimport { setAttribute, setStateAttribute, setStateText } from \"./state_utils.js\";\nimport StateManager from \"./StateManager.js\";\nimport { queueActivate, queueBindEvents } from \"./paint_utils.js\";\nimport { extendElementClassWithReactiveElementClass } from './ReactiveElement.js';\n\nexport function getReactiveCustomElementClass(appScope = window) {\n    const ReactiveHTMLElement = extendElementClassWithReactiveElementClass(HTMLElement, appScope);\n    const StateManager = appScope.SPROUT_CONFIG.stateManagerClass;\n    class ReactiveCustomElement extends ReactiveHTMLElement {\n        // Should contain the \"root\" DOM element containing this element\n        host = null\n\n        #wasMounted = false\n\n        // Callback function for when the element is connected to a DOM tree on the page and rendered\n        #onMount\n        // Callback function for when the element is connected to a DOM tree on the page, just before render\n        #beforeRender\n\n        // Should only be used on non native custom elements\n        #templateContent\n        #stylesheet\n        #globalStylesheet\n        // This will be an object where keys are element \"ref\" names,\n        // and the value is either a \"click\" event handler (if it's a function),\n        // or an object with DOM event names as keys and event handlers as functions.\n        // Only relevant for non native custom elements - event bubbling from child elements will be used\n        events\n\n        // Name of events that are bound to the main event handler function\n        #boundEventNames = [];\n        // Main event handler function \n        #eventHandler\n\n        constructor(template=null, runtimeScript, style, globalStylesheet) {\n            super();\n            const isFrameworkElement = this.tagName === \"CONDITIONAL-ELEMENT\";\n            if (isFrameworkElement) return;\n\n            if (runtimeScript) {\n                const dynamicRuntimeFn = new Function(runtimeScript.textContent);\n                const runtime = dynamicRuntimeFn();\n                this.#setRuntime(runtime);\n            }\n\n            if (style) {\n                const stylesheet = new CSSStyleSheet();\n                stylesheet.replaceSync(style);\n                this.#stylesheet = stylesheet;\n            }\n            if (globalStylesheet) {\n                this.#globalStylesheet = globalStylesheet;\n            }\n\n            this.#templateContent = \n                template?.cloneNode(true) ||\n                DEFAULT_TEMPLATE_DOM.cloneNode();\n\n            // Maps \"ref names\" to actual elements in the component DOM tree,\n            // for fast access.\n            this.ref = {};\n        }\n\n        #setRuntime(runtime) {\n            if (runtime.events) {\n                this.events = runtime.events;\n                if (this.isConnected) {\n                    queueBindEvents(this, ()=> this.#bindEvents());\n                }\n            }\n            if (runtime.state) {\n                this.setInitialState(runtime.state);\n                // If this is not mounted yet, #setStateFromInitialState will be called from onConnected callback\n                if (this.isConnected) this.#setActiveStateFromInitialState();\n            }\n            if (runtime.onMount) {\n                this.#onMount = runtime.onMount;\n            }\n            if (runtime.beforeRender) {\n                this.#beforeRender = runtime.beforeRender;\n            }\n        }\n\n        setInitialState(initState) {\n            if (this.initialState) {\n                Object.assign(this.initialState, initState);\n            }\n            else {\n                this.initialState = initState;\n            }\n        }\n\n        #setActiveStateFromInitialState() {\n            if (!this.initialState) return;\n            const initialState = this.initialState;\n            if (initialState._stateManager) {\n                this.state = initialState._stateManager.state;\n            }\n            else {\n                this.state = new StateManager(initialState, undefined, undefined, false, appScope).state;\n            }\n            delete this.initialState;\n        }\n\n        #renderTemplate() {\n            if (appScope.SPROUT_CONFIG.useShadow) {\n                const shadowRoot = this.attachShadow({ mode: \"open\" });\n                this.shadowRoot.adoptedStyleSheets = [];\n                if (this.#globalStylesheet) this.shadowRoot.adoptedStyleSheets.push(this.#globalStylesheet);\n                if (this.#stylesheet) this.shadowRoot.adoptedStyleSheets.push(this.#stylesheet);\n                shadowRoot.appendChild(this.#templateContent);\n            }\n            else {\n                const fragment = new DocumentFragment();\n                fragment.appendChild(this.#templateContent);\n                this.appendChild(fragment);\n            }\n        }\n\n        #unbindEvents() {\n            if (!this.#boundEventNames.length) return;\n            const thiselement = this;\n            this.#boundEventNames.forEach(eventName=> {\n                thiselement.removeEventListener(eventName, this.#eventHandler, false);\n            });\n\n        }\n        #bindEvents() {\n            if (!this.events) return;\n            const eventRefNames = Object.keys(this.events);\n            const clickActions = {};\n            const otherActions = {};\n            eventRefNames.forEach(refName=> {\n                const value = this.events[refName];\n                if (typeof value === 'function') {\n                    clickActions[refName] = value;\n                }\n                else if (typeof value === 'object') {\n                    const eventNames = Object.keys(value);\n                    eventNames.forEach(eventName=> {\n                        if (eventName === 'click') {\n                            clickActions[refName] = value[eventName];\n                        }\n                        else {\n                            if (!otherActions[eventName]) otherActions[eventName] = {};\n                            otherActions[eventName][refName] = value[eventName];\n                        }\n                    });\n                }\n            });\n            const globalState = appScope[GLOBAL_STATE_FUNCTION_NAME]();\n            this.#eventHandler = function(event) {\n                const start = performance.now();\n                const elementsPath = event.composedPath();\n                let target;\n                if (elementsPath) {\n                    target = elementsPath.find(element => element.hasAttribute && element.hasAttribute('ref') && (element.getAttribute('ref') in this.events));\n                }\n                else {\n                    target = (event.target.hasAttribute && event.target.hasAttribute('ref') && (event.target.getAttribute('ref') in this.events)) ? event.target : null;\n                }\n                if (target) {\n                    const ref = target.getAttribute('ref');\n                    const eventName = event.type;\n                    if (eventName === \"click\") {\n                        const clickEvent = typeof this.events[ref] === \"function\" ? this.events[ref] : null;\n                        clickEvent?.call(target, event, event.target, globalState);\n                    }\n                    else {\n                        this.events[ref][eventName]?.call(target, event, event.target, globalState);\n                    }\n                }\n\n                console.log (`Event ${event.type} took ${ performance.now() - start }`);\n            }\n\n            const thiselement = this;\n            if (Object.keys(clickActions).length) {\n                thiselement.addEventListener('click', this.#eventHandler);\n                this.#boundEventNames.push('click');\n            }\n            const eventNames = Object.keys(otherActions);\n            for (const eventName of eventNames)\n                thiselement.addEventListener(eventName, this.#eventHandler);\n            this.#boundEventNames.push(...eventNames);\n        }\n\n        disconnectedCallback() {\n            this.#unbindEvents();\n            this.state = undefined;\n        }\n\n        activate() {\n            //this.#setActiveStateFromInitialState();\n            const attributeNames = this.getAttributeNames();\n            for (const attrName of attributeNames) {\n                const attrValue = this.getAttribute(attrName);\n                // This also resolves \"State attributes\"\n                this.initialSetAttribute(attrName, attrValue);\n            }\n\n            queueBindEvents(this, ()=> this.#bindEvents());\n            // if (this.#beforeRender) this.#beforeRender.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]());\n            // if (this.#onMount) queueMicrotask(()=> this.#onMount.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]()));\n\n        }\n        connectedCallback() {\n            console.log (\"CONNECTED CALLBACK: \", this);\n            if (this.#wasMounted) return;\n            // IMPORTANT: THIS *CAN* be NULL, DO NOT CHANGE IT!\n            // It is part of the way a check is made to see if an element is part of ShadowDOM!\n            // host will be null if the element is part of the DOM === the \"root\" custom element will have null in .host\n            // THIS SHOULD BE THE FIRST THING THAT HAPPENS!\n            this.host = this.getRootNode().host;\n            // this.#setActiveStateFromInitialState();\n            this.#renderTemplate();\n/*\n            const attributeNames = this.getAttributeNames();\n            for (const attrName of attributeNames) {\n                const attrValue = this.getAttribute(attrName);\n                // This also resolves \"State attributes\"\n                this.initialSetAttribute(attrName, attrValue);\n            }\n\n            queueBindEvents(this, ()=> this.#bindEvents());\n            */\n           \n            //requestAnimationFrame(()=> {\n            queueActivate(()=> {\n                this.#setActiveStateFromInitialState();\n                this.dispatchEvent(\n                    new CustomEvent(\"connected\"),\n                );\n                this.activate();\n            });\n        \n            //queueActivate(this, ()=> {\n            //    console.log (\"QUEUE ACTIVATE\");\n            //    this.activate()\n            //    this.dispatchEvent(\n            //        new CustomEvent(\"connected\"),\n            //        { bubbles: true }\n            //    );\n            //});\n            //*/\n            if (this.#beforeRender) this.#beforeRender.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]());\n            //if (this.#onMount) queueMicrotask(()=> this.#onMount.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]()));\n            this.#wasMounted = true;\n        }\n    }\n\n    return ReactiveCustomElement;\n}\n","import { extendElementClassWithReactiveElementClass } from \"./ReactiveElement.js\";\nimport StateManager from \"./StateManager.js\";\nimport { GLOBAL_STATE_VAR_NAME, GLOBAL_STATE_FUNCTION_NAME, HTML_ELEMENTS_CLASSES_MAP } from \"./consts.js\";\nimport SproutBuild from '../build/index.js';\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\nimport { setHiddenProperty } from \"./prop_utils.js\";\nimport { getConditionalElementClass } from \"./ConditionalElement.js\";\nimport { getReactiveCustomElementClass } from \"./ReactiveCustomElement.js\";\n\nconst allowAppScopeAccess = document.currentScript.hasAttribute(\"allowappscopeaccess\");\nconst stateManagerClass = StateManager;\nglobalThis.SproutInitApp = function(appName) {\n    \n    let appScope = (function() { return { window, document: window?.document }})(window);\n\n    const config = {\n        useShadow: true, // Always use shadow DOM for now, may add configurability later\n        allowAppScopeAccess: allowAppScopeAccess,\n        stateManagerClass\n    }\n\n    if (config.allowAppScopeAccess) {\n        Object.defineProperty(globalThis, \"sproutApps\", {\n            value: {},\n            writable: false\n        });\n        Object.defineProperty(globalThis.sproutApps, appName, {\n            value: appScope,\n            writable: false\n        });\n        \n    }\n\n    appScope.SPROUT_CONFIG = Object.seal(config);\n\n    // Prevent \"hasOwnProperty\" shenanigans\n    const hasOwnProperty = Object.prototype.hasOwnProperty;\n    setHiddenProperty(Object.prototype, \"hasOwnProperty\", hasOwnProperty);\n\n    appScope[GLOBAL_STATE_FUNCTION_NAME] = function() {\n        return {};\n    }\n    // If initialState is passed - also sets it to global state\n    appScope.setGlobalState = function(initialState = {}) {\n        const globalState =  new appScope.SPROUT_CONFIG.stateManagerClass(initialState, undefined, undefined, true, appScope).state;\n        const globalStateVarName = GLOBAL_STATE_VAR_NAME;\n        Object.defineProperty(appScope, globalStateVarName, {\n            value: globalState,\n            writable: DEBUG_MODE ? true : false,\n            configurable: false\n        });\n        Object.defineProperty(appScope, GLOBAL_STATE_FUNCTION_NAME, {\n            value: function() {\n                return appScope[globalStateVarName];\n            },\n        });\n    };\n\n\n    const HTML_REACTIVE_ELEMENT_CLASSES = {};\n    HTML_ELEMENTS_CLASSES_MAP.forEach(elementDefinition=>\n        HTML_REACTIVE_ELEMENT_CLASSES[elementDefinition.element] = extendElementClassWithReactiveElementClass(elementDefinition.class, appScope, true)\n    );\n\n    appScope.ReactiveCustomElement = getReactiveCustomElementClass(appScope);\n\n    // Extend specific HTMLElement classes to enable reactivity (use it by adding an \"is\" attribute to an element)\n    HTML_ELEMENTS_CLASSES_MAP.forEach(itemDefinition => {\n        customElements.define(\n            `reactive-${itemDefinition.element}`, \n            // extendElementClassWithReactiveElementClass(itemDefinition.class, appScope, true),\n            HTML_REACTIVE_ELEMENT_CLASSES[itemDefinition.element],\n            { extends: itemDefinition.element });\n        }\n    );\n\n    const ReactiveHeadingClass = extendElementClassWithReactiveElementClass(HTMLHeadingElement, appScope);\n    [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"].forEach(hTag=> {\n        customElements.define(`reactive-${hTag}`,\n            class extends ReactiveHeadingClass {},\n            { extends: hTag}\n        );\n\n    });\n    const ReactiveConditionalElementClass = extendElementClassWithReactiveElementClass(HTMLElement, appScope);\n    const ConditionalElementClass = getConditionalElementClass(ReactiveConditionalElementClass); \n    customElements.define('conditional-render', ConditionalElementClass);\n\n    return function() {\n        SproutBuild(appScope, appName);\n    }.bind(appScope);\n}\n\n\n\n"],"names":["extendElementClassWithReactiveElementClass","BOOLEAN_ATTRIBUTES","SUPPORTED_ATTRIBUTES_FOR_BINDING","SUPPORTED_PROPERTIES_FOR_BINDING","SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING","BUILT_IN_STATE_PROPS","GLOBAL_STATE_VAR_NAME","GLOBAL_STATE_FUNCTION_NAME","ERROR_MESSAGES","NO_DEPENDENCIES_ARRAY_IN_SET_HOOK","stateProp","concat","HTML_ELEMENTS_CLASSES_MAP","HTMLAnchorElement","element","HTMLAreaElement","HTMLAudioElement","HTMLBodyElement","HTMLBRElement","HTMLButtonElement","HTMLCanvasElement","HTMLDataElement","HTMLDataListElement","HTMLDetailsElement","HTMLDialogElement","HTMLDivElement","HTMLDListElement","HTMLEmbedElement","HTMLFieldSetElement","HTMLFormElement","HTMLHRElement","HTMLHtmlElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLLabelElement","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLObjectElement","HTMLOListElement","HTMLOptGroupElement","HTMLOptionElement","HTMLParagraphElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSelectElement","HTMLSourceElement","HTMLSpanElement","HTMLTableElement","HTMLTableCellElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLVideoElement","HTMLSlotElement","DEBUG_MODE","DEFAULT_TEMPLATE_DOM","document","createElement","NODES_STATE","nodeActionsMap","Map","eventBindingFunctions","conditionalRenders","paintRafId","eventBindRafId","conditionalRenderRafId","activateRafId","elementActivateFunctions","CONDITIONAL_OPERATORS","MAX_OPERATIONS_PER_ANIMATION_FRAME","isElementAList","tagName","doUpdateDOM","queueBindEvents","bindFunction","set","size","cancelAnimationFrame","requestAnimationFrame","forEach","bindFn","clear","queueActivate","activateFn","queuePaint","queueConditionalRender","renderFunction","renderFn","stateToElement","resolveStateMapToDocumentFragment","getNodeActionsForNode","node","has","getNewNodeActionsObject","nodeActions","get","setStateNodeAction","nodeActionsObject","value","nodeType","Node","ATTRIBUTE_NODE","TEXT_NODE","addRemoveAction","elementToRemove","stateIdentifier","remove","Set","add","addReplaceAction","oldElement","newElement","replace","addSwitchAction","addAppendAction","nodeToAppend","append","addStateAttributeToNode","attributeNode","addAppendActionToNode","after","hasPendingActions","generateStateNodeActions","stateManager","_this","state","stateNodes","stateMapElements","stateArrayMaps","conditionallyRenderingElements","stateMapArray","console","log","customElementName","parentElement","stateMapNodeActions","currentStateMapArrayIndex","isParentAList","children","length","Array","prototype","call","childElement","currentIndex","_stateItem","customElement","firstElementChild","stateItem","hasOwnProperty","replaceWithChild","undefined","i","len","newChild","render","resolveNodeActionsMapToDOMActions","batchActions","attributeActions","elementActions","setAttribute","error","originalOwnerElement","hasAttribute","name","push","removeAttributeNode","setAttributeNode","nodeValue","String","textContent","replaceWith","newNode","oldNode","replaceChild","_iterator","_createForOfIteratorHelper","values","_step","s","n","done","removes","_iterator3","_step3","_loop","nodeToRemove","parentNode","removeChild","err","e","f","_iterator2","_step2","appends","_iterator4","_step4","_loop2","newChildElement","appendChild","logNodeActions","_toConsumableArray","entries","map","_ref","_ref2","_slicedToArray","actions","ELEMENT_NODE","appendElements","replaceElements","nodeName","DOMActions","DOMAction","setHiddenProperty","obj","propName","propValue","enumerable","arguments","Object","defineProperty","configurable","writable","handleStatesRAFId","HTMLElement","warn","globalThis","attrName","attrValue","includes","removeAttribute","elementSetAttribute","setStateAttribute","equalityValue","indexOf","colonIndex","Error","substring","_this$getState","getState","_this$getState2","stateVal","theState","conditionalStateProp","originalStateProp","_stateManager","addStateDependency","valueToSet","stateAttrNode","createAttribute","addStateNode","setStateText","_this$getState3","_this$getState4","textNode","createTextNode","stateObject","elemName","wrapInElement","customElementInstance","setInitialState","returnElement","mapStateArrayToElements","stateItems","_typeof","handleStateChange","stateDependencies","depStateProp","setStateProp","func","_global","globalStateDependencies","depStateProps","depStateManager","depState","populateStateFromInitialState","initialState","_populate","descriptors","getOwnPropertyDescriptors","descrp","key","bind","isArray","defineProperties","putObjectInDebugMode","attributeValueToTypedValue","mapStateToElements","stateItemsPropertyName","_parentElement$getSta","_parentElement$getSta2","stateItemsArray","elements","innerHTML","apply","COMMANDS","commandValue","_commandValue$split","split","_commandValue$split2","thiselement","addStateMap","text","initialSetText","_commandValue$split3","_commandValue$split4","attributeName","statePropName","bindAttributeToState","getAttribute","addEventListener","updateStateFromProperty","COMMAND_ATTRIBUTES","elementClass","appScope","window","_changeEventHandler","WeakMap","_wasMounted","_boundAttributesToState","_ReactiveElement_brand","WeakSet","ReactiveElement","_elementClass","_classCallCheck","_len","args","_key","_callSuper","_classPrivateMethodInitSpec","_defineProperty","_classPrivateFieldInitSpec","_inherits","_createClass","_classPrivateFieldGet","unbindAttributeToState","propertyName","newValue","stateValue","disconnectedCallback","_this$host","removeEventListener","host","ref","thisRefName","events","_classPrivateFieldSet","activate","_this2","changeEvent","Event","bubbles","composed","dispatchEvent","commands","attributeNames","getAttributeNames","initialSetAttribute","command","_COMMAND_ATTRIBUTES$c","connectedCallback","_this3","getRootNode","once","attributeChangedCallback","oldValue","isConnected","isNativeElement","refValue","_assertClassBrand","_updateStateFromAttribute","returnStateObject","thisInstance","_thisInstance$state","globalState","_thisInstance$state2","_globalState","findElement","refName","root","SPROUT_CONFIG","useShadow","shadowRoot","querySelector","attributeValue","keys","toLowerCase","debugGetProxyHandler","scopeName","originalObject","target","property","receiver","Reflect","debug","Proxy","debugApplyProxyHandler","funcName","construct","newTarget","thisArg","argumentsList","StateManager","StatefulArrayHandler","StatefulArray","_Array","initialArray","parentStateObject","arrayStateProp","noConvertToStateItems","stateManagerClass","rawArray","statefulArray","item","index","_possibleConstructorReturn","splice","_get2","$$operation","result","_get","_getPrototypeOf","shift","_get3","_len2","_key2","unshift","_get4","_len3","_key3","sort","_get5","_len4","_key4","reverse","_get6","_len5","_key5","fill","_get7","_len6","_key6","copyWithin","_get8","_len7","_key7","slice","_get9","_len8","_key8","toArray","Symbol","species","_wrapNativeSuper","parentStateManager","targetArray","setResult","setDirtyProp","Number","isNaN","doStateChangeHandle","StateObjectValueHandler","rootStateObj","objPropertyName","targetObj","descriptor","_value$","definePropertyResult","StateHandler","stateObj","targetState","_targetState","_binding","origTargetState","dependencies","_gettingDependenciesFor","_localStateManager","_value$2","deps","depProp","dep","addGlobalStateDependency","originalProperty","_handleStateChangeRAF_ID","parentStateProp","isGlobal","prop","dirtyProps","handleStateChanges","stateProps","addConditionallyRenderingElements","_element$host","originalParentElement","stateNode","isBooleanStateProp","setAndBindStateProperty","isNegationProp","getOwnPropertyDescriptor","isValueProp","negateStateProp","privateState","currentVal","_regeneratorRuntime","t","r","o","a","iterator","c","asyncIterator","u","toStringTag","define","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","h","l","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","displayName","isGeneratorFunction","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","pop","prev","charAt","stop","rval","handle","complete","finish","_catch","delegateYield","_defineProperties","_toPropertyKey","_toPrimitive","toPrimitive","_isNativeReflectConstruct","_assertThisInitialized","ReferenceError","Boolean","valueOf","_setPrototypeOf","asyncGeneratorStep","_asyncToGenerator","_next","_throw","appName","defineCustomElementFromTemplate","_x","_x2","_x3","_defineCustomElementFromTemplate","_callee","template","globalStylesheet","templateContent","style","runtime","_callee$","_context","importNode","content","customElements","_appScope$ReactiveCus","_class","ReactiveCustomElement","build","globalStyle","CSSStyleSheet","replaceSync","querySelectorAll","globalRuntimeFunction","typedValue","isSpecialAttribute","attrNode","resolveConditional","conditional","conditionStateValue","typeOf","conditionFn","Function","getConditionalElementClass","ReactiveElementClass","_conditionStateProp","_renderMap","ConditionalElement","_ReactiveElementClass","isFirstRender","elementsToRender","conditionAttributeValue","isConditionStatic","renderMap","conditionalChild","_if","expectedValue","getReactiveCustomElementClass","ReactiveHTMLElement","_onMount","_beforeRender","_templateContent","_stylesheet","_globalStylesheet","_boundEventNames","_eventHandler","_ReactiveCustomElement_brand","_ReactiveHTMLElement","runtimeScript","isFrameworkElement","dynamicRuntimeFn","_setRuntime","stylesheet","cloneNode","initState","assign","_unbindEvents","_bindEvents","_renderTemplate","_setActiveStateFromInitialState","CustomEvent","_this4","onMount","beforeRender","attachShadow","mode","adoptedStyleSheets","fragment","DocumentFragment","_this5","eventName","_this6","_classPrivateFieldGet2","eventRefNames","clickActions","otherActions","eventNames","event","_this7","start","performance","now","elementsPath","composedPath","find","clickEvent","_this$events$ref$even","_i","_eventNames2","SproutBuild","allowAppScopeAccess","currentScript","SproutInitApp","_window","config","sproutApps","seal","setGlobalState","globalStateVarName","HTML_REACTIVE_ELEMENT_CLASSES","elementDefinition","itemDefinition","ReactiveHeadingClass","HTMLHeadingElement","hTag","_ReactiveHeadingClass","ReactiveConditionalElementClass","ConditionalElementClass"],"sourceRoot":""}
{"version":3,"file":"sprout-core.js","mappings":"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","sources":["webpack://jssprout/./src/core/consts.js","webpack://jssprout/./src/core/DOM_utils.js","webpack://jssprout/./src/core/paint_utils.js","webpack://jssprout/./src/core/node_actions.js","webpack://jssprout/./src/core/prop_utils.js","webpack://jssprout/./src/core/state_utils.js","webpack://jssprout/./src/core/commands.js","webpack://jssprout/./src/core/ReactiveElement.js","webpack://jssprout/./src/core/debug_utils.js","webpack://jssprout/./src/core/StatefulArray.js","webpack://jssprout/./src/core/proxy_handlers.js","webpack://jssprout/./src/core/StateManager.js","webpack://jssprout/./src/build/index.js","webpack://jssprout/./src/core/attr_utils.js","webpack://jssprout/./src/core/ConditionalElement.js","webpack://jssprout/./src/core/ReactiveCustomElement.js","webpack://jssprout/./src/core/index.js"],"sourcesContent":["import { extendElementClassWithReactiveElementClass } from \"./ReactiveElement.js\";\n\nexport const BOOLEAN_ATTRIBUTES = [\n    'hidden',\n    'checked'\n]\n\nexport const SUPPORTED_ATTRIBUTES_FOR_BINDING = [\n    'hidden',\n    'value',\n    'checked'\n]\n\n// Some elements like inputs has certain properties that can be used in _bind command, like: 'value', or 'checked\nexport const SUPPORTED_PROPERTIES_FOR_BINDING = [\n    'value',\n    'checked'\n]\nexport const SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING = [\n    null, // If no type is specified - defaults to 'text' - \n    // getAttribute('type') returns null\n    'text', \n    'color', \n    'date', \n    'datetime-local', \n    'email', \n    'month', \n    'number', \n    'password',\n    'range',\n    'search',\n    'tel',\n    'time',\n    'url',\n    'week'\n];\n\n// These are \"built-in\" state props that are automatically added to state objects,\n// and should not be included in the normal state change/check flow\nexport const BUILT_IN_STATE_PROPS = [\n    '_global',\n    '_gettingDependenciesFor',\n    '_localStateManager',\n    '_stateManager',\n    '_binding',\n    '_populate',\n    '_isActive'\n]\n\nexport const GLOBAL_STATE_VAR_NAME = \"SproutGlobalState\";\nexport const GLOBAL_STATE_FUNCTION_NAME = \"getGlobalState\";\n\nexport const ERROR_MESSAGES = {\n    NO_DEPENDENCIES_ARRAY_IN_SET_HOOK(stateProp) {\n        return `State set hook, must include a dependencies array! None was found for ${stateProp}`;\n    }\n}\n\nexport const HTML_ELEMENTS_CLASSES_MAP = [\n    { class: HTMLAnchorElement, element: \"a\" },\n    { class: HTMLAreaElement, element: \"area\" },\n    { class: HTMLAudioElement, element: \"audio\" },\n    // { class: HTMLBaseElement, element: \"base\" },\n    { class: HTMLBodyElement, element: \"body\" },\n    { class: HTMLBRElement, element: \"br\" },\n    { class: HTMLButtonElement, element: \"button\" },\n    { class: HTMLCanvasElement, element: \"canvas\" },\n    { class: HTMLDataElement, element: \"data\" },\n    { class: HTMLDataListElement, element: \"datalist\" },\n    { class: HTMLDetailsElement, element: \"details\" },\n    { class: HTMLDialogElement, element: \"dialog\" },\n    { class: HTMLDivElement, element: \"div\" },\n    { class: HTMLDListElement, element: \"dl\" },\n    { class: HTMLEmbedElement, element: \"embed\" },\n    { class: HTMLFieldSetElement, element: \"fieldset\" },\n    { class: HTMLFormElement, element: \"form\" },\n    /*\n    { class: HTMLHeadingElement, element: \"h1\" },\n    { class: HTMLHeadingElement, element: \"h2\" },\n    { class: HTMLHeadingElement, element: \"h3\" },\n    { class: HTMLHeadingElement, element: \"h4\" },\n    { class: HTMLHeadingElement, element: \"h5\" },\n    { class: HTMLHeadingElement, element: \"h6\" },\n     */\n    { class: HTMLHRElement, element: \"hr\" },\n    { class: HTMLHtmlElement, element: \"html\" },\n    { class: HTMLIFrameElement, element: \"iframe\" },\n    { class: HTMLImageElement, element: \"img\" },\n    { class: HTMLInputElement, element: \"input\" },\n    { class: HTMLLabelElement, element: \"label\" },\n    { class: HTMLLegendElement, element: \"legend\" },\n    { class: HTMLLIElement, element: \"li\" },\n    { class: HTMLLinkElement, element: \"link\" },\n    { class: HTMLMapElement, element: \"map\" },\n    { class: HTMLMetaElement, element: \"meta\" },\n    { class: HTMLMeterElement, element: \"meter\" },\n    { class: HTMLObjectElement, element: \"object\" },\n    { class: HTMLOListElement, element: \"ol\" },\n    { class: HTMLOptGroupElement, element: \"optgroup\" },\n    { class: HTMLOptionElement, element: \"option\" },\n    // { class: HTMLOutputElement, element: \"output\" },\n    { class: HTMLParagraphElement, element: \"p\" },\n    // { class: HTMLParamElement, element: \"param\" },\n    { class: HTMLPictureElement, element: \"picture\" },\n    { class: HTMLPreElement, element: \"pre\" },\n    { class: HTMLProgressElement, element: \"progress\" },\n    { class: HTMLQuoteElement, element: \"blockquote\" },\n    { class: HTMLQuoteElement, element: \"q\" },\n    // { class: HTMLScriptElement, element: \"script\" },\n    { class: HTMLSelectElement, element: \"select\" },\n    { class: HTMLSourceElement, element: \"source\" },\n    { class: HTMLSpanElement, element: \"span\" },\n    // { class: HTMLStyleElement, element: \"style\" },\n    { class: HTMLTableElement, element: \"table\" },\n    { class: HTMLTableCellElement, element: \"td\" },\n    { class: HTMLTableCellElement, element: \"th\" },\n    { class: HTMLTableRowElement, element: \"tr\" },\n    { class: HTMLTableSectionElement, element: \"thead\" },\n    { class: HTMLTableSectionElement, element: \"tbody\" },\n    { class: HTMLTableSectionElement, element: \"tfoot\" },\n    { class: HTMLTextAreaElement, element: \"textarea\" },\n    { class: HTMLTimeElement, element: \"time\" },\n    { class: HTMLTitleElement, element: \"title\" },\n    { class: HTMLTrackElement, element: \"track\" },\n    { class: HTMLUListElement, element: \"ul\" },\n    { class: HTMLVideoElement, element: \"video\" },\n    { class: HTMLSlotElement, element: \"slot\" },\n    // We can't use HTMLElement more than once, so we will use a class extending it\n    // { class: class extends HTMLElement{}, element: \"code\" }\n];\n\n// For development purposes only,\n// turn this on to see exactly which functions in each entity are called and when.\nexport const DEBUG_MODE = false;\n\nexport const DEFAULT_TEMPLATE_DOM = document.createElement('div');\n\nexport const NODES_STATE = {\n    // This is a global object that maps abstract \"DOM actions\" to nodes (the nodes can be elements, text nodes, attribute nodes)\n    // It is resolved to actual DOM API functions on RequestAnimationFrame calls, and then is RESET.\n    // it is a \"singleton\" object\n    nodeActionsMap: new Map(),\n    // Maps events binding functions to (custom) elements\n    eventBindingFunctions: new Map(),\n    conditionalRenders: new Map(),\n    // Save requestAnimationFrame Id, to cancel if the rAF wasn't called yet on the same frame, so DOM operations will be batched to a single frame,\n    // preventing several rAFs running for the same frame\n    paintRafId: null,\n    // Similar as above but for event bindings\n    eventBindRafId: null,\n    // Same for conditional renders\n    conditionalRenderRafId: null,\n    activateRafId: null,\n    elementActivateFunctions: new Map()\n}\n\nexport const CONDITIONAL_OPERATORS = [\n    '=',\n    '==',\n    '!=',\n    '!==',\n    '<',\n    '<=',\n    '>',\n    '>='\n];\n\nexport const MAX_OPERATIONS_PER_ANIMATION_FRAME = 100;\n","export function isElementAList(element) {\n  return element.tagName === \"OL\" || element.tagName === \"UL\";\n}\n\n","import { doUpdateDOM } from \"./node_actions\";\nimport { NODES_STATE, MAX_OPERATIONS_PER_ANIMATION_FRAME } from \"./consts\";\n\nlet { \n    paintRafId,\n    eventBindingFunctions, \n    eventBindRafId, \n    conditionalRenderRafId,\n    conditionalRenders,\n    nodeActionsMap,\n    activateRafId,\n    elementActivateFunctions\n} = NODES_STATE; \n\nexport function queueBindEvents(element, bindFunction) {\n    eventBindingFunctions.set(element, bindFunction);\n    if (eventBindingFunctions.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (eventBindRafId) cancelAnimationFrame(eventBindRafId);\n        eventBindRafId = null;\n    }\n    if (!eventBindRafId) {\n        eventBindRafId = requestAnimationFrame(()=> {\n            eventBindRafId = null;\n            eventBindingFunctions.forEach(bindFn=> bindFn());\n            eventBindingFunctions.clear();\n        });\n    }\n}\n\nexport function queueActivate(element, activateFn) {\n    elementActivateFunctions.set(element, activateFn);\n    if (elementActivateFunctions.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (activateRafId) cancelAnimationFrame(activateRafId);\n        activateRafId = null;\n    }\n    if (!activateRafId) {\n        activateRafId = requestAnimationFrame(()=> {\n            activateRafId = null;\n            elementActivateFunctions.forEach(activateFn=> activateFn());\n            elementActivateFunctions.clear();\n        });\n    }\n}\n\nexport function queuePaint() {\n    if (nodeActionsMap.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (paintRafId) cancelAnimationFrame(paintRafId);\n        paintRafId = null;\n    }\n    if (!paintRafId) {\n        paintRafId = requestAnimationFrame(()=> {\n            paintRafId = null;\n            doUpdateDOM();\n        });\n    }\n}\nexport function queueConditionalRender(element, renderFunction) {\n    conditionalRenders.set(element, renderFunction);\n    if (conditionalRenders.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (conditionalRenderRafId) cancelAnimationFrame(conditionalRenderRafId);\n        conditionalRenderRafId = null;\n    }\n    if (!conditionalRenderRafId) {\n        conditionalRenderRafId = requestAnimationFrame(()=> {\n            conditionalRenderRafId = null;\n            conditionalRenders.forEach(renderFn=> renderFn());\n            conditionalRenders.clear();\n        });\n    }\n}","import { stateToElement, resolveStateMapToDocumentFragment } from \"./state_utils.js\";\nimport { isElementAList } from \"./DOM_utils.js\";\nimport { queueConditionalRender, queuePaint } from \"./paint_utils.js\";\nimport { NODES_STATE } from \"./consts.js\";\n\n// Also, if doesn't exist - create it\nfunction getNodeActionsForNode(node) {\n    const { nodeActionsMap } = NODES_STATE;\n    if (!nodeActionsMap.has(node)) nodeActionsMap.set(node, getNewNodeActionsObject());\n    const nodeActions = nodeActionsMap.get(node);\n    return nodeActions;\n}\n\nexport function setStateNodeAction(node, nodeActionsObject, value) {\n    if (node.nodeType === Node.ATTRIBUTE_NODE)\n        nodeActionsObject[\"setAttribute\"] = value; \n    else if (node.nodeType === Node.TEXT_NODE)\n        nodeActionsObject[\"textContent\"] = value;\n}\n\nexport function addRemoveAction(nodeActions, elementToRemove, stateIdentifier) {\n    if (!nodeActions.remove.has(stateIdentifier)) {\n        nodeActions.remove.set(stateIdentifier, new Set())\n    }\n    nodeActions.remove.get(stateIdentifier).add(elementToRemove);\n}\nexport function addReplaceAction(nodeActions, oldElement, newElement) {\n    nodeActions.replace.set(oldElement, newElement);\n}\nexport function addSwitchAction(nodeActions, newElement) {\n    nodeActions.switch = newElement;\n}\n// stateIdentifier can be a State object (for state maps),\n// or a State property (for conditionally rendered elements)\nexport function addAppendAction(nodeActions, nodeToAppend, stateIdentifier) {\n    if (!nodeActions.append.has(stateIdentifier)) {\n        nodeActions.append.set(stateIdentifier, new Set());\n    }\n    nodeActions.append.get(stateIdentifier).add(nodeToAppend);\n}\nexport function addStateAttributeToNode(attributeNode, value) {\n    const nodeActions = getNodeActionsForNode(attributeNode);\n    setStateNodeAction(attributeNode, nodeActions, value);\n}\nexport function addAppendActionToNode(node, nodeToAppend, stateIdentifier) {\n    const nodeActions = getNodeActionsForNode(node);\n    addAppendAction(nodeActions, nodeToAppend, stateIdentifier);\n}\n\n// This is an object used to represent pending node actions,\n// that are batched and executed in reflows (requestAnimationFrame)\nexport function getNewNodeActionsObject() {\n    return ({\n        // Nodes to append to the end of node's children, \n        // keys are state objects, or state props (string) \n        // to prevent duplicate pending\n        append: new Map(),\n        // Replace each key node on Map, with value node\n        replace: new Map(),\n        // Insert value node after key node in parent node's children\n        after: new Map(),\n        // Remove these nodes from the DOM\n        // keys are state objects, or state props (string) \n        // to prevent duplicate pending\n        remove: new Map(),\n        switch: null,\n        get hasPendingActions() {\n            return (\n                this.switch !== null ||\n                this.append.size || \n                this.replace.size || \n                this.after.size || \n                this.remove.size\n            );\n        }\n    });\n}\n\n\n// This *updates*/*\"fills\"* the nodeActionsMap!\nexport function generateStateNodeActions(stateManager, stateProp) {\n    const { nodeActionsMap } = NODES_STATE;\n    const value = stateManager.state[stateProp];\n    const stateNodes = stateManager.stateNodes[stateProp];\n    // This is a map, where keys are \"parent elements\" containing \n    // custom element instanced created from a state array (\"state map\").\n    // The values are the custom element name. \n    // The actual array of state objects is in state[stateProp]\n    const stateMapElements = stateManager.stateArrayMaps[stateProp];\n    const conditionallyRenderingElements = stateManager.conditionallyRenderingElements[stateProp];\n\n    // Note, since the value change is handled by a custom setter - that setter checks if the set value is the same - \n    // if it is - it won't call handleStateChange, and it won't reach here.\n    if (stateNodes) {\n        stateNodes.forEach(node=> {\n            if (!nodeActionsMap.has(node)) nodeActionsMap.set(node, {});\n            const nodeActionsObject = nodeActionsMap.get(node);\n            setStateNodeAction(node, nodeActionsObject, value);\n        });\n    }\n\n    if (stateMapElements) {\n        // An array of state objects\n        const stateMapArray = value;\n        stateMapElements.forEach((customElementName, parentElement)=> {\n            //const newMappedElement = parentElement.cloneNode(true);\n            const stateMapNodeActions = getNewNodeActionsObject();\n            let currentStateMapArrayIndex = -1;\n            const isParentAList = isElementAList(parentElement);\n            // Compares state map arrays to actual DOM elements (by comparing state objects)\n            if (parentElement.children.length) {\n                Array.prototype.forEach.call(parentElement.children, (childElement, currentIndex)=> {\n                    let customElement = childElement;\n                    // State map elements inside Lists are wrapped with a <li>\n                    if (isParentAList) customElement = childElement.firstElementChild;\n                    let stateItem = stateMapArray[currentIndex]; \n                    if (stateItem?.hasOwnProperty('state')) stateItem = stateItem.state;\n                    if (!stateItem) {\n                        addRemoveAction(stateMapNodeActions, childElement);\n                        // newMappedElement.removeChild(newMappedElement.children[currentIndex]);\n                    }\n                    else if (customElement.state !== stateItem) {\n                        const replaceWithChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                        // newMappedElement.replaceChild(replaceWithChild, newMappedElement.children[currentIndex]);\n                        addReplaceAction(stateMapNodeActions, childElement, replaceWithChild);\n                    }\n                    currentStateMapArrayIndex = currentIndex;\n                });\n            }\n\n            // If there are more state objects in the stateMapArray - append equivalent child elements \n            currentStateMapArrayIndex++;\n            for (let i = currentStateMapArrayIndex, len=stateMapArray.length; i<len; i++) {\n                const stateItem = stateMapArray[i];\n                // New state item === new child element to append\n                if (stateItem) {\n                    const newChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                    // newMappedElement.appendChild(newChild);\n                    addAppendAction(stateMapNodeActions, newChild, stateItem);\n                }\n            }\n\n            // addSwitchAction(stateMapNodeActions, newMappedElement);\n            if (stateMapNodeActions.hasPendingActions) {\n                nodeActionsMap.set(parentElement, stateMapNodeActions);\n            }\n        });\n    }\n\n    if (conditionallyRenderingElements) {\n        // Should be slot element\n        conditionallyRenderingElements.forEach(element=> {\n            queueConditionalRender(this, ()=> element.render());\n        });\n    }\n\n    if (nodeActionsMap.size) queuePaint();\n}\n\nfunction resolveNodeActionsMapToDOMActions() {\n    const batchActions = [];\n    const attributeActions = [];\n    const elementActions = [];\n\n    const { nodeActionsMap } = NODES_STATE;\n\n    nodeActionsMap.forEach((nodeActions, node)=> {\n        // Attribute change\n        if (nodeActions.hasOwnProperty(\"setAttribute\")) {\n            const value = nodeActions.setAttribute;\n            if (typeof value === \"boolean\") {\n                if (!node.hasOwnProperty(\"originalOwnerElement\")) {\n                    console.error(\"originalOwnerElement not found on boolean attribute node! Should never happen!\");\n                }\n                if (value === false) {\n                    // Remove attribute if it exists, otherwise - do nothing\n                    if (node.originalOwnerElement.hasAttribute(node.name)) {\n                        attributeActions.push(()=> {\n                            node.originalOwnerElement.removeAttributeNode(node);\n                        });\n                    }\n                }\n                // state changed to true\n                else {\n                    if (!node.originalOwnerElement.hasAttribute(node.name)) {\n                        attributeActions.push(()=> {\n                            node.originalOwnerElement.setAttributeNode(node);\n                        });\n                    }\n                }\n            }\n            else {\n                if (typeof value === \"string\" && node.nodeValue !== value) {\n                    attributeActions.push (()=> node.nodeValue = value);\n                }\n            }\n        }\n\n        // Text change\n        else if (nodeActions.hasOwnProperty(\"textContent\")) {\n            const value = String(nodeActions.textContent);\n            if (node.nodeValue === value) return;\n            elementActions.push (()=> node.nodeValue = value);\n        }\n\n        // DOM change\n        else if (nodeActions.switch) {\n            elementActions.push(()=> node.replaceWith(nodeActions.switch));\n        }\n        else {\n            nodeActions.replace.forEach((newNode, oldNode)=> {\n                elementActions.push(()=> \n                    //oldNode.replaceWith(newNode));\n                    node.replaceChild(newNode, oldNode));\n            });\n            for (const removes of nodeActions.remove.values()) {\n                for (const nodeToRemove of removes) {\n                    if (nodeToRemove.parentNode && nodeToRemove.parentNode === node) {\n                        elementActions.push(()=> node.removeChild(nodeToRemove));\n                    }\n                }\n            }\n            for (const appends of nodeActions.append.values()) {\n                for (const newChildElement of appends) {\n                    elementActions.push(()=> node.appendChild(newChildElement));\n                }\n            }\n        }\n    });\n\n    return [...attributeActions, ...elementActions];\n}\n\n// For debugging purposes\nexport function logNodeActions() {\n    const { nodeActionsMap } = NODES_STATE;\n    [...nodeActionsMap.entries()]\n    .map(([node, actions])=> {\n\n        switch (node.nodeType) {\n            case Node.ELEMENT_NODE: {\n                console.log (\"Actions for\", node);\n                const appendElements = [...actions.append.values()];\n                if (appendElements.length) {\n                    console.log(\"Append\", appendElements);\n                }\n                const replaceElements = [...actions.replace.entries()];\n                if (replaceElements.length) {\n                    console.log(\"Append\", replaceElements);\n                }\n                if (actions.remove.size) {\n                    console.log (\"Remove\", actions.remove);\n                }\n                break;\n            }\n\n            case Node.ATTRIBUTE_NODE: {\n                console.log (\"Set Attribute\", node.nodeName, \"on\", node.originalOwnerElement, \"to\", actions.setAttribute);\n                break;\n            }\n\n            case Node.TEXT_NODE: {\n                console.log (\"Set text content for\", node.parentNode, \"to\", actions.textContent);\n                break;\n            }\n        }\n    });\n}\n// This function runs on requestAnimationFrame to run pending Node actions\nexport function doUpdateDOM() {\n    let { nodeActionsMap } = NODES_STATE;\n    if (nodeActionsMap.size) {\n        // logNodeActions();\n        const DOMActions = resolveNodeActionsMapToDOMActions(nodeActionsMap);\n        DOMActions.forEach(DOMAction=> DOMAction());\n        NODES_STATE.nodeActionsMap = new Map();\n    }\n}\n\n","\n// Sets an internal read-only \"hidden\" property on an object:\nexport function setHiddenProperty(obj, propName, propValue, enumerable=false) {\n    Object.defineProperty(obj, propName, {\n        value: propValue,\n        configurable: false,\n        writable: false,\n        enumerable,\n    });\n}","import { BOOLEAN_ATTRIBUTES, BUILT_IN_STATE_PROPS } from \"./consts.js\";\nimport { generateStateNodeActions } from './node_actions.js';\nimport { setHiddenProperty } from \"./prop_utils.js\";\n\n\nif (typeof HTMLElement === 'undefined') {\n    console.warn (\"HTMLElement was not found! This probably means you are running in a non-browser environment, and can lead to unexpected results\");\n}\nelse {\n    // Make sure \"setAttribute\" is not overridable\n    Object.defineProperty(globalThis, \"elementSetAttribute\", {\n        value: HTMLElement.prototype.setAttribute,\n        writable: false,\n        configurable: false\n    });\n}\n\n\nexport const setAttribute = function(attrName, attrValue) {\n    if (BOOLEAN_ATTRIBUTES.includes(attrName)) {\n        if (attrValue === \"false\") {\n            this.removeAttribute(attrName);\n        }\n        else {\n            elementSetAttribute.call(this, attrName, \"\");\n        }\n    }\n    else {\n        elementSetAttribute.call(this, attrName, attrValue);\n    }\n}\n\n// This creates the binding to state props on \"State attributes\".\n// This function is called when a custom element instance ic connected to the DOM\nexport const setStateAttribute = function(attrName, stateProp) {\n    let equalityValue = null;\n    if (stateProp.indexOf(':') !== -1) {\n        if (stateProp.indexOf('is_') === 0) {\n            const colonIndex = stateProp.indexOf(':');\n            if (colonIndex === -1) {\n                throw Error(\"When using conditional equality state attribute, you must include a colon character followed by an equality value!\");\n            }\n            equalityValue = stateProp.substring(colonIndex+1);\n            stateProp = stateProp.substring(3, colonIndex);\n        }\n    }\n    let [stateVal, theState] = this.getState(stateProp, true); \n\n    if (stateVal === undefined) {\n        console.warn(`State value for ${stateProp} is undefined. State values should never be undefined.`)\n        return;\n    }\n    if (!theState) {\n        console.warn (\"No State object with state prop: \" + stateProp);\n        return;\n    }\n    if (equalityValue) {\n        const conditionalStateProp = \"is_\"+stateProp+equalityValue;\n        const originalStateProp = stateProp;\n        Object.defineProperty(theState, conditionalStateProp, {\n            get() {\n                return this[originalStateProp] === equalityValue\n            },\n            enumerable: false\n        });\n        theState._stateManager.addStateDependency(stateProp, conditionalStateProp);\n        stateVal = theState[conditionalStateProp];\n        stateProp = conditionalStateProp;\n    }\n\n    const valueToSet = stateVal;\n    this.removeAttribute(attrName);\n    // Create an \"Attribute Node\"\n    const stateAttrNode = document.createAttribute(attrName);\n    stateAttrNode.nodeValue = valueToSet;\n    // Saves a readonly boolean that marks this as a \"state attribute node\"\n    setHiddenProperty(stateAttrNode, \"isStateAttribute\", true);\n    // Save ownerElement to a different property,\n    // so if the attribute is removed (in case of a boolean attribute),\n    // and later re-attached, we would know which element to add it back to.\n    setHiddenProperty(stateAttrNode, \"originalOwnerElement\", this);\n/*\n    Object.defineProperty(stateAttrNode, \"stateValue\", {\n        value: valueToSet,\n        writeable: true,\n        configurable: false,\n        enumerable: true\n    });\n*/\n    if (typeof valueToSet === \"boolean\") {\n        // A boolean attribute value should ALWAYS be an empty string,\n        // the value itself never changes, it is removed fron the element if false, \n        // and added if true\n        stateAttrNode.nodeValue = \"\";\n    }\n\n    // Adds the attribute to the element\n    if (valueToSet !== false) {\n        this.setAttributeNode(stateAttrNode);\n    }\n\n    theState._stateManager.addStateNode(stateProp, stateAttrNode, typeof valueToSet === \"boolean\");\n\n}\nexport const setStateText = function(stateProp) {\n    const [stateVal, theState] = this.getState(stateProp, true); \n\n    if (stateVal === undefined || stateVal === null) {\n        console.warn(`State value for ${stateProp} is undefined or null for _text command`);\n        return;\n    }\n    if (!theState) {\n        console.warn (\"No State object with state prop: \" + stateProp);\n        return;\n    }\n    const valueToSet = stateVal;\n    const textNode = document.createTextNode(valueToSet);\n    setHiddenProperty(textNode, \"isStateAttribute\", true);\n    this.appendChild(textNode);\n    theState._stateManager.addStateNode(stateProp, textNode);\n}\n\n// Convert a stateObject to a custom element, used in State Map Arrays\nexport function stateToElement(stateObject, elemName, wrapInElement) {\n    const customElementInstance = document.createElement(elemName);\n    customElementInstance.setInitialState(stateObject);\n    let returnElement;\n    if (wrapInElement) {\n        returnElement = document.createElement(wrapInElement);\n        returnElement.appendChild(customElementInstance);\n    }\n    else {\n        returnElement = customElementInstance;\n    }\n    return returnElement;\n}\n\nexport function mapStateArrayToElements(stateItems, elemName, wrapInElement) {\n    // Each state item should be a stateManager\n    return stateItems.map(stateItem => {\n        if (stateItem.hasOwnProperty('state')) stateItem = stateItem.state;\n        if (typeof stateItem !== 'object') {\n            console.warn(\"item in State array for _map is not an object: \", stateItem);\n            return {};\n        }\n        return stateToElement(stateItem, elemName, wrapInElement);\n    });\n}\n\n// Main function that handles all state changes in a state object\nexport function handleStateChange(stateManager, stateProp) {\n    if (BUILT_IN_STATE_PROPS.includes(stateProp)) return;\n    // Populate the next Node Actions to perform\n    generateStateNodeActions(stateManager, stateProp);\n\n    const state = stateManager.state;\n    // Run on[stateProp]Change hooks\n    if (state.hasOwnProperty(`on_${stateProp}Change`)) {\n        if (typeof state[`on_${stateProp}Change`] === \"function\")\n            state[`on_${stateProp}Change`].call(state);\n    }\n\n    const stateDependencies = stateManager.stateDependencies[stateProp];\n    if (stateDependencies) {\n        stateDependencies.forEach(depStateProp=> {\n            // A \"Setter\" hook\n            if (depStateProp.indexOf('set_') === 0) {\n                const setStateProp = depStateProp.substring(4);\n                const func = state[depStateProp][0];\n                if (func && typeof func === \"function\") {\n                    state[setStateProp] = func.call(state);\n                    return;\n                }\n            }\n            generateStateNodeActions(stateManager, depStateProp);\n            if (state.hasOwnProperty(`on${depStateProp}Change`)) {\n                if (typeof state[`on${depStateProp}Change`] === \"function\")\n                    state[`on${depStateProp}Change`].call(state);\n            }\n        });\n    }\n\n    // Global state\n    if (!state._global) {\n        const globalStateDependencies = stateManager.globalStateDependencies[stateProp];\n        globalStateDependencies?.forEach((depStateProps, depStateManager)=> {\n            const depState = depStateManager.state;\n            depStateProps.forEach(depStateProp=> {\n                // A \"Setter\" hook\n                if (depStateProp.indexOf('set_') === 0) {\n                    const setStateProp = depStateProp.substring(4);\n                    const func = state[depStateProp][0];\n                    if (func && typeof func === \"function\") {\n                        depState[setStateProp] = func.call(depState);\n                        return;\n                    }\n                }\n                generateStateNodeActions(depStateManager, depStateProp);\n                if (state.hasOwnProperty(`on${depStateProp}Change`)) {\n                    if (typeof state[`on${depStateProp}Change`] === \"function\")\n                        depState[`on${depStateProp}Change`].call(depState);\n                }\n            });\n        });\n    }\n}\n\nexport function populateStateFromInitialState(state, initialState) {\n    state._populate = true;\n    const descriptors = Object.getOwnPropertyDescriptors(initialState);\n    let descrp;\n    for (let key in descriptors) {\n        if (BUILT_IN_STATE_PROPS.includes(key)) {\n            delete descriptors[key];\n            continue;\n        }\n        descrp = descriptors[key];\n        if (descrp.hasOwnProperty('get') && typeof descrp.get === \"function\") {\n            descrp.get.bind(state);\n        }\n        if (descrp.hasOwnProperty('value')) {\n            const value = descrp.value;\n            if (typeof value === \"function\") {\n                descrp.value.bind(state);\n            }\n            else if (Array.isArray(value) && key.indexOf(\"set_\") === 0) {\n                const func = value?.[0];\n                if (func && typeof func === \"function\") {\n                    func.bind(state);\n                }\n            }\n        }\n    }\n\n    // If state set hooks should run on initialization - \n    // they should run by the proxy handler for \"defineProperty\"\n    Object.defineProperties(state, descriptors);\n    delete state._populate;\n}\n\n/* Experimental rendering of state maps using DocumentFragment. Not stable */\n/* \nexport function resolveStateMapToDocumentFragment({ customElementName, parentElement}, stateMapArray) {\n    const resolvedDocumentFragment = new DocumentFragment();\n    // const stateMapNodeActions = getNewNodeActionsObject();\n    let currentStateMapArrayIndex = -1;\n    const isParentAList = isElementAList(parentElement);\n    // Compares state map arrays to actual DOM elements (by comparing state objects)\n    if (parentElement.children.length) {\n        Array.prototype.forEach.call(parentElement.children, (childElement, currentIndex)=> {\n            let customElementChild = childElement;\n            // State map elements inside Lists are wrapped with a <li>\n            if (isParentAList) customElementChild = childElement.firstElementChild;\n            let stateItem = stateMapArray[currentIndex]; \n            if (stateItem?.hasOwnProperty('state')) stateItem = stateItem.state;\n            if (stateItem && customElementChild.state !== stateItem) {\n                const newCustomElementChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                resolvedDocumentFragment.appendChild(newCustomElementChild);\n            }\n            else {\n                resolvedDocumentFragment.append(childElement)\n            }\n            currentStateMapArrayIndex = currentIndex;\n        });\n    }\n\n    // If there are more state objects in the stateMapArray - append equivalent child elements \n    currentStateMapArrayIndex++;\n    for (let i = currentStateMapArrayIndex, len=stateMapArray.length; i<len; i++) {\n        const stateItem = stateMapArray[i];\n        // New state item === new child element to append\n        if (stateItem) {\n            // Make sure we don't already have a pending append action for the same state object\n            const newChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n            resolvedDocumentFragment.appendChild(newChild);\n        }\n    }\n\n    return resolvedDocumentFragment;\n    if (resolvedDocumentFragment.children.length) {\n        parentElement.innerHTML = '';\n        //addReplaceAction(stateMapNodeActions, childElement, replaceWithChild);\n        //nodeActionsMap.set(parentElement, stateMapNodeActions);\n    }    \n}\n*/\n\n","import { mapStateArrayToElements } from \"./state_utils.js\";\nimport { SUPPORTED_ATTRIBUTES_FOR_BINDING, SUPPORTED_PROPERTIES_FOR_BINDING, SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING } from \"./consts.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { isElementAList } from \"./DOM_utils.js\";\nimport { attributeValueToTypedValue } from \"./attr_utils.js\";\n\nfunction mapStateToElements(stateItemsPropertyName, customElementName, parentElement) {\n    const [stateItemsArray, theState] = parentElement.getState(stateItemsPropertyName, true);\n    if (!stateItemsArray || !Array.isArray(stateItemsArray)) {\n        console.warn (\"state value for _map is not an array, in state property: \" + stateItemsPropertyName);\n        return null;\n    }\n    const wrapInElement = isElementAList(parentElement) ? \"li\" : undefined;\n    const elements = mapStateArrayToElements(stateItemsArray, customElementName, wrapInElement);\n    parentElement.innerHTML = \"\";\n    if (elements.length) {\n        parentElement.append(...elements);\n    }\n    return theState;\n}\n\n// Functions that run and handles \"Command\" attributes. Note, they should always be called\n// with the \"this\" context set to the custom element the command is defined on\nexport const COMMANDS = {\n    map: function(commandValue) {\n        // The command value (\"argument\") is \"<stateProp>:<custom element name>\"\n        const [stateItemsPropertyName, customElementName] = commandValue.split(':');\n        const thiselement = this;\n        const theState = mapStateToElements(stateItemsPropertyName, customElementName, thiselement);\n        if (!theState) {\n            console.warn (`Mapping ${stateItemsPropertyName} to ${customElementName} failed!`);\n            return;\n        }\n        theState._stateManager.addStateMap(stateItemsPropertyName, customElementName, thiselement);\n    },\n    text: function(commandValue) {\n        const stateProp = commandValue;\n        this.initialSetText(stateProp);\n        // DO NOT CALL .normalize()! It might change the Text Nodes!\n    },\n    bind: function(commandValue) {\n        const [attributeName, statePropName] = commandValue.split(':');\n        if (!attributeName || !statePropName) {\n            console.warn (\"Incorrect usage of _bind command! Please pass <attribute-name>:<state-prop-name>\");\n            return;\n        }\n        if (!attributeName in SUPPORTED_ATTRIBUTES_FOR_BINDING) {\n            console.warn (`Attribute ${attributeName} is not supported for _bind command!`);\n            return;\n        }\n        this.bindAttributeToState(attributeName, statePropName);\n\n        if (SUPPORTED_PROPERTIES_FOR_BINDING.includes(attributeName)) {\n            if (attributeName === \"value\" && this.tagName === \"INPUT\" && SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING.includes(this.getAttribute('type'))) {\n                this.addEventListener(\"input\", \n                    ()=> this.updateStateFromProperty(\"value\")\n                );\n            }\n            else if (attributeName === \"checked\" && this.tagName === \"INPUT\" && this.getAttribute('type') === \"checkbox\") {\n                this.addEventListener(\"change\", \n                    ()=> this.updateStateFromProperty(\"checked\")\n                );\n            }\n        }\n   },\n}","import { COMMANDS as COMMAND_ATTRIBUTES } from \"./commands.js\";\nimport { BOOLEAN_ATTRIBUTES, SUPPORTED_ATTRIBUTES_FOR_BINDING, GLOBAL_STATE_FUNCTION_NAME, DEFAULT_TEMPLATE_DOM } from \"./consts.js\";\nimport { queueActivate } from \"./paint_utils.js\";\nimport { setAttribute, setStateAttribute, setStateText } from \"./state_utils.js\";\n\nexport function extendElementClassWithReactiveElementClass(elementClass, appScope = window) {\n    class ReactiveElement extends elementClass {\n        // Should contain the \"root\" DOM element containing this element\n        host = null\n\n        // For input elements - to force bubble-up of change events\n        #changeEventHandler\n\n        #wasMounted = false\n\n        // Used for the _bind command, which allows \"reverse-binding\" attribute values to state props,\n        // keys are attribute names, values are state prop names\n        #boundAttributesToState = {}\n        static observedAttributes = [\"ref\"]\n                                    .concat(SUPPORTED_ATTRIBUTES_FOR_BINDING)\n                                    .concat(Object.keys(COMMAND_ATTRIBUTES).map(command => ('_' + command.toLowerCase())));\n\n\n        bindAttributeToState(attrName, statePropName) {\n            this.#boundAttributesToState[attrName] = statePropName;\n        }\n        unbindAttributeToState(attrName) {\n            delete this.#boundAttributesToState[attrName];\n        }\n        \n        // For input elements\n        updateStateFromProperty(propertyName) {\n            let newValue = this[propertyName];\n            const stateProp = this.#boundAttributesToState[propertyName];\n            const [stateValue, theState] = this.getState(stateProp, true);\n            if (stateValue !== newValue) theState[stateProp] = newValue;\n\n        }\n\n        #updateStateFromAttribute(attributeName) {\n            let newValue = this.getAttribute(attributeName);\n            if (BOOLEAN_ATTRIBUTES.includes(attributeName)) {\n                if (newValue === null) newValue = false;\n                else newValue = true;\n            }\n            const stateProp = this.#boundAttributesToState[attributeName];\n            const [stateValue, theState] = this.getState(stateProp, true);\n            if (stateValue !== newValue) theState[stateProp] = newValue;\n        }\n\n        disconnectedCallback() {\n            if (this.#changeEventHandler) this.removeEventListener('change', this.#changeEventHandler);\n            const host = this.host ?? this;\n            if (host.ref) {\n                const thisRefName = this.getAttribute('ref');\n                if (thisRefName) { \n                    delete host.ref[thisRefName];\n                    delete host.events[thisRefName];\n                }\n            }\n            this.#boundAttributesToState = {};\n        }\n\n        activate() {\n            // Keep it here and not in bindEvents! \n            if (this?.tagName === \"INPUT\") {\n                this.#changeEventHandler = function() {\n                    const changeEvent = new Event('inputChange', { bubbles: true, composed: true });\n                    this.dispatchEvent(changeEvent);\n                }\n                // Change events does not automatically bubbles, we need to listen and bubble up a new event\n                this.addEventListener('change', this.#changeEventHandler, false);\n            }\n\n            const commands = [];\n            const attributeNames = this.getAttributeNames();\n            for (const attrName of attributeNames) {\n                const attrValue = this.getAttribute(attrName);\n                // This also resolves \"State attributes\"\n                this.initialSetAttribute(attrName, attrValue);\n\n                // Save \"Command attributes\"\\\n                if (attrName.indexOf('_') === 0) {\n                    const command = attrName.substring(1);\n                    commands.push({ command, args: attrValue });\n                }\n            } \n            commands.forEach(({ command, args})=> {\n                COMMAND_ATTRIBUTES[command]?.call(this, args);\n            });\n\n        }\n        connectedCallback() {\n            if (this.#wasMounted) return;\n            // IMPORTANT: THIS *CAN* be NULL, DO NOT CHANGE IT!\n            // It is part of the way a check is made to see if an element is part of ShadowDOM!\n            // host will be null if the element is part of the DOM === the \"root\" custom element will have null in .host\n            // THIS SHOULD BE THE FIRST THING THAT HAPPENS!\n            this.host = this.getRootNode().host;\n            if (this.host) {\n                // Once the host custom element is connected\n                // then its 'State' is ready and activated,\n                // then we can call the sub-elements 'activate()',\n                // which relies on an active state.\n                // Doing it like this, allow visual render faster,\n                // defering the state handling.\n                this.host.addEventListener(\"connected\", \n                    ()=> this.activate()),\n                { once: true }\n            }\n            else {\n                // queueActivate(this, ()=> this.activate());\n                queueMicrotask(()=> this.activate());\n\n            }\n            this.#wasMounted = true;\n        }\n\n        attributeChangedCallback(attributeName, oldValue, newValue) { \n            if (oldValue === newValue) return;\n            if (!this.isConnected) return;\n\n            if (attributeName === \"ref\") {\n                const host = this.isNativeElement ? this.host : this;\n                const refValue = newValue;\n                host.ref[refValue] = this;\n                return;\n            }\n\n            if (attributeName in this.#boundAttributesToState) {\n                this.#updateStateFromAttribute(attributeName);\n                return;\n            }\n\n            if (attributeName.indexOf('@') === 0) {\n                const propName = attributeName.substring(1);\n                const attrNode = this.getAttributeNode(attributeName);\n                attrNode.nodeValue = this.host.getAttribute(propName);\n                if (!this.host.propAttributes.has(propName)) {\n                    this.host.propAttributes.set(propName, new Set());\n                }\n                this.host.propAttributes.get(propName).add(attrNode);\n            }\n\n        }\n\n        // Gets state value of stateProp,\n        // tries to resolve from local state(s) first,\n        // and then from global. If the second argument is true, returns both the state value and the state objec\n        getState(stateProp, returnStateObject=false) {\n            let theState;\n            // If this is a reactive element inside a reactive web component - the host should be the containing web component - \n            // we should reference its state, if host is null - it is most likely the host web component\n            let thisInstance = this.isNativeElement && this.host ? this.host : this;\n            // if (!thisInstance) return returnStateObject ? [undefined, undefined] : undefined;\n            let stateVal;\n            if (thisInstance && thisInstance.state) {\n                stateVal = thisInstance.state?.[stateProp];\n            }\n\n            let globalState = false;\n            while (stateVal === undefined && typeof thisInstance.host !== 'undefined' && thisInstance.host !== null) {\n                thisInstance = thisInstance.host;\n                stateVal = thisInstance.state?.[stateProp];\n            }\n\n            if (stateVal !== undefined) theState = thisInstance.state;\n            else {\n                globalState = appScope[GLOBAL_STATE_FUNCTION_NAME]();\n                stateVal = globalState?.[stateProp];\n                if (stateVal !== undefined) theState = globalState;\n            } \n            if (returnStateObject) {\n                return [stateVal, theState];\n            }\n            return stateVal;\n        }\n        \n        findElement(refName) {\n            const host = this.host || this;\n            // if Shadow DOM is used, the \"root\" element is shadowRoot, otherwise it is the \n            // web component itself\n            let root = host;\n            if (appScope.SPROUT_CONFIG.useShadow) {\n                root = host.shadowRoot;\n            }\n            return host.ref.hasOwnProperty(refName) ? host.ref[refName] : root.querySelector(`[ref=\"${refName}\"]`);\n        }\n\n        // The \"initialSetX\" functions are called:\n        // 1. When a custom element instance is first created (before it's connected) - \n        // state attribute values are set to their state prop names (e.g: '$name').\n        // 2. When a custom element instance becomes connected (added to the DOM) - state attribute values are actually resolved to the\n        // value of their respective state prop values, and binding between them occurs.\n        initialSetText(stateProp) {\n            setStateText.call(this, stateProp);\n        }\n        initialSetAttribute(attributeName, attributeValue) {\n            attributeValue = String(attributeValue);\n            let valueToSet = attributeValue;\n            /*\n            // \"Property Attribute\"\n            if (attributeValue.indexOf('@') === 0 && this.host && this.isConnected) {\n                valueToSet = this.host.getAttribute(attributeValue.substring(1));\n            } \n            */\n            \n            // \"State attribute\"\n            if (attributeValue.indexOf('$') === 0 && this.isConnected)  {\n                let stateProp = attributeValue.substring(1);\n                setStateAttribute.call(this, attributeName, stateProp);\n            }\n            // normal attribute\n            else {\n                setAttribute.call(this, attributeName, valueToSet);\n            }\n        }\n    }\n\n    /*\n    if (DEBUG_MODE) {\n        const descriptors = Object.getOwnPropertyDescriptors(ReactiveElement.prototype);\n        for (const key in descriptors) {\n            const descrp = descriptors[key];\n            Object.defineProperty(ReactiveElement.prototype, key, {\n                writable: descrp.writable,\n                configurable: descrp.configurable,\n                enumerable: descrp.enumerable,\n                value: ()=> {\n                    `Calling ${key} on ReactiveElement for ${elementClass.toString()}`;\n                    descrp.value();\n                }\n            });\n        }\n    }\n    */\n\n    return ReactiveElement;\n}\n","function debugGetProxyHandler(scopeName, originalObject) {\n    return {\n        get(target, property, receiver) {\n            if (typeof property === \"symbol\") return Reflect.get(...arguments);\n            console.debug (`Property ${property} called on ${scopeName}`);\n            if (property === \"prototype\") {\n                // return Object.getPrototypeOf(originalObject.prototype);\n                return originalObject.prototype;\n            }\n            if (typeof target[property] === \"function\") {\n                return new Proxy(target[property], debugApplyProxyHandler(property, `${scopeName}.${property}`));\n            }\n            else if (typeof target[property] === \"object\") {\n                if (!target[property].hasOwnProperty(\"_stateManager\")) {\n                    return new Proxy(target[property], debugGetProxyHandler(`${scopeName}.${property}`));\n                }\n            }\n            return Reflect.get(...arguments);\n        }\n    }\n}\n\nfunction debugApplyProxyHandler(funcName, scopeName) {\n    return {\n        construct(target, args, newTarget) {\n            console.debug(`Constructing ${funcName}`);\n            return Reflect.construct(target, args, newTarget);\n        },\n        apply(target, thisArg, argumentsList) {\n            console.debug(`Function: ${funcName} with arguments: ${argumentsList} called on ${scopeName}`);\n            return Reflect.apply(...arguments);\n        },\n    }\n}\nexport function putObjectInDebugMode(obj, name) {\n    return new Proxy(obj, debugGetProxyHandler(name, obj));\n}","import StateManager from \"./StateManager.js\";\nimport { StatefulArrayHandler } from \"./proxy_handlers.js\";\nimport { handleStateChange } from \"./state_utils.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\n\nclass StatefulArray extends Array {\n\n    // This will define which \"constructor\" JS calls whenever it needs to construct a new array while calling some Array native functions\n    static get [Symbol.species]() {\n        return Array;\n    }\n\n    // If any of these are \"set\" - handle state change in the value\n    dependencyProps = new Map();\n\n    // We set the $$operation property on functions that manipulates the array in a way that can change its length,\n    // to prevent redundant calls for handleStateChange.\n    // The call will be made when the \"length\" property of the array will be changed\n    splice(...args) {\n        this.$$operation = \"splice\";\n        const result = super.splice(...args);\n        delete this.$$operation;\n        return result;\n    }\n    shift(...args) {\n        this.$$operation = \"shift\";\n        const result = super.shift(...args);\n        delete this.$$operation;\n        return result;\n    }\n    unshift(...args) {\n        this.$$operation = \"splice\";\n        const result = super.unshift(...args);\n        delete this.$$operation;\n        return result;\n    }\n\n    sort(...args) {\n        this.$$operation = \"sort\";\n        const result = super.sort(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    reverse(...args) {\n        this.$$operation = \"reverse\";\n        const result = super.reverse(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    fill(...args) {\n        this.$$operation = \"fill\";\n        const result = super.fill(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n    \n    copyWithin(...args) {\n        this.$$operation = \"copyWithin\";\n        const result = super.sort(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    slice(...args) {\n        this.$$operation = \"slice\";\n        const result = super.slice(...args);\n        delete this.$$operation;\n        return result;\n    }\n\n    /*\n    clone() {\n        this.$$operation = \"clone\";\n        const result = this.map(item=> item);\n        delete this.$$operation;\n        return result;\n    }\n    */\n    toArray() {\n        this.$$operation = \"toArray\";\n        /*\n        const result = [];\n        for (let i = 0, len=this.length; i<len; i++) {\n            result.push(Object.assign({}, this[i]));\n        }\n        */\n        const result = this.rawArray;\n        delete this.$$operation;\n        return result;\n    }\n    // noConvertToStateItems can be used in internal methods where a normal array is returned and you just want to recreate a StatefulArray,\n    // with the same state items\n\n    // NOTE: original Array constructor can get a series of arguments to build an array from, OR a single number,\n    // to create an array with that number as a length\n    constructor(initialArray, parentStateObject, arrayStateProp, noConvertToStateItems=false, appScope = window) {\n        const StateManager = appScope.SPROUT_CONFIG.stateManagerClass;\n\n        if (!Array.isArray(initialArray)) {\n            throw Error(\"Argument for StateFulArray constructor must be an array!\");\n        }\n\n        const rawArray = initialArray;\n        let statefulArray;\n        if (!noConvertToStateItems) {\n            statefulArray = rawArray.map((item, index)=> {\n                if (item?.hasOwnProperty('state')) return item;\n                if (Array.isArray(item)) return item; // return new StatefulArray(item, this[index].state, index, false, appScope); \n                if (typeof item === 'object') return new StateManager(item, arrayStateProp, parentStateObject._stateManager, false, appScope);\n                return item;\n            });\n        }\n        super(...statefulArray);\n\n        this.parentStateObject = parentStateObject;\n        this.arrayStateProp = arrayStateProp;\n        this.rawArray = rawArray;\n\n        statefulArray = new Proxy(this, StatefulArrayHandler(parentStateObject?._stateManager, arrayStateProp, appScope));\n        return statefulArray;\n    }\n}\n\nif (DEBUG_MODE) {\n    StatefulArray = putObjectInDebugMode(StatefulArray, \"StatefulArray\");\n}\n\nexport default StatefulArray;","import StateManager from \"./StateManager.js\";\nimport { handleStateChange } from \"./state_utils.js\";\nimport StatefulArray from \"./StatefulArray.js\";\nimport { BUILT_IN_STATE_PROPS, ERROR_MESSAGES } from \"./consts.js\";\n\nexport const StatefulArrayHandler = function(parentStateManager, arrayStateProp, appScope = window) {\n    const StateManager = appScope.SPROUT_CONFIG.stateManagerClass;\n    return {\n        set(targetArray, property, value) {\n            // A change in array length triggers state change in the array state prop\n            if (property === \"length\") {\n                const setResult = Reflect.set(targetArray, property, value);\n                parentStateManager.setDirtyProp(arrayStateProp);\n                // queueMicrotask(()=> handleStateChange(parentStateManager, arrayStateProp));\n                return setResult;\n            }\n\n            // Return if the value is the same\n            if (targetArray[property] === value) return true;\n\n            const index = Number(property);\n            if (!isNaN(index)) { // Check if the property is a numeric index\n                // If we set it to a new object, convert it to a state object\n                if (typeof value === 'object' && (!value.hasOwnProperty('_stateManager') && !value.hasOwnProperty('state'))) {\n                    value = new StateManager(value, arrayStateProp, parentStateManager, false, appScope);\n                }\n                // Make sure state values are always state manager values\n                // Sometimes they can be state objects (because of the custom get handler in the Proxy)\n                if (value.hasOwnProperty('_stateManager')) {\n                    value = value._stateManager;\n                }\n                // This means the object actions are part of a native array function ('splice' etc.), and that we should NOT\n                // mark $$mapAction on values\n                if (!targetArray.hasOwnProperty('$$operation')) {\n                    let doStateChangeHandle = false;\n                    if (index < targetArray.length) {\n                        doStateChangeHandle = true;\n                    }\n                    const setResult = Reflect.set(targetArray, property, value);\n                    // Only handle state change if this is a change for an existing array item,\n                    // if it's a new item, it will already be handled on the \"length\" property set\n                    // Without this check we will have a redundant state check\n                    if (doStateChangeHandle) {\n                        parentStateManager.setDirtyProp(arrayStateProp);\n                        //queueMicrotask(()=> handleStateChange(parentStateManager, arrayStateProp));\n                    }\n                    return setResult;\n                }\n            }\n            return Reflect.set(targetArray, property, value);\n        },\n        \n        get(targetArray, property, receiver) {\n            // if (typeof property === 'symbol') return Reflect.get(...arguments);\n            // if (property === 'hasOwnProperty') return Reflect.get(...arguments);\n            const index = Number(property);\n            if (!isNaN(index)) {\n                if (!targetArray[index]) return undefined;\n                if (targetArray[index].hasOwnProperty('state')) return targetArray[index].state;\n                // Could be another array\n                return targetArray[index];\n            }\n\n            /*\n            // If this property is set on the array, it means the get is part of a \"dependency check\"\n            if (targetArray.hasOwnProperty(\"_gettingDependenciesFor\")) {\n                targetArray.dependencyProps.set(property, targetArray._gettingDependenciesFor);\n                delete targetArray._gettingDependenciesFor;\n            }\n            */\n            \n            return Reflect.get(...arguments);\n        }\n    }\n}\n\nexport const StateObjectValueHandler = function(rootStateObj, objPropertyName, appScope = window) {\n    return {\n        defineProperty(targetObj, property, descriptor) {\n            if (typeof descriptor?.value !== \"undefined\") {\n                const value = descriptor.value;\n                // Could already be a StatefulArray (needs to find better way to detect this)\n                if (Array.isArray(value)) {\n                    if (!value?.[0]?._stateManager) {\n                        descriptor.value = new StatefulArray(descriptor.value, rootStateObj, objPropertyName, false, appScope);\n                    }\n                }\n                else if (typeof value === \"object\") {\n                    descriptor.value = new Proxy(descriptor.value, StateObjectValueHandler(rootStateObj, objPropertyName, appScope))\n\n                }\n            }\n            else if (typeof descriptor?.get === \"function\") {\n                descriptor.get.call(targetObj);\n            }\n            // Don't use \"arguments\" here - they are not linked to argument changes in 'strict'\n            const definePropertyResult = Reflect.defineProperty(targetObj, property, descriptor);\n            const stateManager = rootStateObj._stateManager;\n            stateManager.setDirtyProp(objPropertyName);\n            // queueMicrotask(()=> handleStateChange(stateManager, objPropertyName));\n            return definePropertyResult;\n        },\n    }\n}\nexport const StateHandler = function(stateObj, appScope = window) {\n    return {\n        defineProperty(targetState, stateProp, descriptor) {\n            if (BUILT_IN_STATE_PROPS.includes(stateProp) || targetState?._binding) {\n                return Reflect.defineProperty(...arguments);\n            }\n            const origTargetState = targetState;\n            const dependencies = new Set();\n            // Will be the actual prop name if this is a state hook setter\n            let setStateProp;\n            targetState = new Proxy(targetState, {\n                get(target, property, receiver) {\n                    if (property === \"_global\") {\n                        target._global._gettingDependenciesFor = stateProp;\n                        target._global._localStateManager = target._stateManager;\n\n                    }\n                    if (BUILT_IN_STATE_PROPS.includes(property)) {\n                        return Reflect.get(...arguments);\n                    }\n                    if (Array.isArray(target[property])) {\n                        target[property]._gettingDependenciesFor = stateProp;\n                    }\n                    dependencies.add(property);\n                    return Reflect.get(...arguments);\n                }\n            });\n            if (typeof descriptor?.value !== \"undefined\") {\n                const value = descriptor.value;\n                // Could already be a StatefulArray (needs to find better way to detect this)\n                if (Array.isArray(value)) {\n                    // Setter Hook\n                    if (stateProp.indexOf('set_') === 0) {\n                        const deps = value?.[1];\n                        if (!deps) throw Error(ERROR_MESSAGES.NO_DEPENDENCIES_ARRAY_IN_SET_HOOK(stateProp));\n                        // Second item should be an array of dependencies\n                        value?.[1].forEach(depProp=> {\n                            dependencies.add(depProp);\n                        });\n                        // Third item can be a boolean stating if to run the setter on initialization\n                        if (value?.[2] === true) {\n                            setStateProp = stateProp.substring(4);\n                            const func = value?.[0];\n                            if (func && typeof func === \"function\") {\n                                stateObj[setStateProp] = func.call(stateObj);\n                            }\n                        }\n                        else {\n                            if (value?.[3]) {\n                                stateObj[setStateProp] = value[3]\n                            }\n                        }\n                    }\n                    else if (!value?.[0]?._stateManager) {\n                        descriptor.value = new StatefulArray(descriptor.value, stateObj, stateProp, false, appScope);\n                    }\n                }\n                else if (typeof value === 'object') {\n                    descriptor.value = new Proxy(descriptor.value, StateObjectValueHandler(stateObj, stateProp, appScope));\n                }\n            }\n            else if (typeof descriptor?.get === \"function\") {\n                descriptor.get.call(targetState);\n            }\n\n            if (dependencies.size) {\n                dependencies.forEach(dep=> stateObj._stateManager.addStateDependency(dep, stateProp));\n            }\n\n            // Don't use \"arguments\" here - they are not linked to argument changes in 'strict'\n            const definePropertyResult = Reflect.defineProperty(origTargetState, stateProp, descriptor);\n            const stateManager = stateObj._stateManager;\n            if (setStateProp) stateProp = setStateProp;\n            if (!origTargetState.hasOwnProperty(\"_populate\"))\n                stateManager.setDirtyProp(stateProp);\n                // queueMicrotask(()=> handleStateChange(stateManager, stateProp));\n            return definePropertyResult;\n        },\n        get(targetState, property, receiver) {\n            if (property === 'hasOwnProperty') return Reflect.get(...arguments);\n            // Global state access\n            if (!targetState.hasOwnProperty('_global')) {\n                if (targetState.hasOwnProperty(\"_gettingDependenciesFor\")) {\n                    targetState._stateManager.addGlobalStateDependency(property, targetState._gettingDependenciesFor, targetState._localStateManager);\n                    delete targetState._gettingDependenciesFor;\n                    delete targetState._localStateManager;\n                    return Reflect.get(...arguments);\n                }\n            }\n            // property can be a Symbol on rare occasions, then indexOf will be undefined (that's the reason for the question mark)\n            // This handles using the negate operator on state properties\n            if (typeof property?.indexOf === 'function' && property?.indexOf('!') === 0) {\n                const originalProperty = property.substring(1);\n                if (targetState.hasOwnProperty(originalProperty)) {\n                    return !targetState[originalProperty];\n                }\n            }\n            return Reflect.get(...arguments);\n        }\n    }\n};\n","import { handleStateChange, populateStateFromInitialState } from \"./state_utils.js\";\nimport { StateHandler } from \"./proxy_handlers.js\";\nimport { GLOBAL_STATE_FUNCTION_NAME } from \"./consts.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\nimport { setHiddenProperty } from \"./prop_utils.js\";\n\n// This class actually handles \"State\". It returns a proxied \"state\" object,\n// while handling all state changes and triggers behind the scenes\nclass StateManager {\n\n    // The privateState is used to actually contain values to read from,\n    // as custom getters and setters are defined\n    privateState = {}\n    // This represents the \"publicly\" exposed state object\n    state = {};\n\n    // Saves \"map\" connections between a state array value and a custom element name,\n    // this will enable creating/removing new custom elements when items of a state array change\n    stateArrayMaps = {};\n    // conditionallyRenderingElements = {};\n    // A map that maps state props to \"dependencies\", each time a stateProp which is a key here,\n    // is changed, a state change is triggered for its dependencies as well\n    stateDependencies = {};\n    conditionallyRenderingElements = {};\n\n    // Maps state props to state nodes,\n    // Keys are state props, and values are sets of Nodes\n    stateNodes = {}\n\n    // These are used when the state object is part of Stateful Array\n    parentStateProp\n    parentStateManager\n    // parentStatePropName is used if the state object is e.g. an item of an array on a state object,\n    // or a value in an object on a state object - any change on the child state object should trigger state\n    // changes on the parentStateProp\n    // host is the host element that the state is attached to\n    \n    dirtyProps = new Set();\n\n    #handleStateChangeRAF_ID = null;\n    setDirtyProp(prop) {\n        this.dirtyProps.add(prop);\n        if (this.#handleStateChangeRAF_ID) {\n            cancelAnimationFrame(this.#handleStateChangeRAF_ID);\n            // clearTimeout(this.#handleStateChangeRAF_ID);\n\n        }\n        this.#handleStateChangeRAF_ID = requestAnimationFrame(()=> {\n            this.#handleStateChangeRAF_ID = null;\n            if (this.dirtyProps.size > 0) {\n                this.handleStateChanges();\n            }\n        });\n    }\n\n    handleStateChanges() {\n        const stateProps = [...this.dirtyProps];\n        this.dirtyProps.clear();\n        stateProps.forEach(prop=> {\n            handleStateChange(this, prop);\n        });\n    }\n    constructor(initialState, parentStateProp, parentStateManager, isGlobal = false, appScope=window) {\n        this.parentStateProp = parentStateProp;\n        this.parentStateManager = parentStateManager;\n\n        // Saves the actual state manager instance to a readonly _stateManager\n        setHiddenProperty(this.state, \"_stateManager\", this, true);\n        \n        // Initialize a proxy on the \"public state\"\n        this.state = new Proxy(this.state, StateHandler(this.state, appScope));\n        if (!isGlobal) setHiddenProperty(this.state, \"_global\", appScope[GLOBAL_STATE_FUNCTION_NAME](), true);\n        else {\n            // This maps depencdies between \"local\" state properties to global state changes\n            // The difference between the normal dependencies object, is that each depenency\n            // also includes a state object (which is the state context of the property),\n            // in other words, if a local state \"relies\" on a global state change - we save this\n            // mapping here.\n            // The keys are global state properties, where each value is a Map,\n            // in the map, the keys are local state manager objects, and the values are sets with\n            // local property names\n            this.globalStateDependencies = {};\n            this.addGlobalStateDependency = (stateProp, depStateProp, stateManager)=> {\n                if (!this.globalStateDependencies.hasOwnProperty(stateProp)) {\n                    this.globalStateDependencies[stateProp] = new Map();\n                }\n                if (!this.globalStateDependencies[stateProp].has(stateManager)) {\n                    this.globalStateDependencies[stateProp].set(stateManager, new Set());\n                }\n                this.globalStateDependencies[stateProp].get(stateManager).add(depStateProp);\n            }\n        }\n        if (initialState) {\n            populateStateFromInitialState(this.state, initialState);\n        }\n\n        setHiddenProperty(this.state, \"_isActive\", this, true);\n    }\n\n    addStateDependency(stateProp, depStateProp) {\n        if (!this.stateDependencies.hasOwnProperty(stateProp)) {\n            this.stateDependencies[stateProp] = new Set();\n        }\n        this.stateDependencies[stateProp].add(depStateProp);\n    }\n\n    addStateMap(stateProp, customElementName, parentElement) {\n        if (!this.stateArrayMaps.hasOwnProperty(stateProp)) {\n            this.stateArrayMaps[stateProp] = new Map();\n        }\n        this.stateArrayMaps[stateProp].set(parentElement, customElementName);\n    }\n\n\n    addConditionallyRenderingElements(stateProp, element) {\n        if (!this.conditionallyRenderingElements.hasOwnProperty(stateProp)){\n            this.conditionallyRenderingElements[stateProp] = new Set();\n        }\n        element.originalParentElement = element.parentElement || element.host?.shadowRoot;\n        this.conditionallyRenderingElements[stateProp].add(element);\n    }\n    \n   \n    // Node here is either an Attribute Node or a Text Node\n    addStateNode(stateProp, stateNode, isBooleanStateProp=false) {\n        if (!this.stateNodes.hasOwnProperty(stateProp)) {\n            this.stateNodes[stateProp] = new Set();\n            this.setAndBindStateProperty(stateProp, isBooleanStateProp);\n        }\n        this.stateNodes[stateProp].add(stateNode);\n    }\n    setAndBindStateProperty(stateProp) {\n        let stateObj = this.state;\n        let originalStateProp = stateProp;\n        const isNegationProp = stateProp.indexOf('!') === 0;\n        if (isNegationProp) {\n            originalStateProp = stateProp.substring(1);\n        }\n        let descriptor = Object.getOwnPropertyDescriptor(stateObj, originalStateProp);\n        if (!descriptor) {\n            stateObj = stateObj._global;\n            descriptor = Object.getOwnPropertyDescriptor(stateObj, originalStateProp);\n            if (!descriptor) {\n                throw Error(`Could not bind state prop ${stateProp}. State prop ${originalStateProp} not defined!`);\n            }\n        }\n\n        stateObj._binding = true;\n\n        // Some state props can be getters (which usually references other state values)\n        // These should be treated differently: should not be saved in privateState, and should not have a setter defined\n        const isValueProp = descriptor.hasOwnProperty('value');\n        const stateManager = stateObj._stateManager;\n\n        if (isNegationProp) {\n            const negateStateProp = stateProp;\n            if (isValueProp) {\n                if (!stateManager.privateState.hasOwnProperty(negateStateProp)) {\n                    Object.defineProperty(stateObj, negateStateProp, {\n                        get() {\n                            return !stateManager.privateState[originalStateProp];\n                        },\n                        set() {\n                            throw Error(\"Cannot directly set a negation State property!\");\n                        },\n                        enumerable: true,\n                    });\n                    stateManager.addStateDependency(originalStateProp, negateStateProp);\n                }\n            }\n            else {\n                if (!stateManager.state.hasOwnProperty(negateStateProp)) {\n                    Object.defineProperty(stateObj, negateStateProp, {\n                        get() {\n                            return !stateManager.state[originalStateProp];\n                        },\n                        set() {\n                            throw Error(\"Cannot directly set a negation State property!\");\n                        },\n                        enumerable: true,\n                    });\n                    stateManager.addStateDependency(originalStateProp, negateStateProp);\n                }\n            }\n        }\n        else {\n            if (isValueProp) {\n                if (!stateManager.privateState.hasOwnProperty(stateProp)) {\n                    stateManager.privateState[stateProp] = stateObj[stateProp];\n                }\n                Object.defineProperty(stateObj, stateProp, {\n                    set(value) {\n                        const currentVal = stateManager.privateState[stateProp];\n                        if (value === currentVal) return;\n                        // Sets value to \"private state\"\n                        stateManager.privateState[stateProp] = value;\n                        handleStateChange(stateManager, stateProp);\n                        // If this is an item in a Stateful Array, also trigger a state change for the state prop that contains the array\n                        if (stateManager.parentStateManager) {\n                            handleStateChange(stateManager.parentStateManager, stateManager.parentStateProp);\n                        }\n                    },\n                    get() {\n                        // Value is always retrieved from the \"private\" state\n                        return stateManager.privateState[stateProp];\n                    }\n                });\n            }\n            // If is a getter then - it can't be set, and the getter will return the value.\n        }\n        delete this.state._binding;\n    }\n}    \n\nif (DEBUG_MODE) {\n    StateManager = putObjectInDebugMode(StateManager, 'StateManager');\n}\n\nexport default StateManager;\n","\n\n// This is the script that takes Template elements from the page and defines Reactive Custom Elements\nexport default function(appScope, appName) {\n\n    // Create custom elements from templates\n    async function defineCustomElementFromTemplate(template, elemName, globalStylesheet) {\n        const templateContent = document.importNode(template.content, true);\n        const style = templateContent.querySelector('style');\n        if (style) templateContent.removeChild(style);\n        const runtime = templateContent.querySelector('script');\n        if (runtime) templateContent.removeChild(runtime);\n\n        customElements.define(\n            elemName, \n            class extends appScope.ReactiveCustomElement {\n                constructor() {\n                    super(templateContent, runtime, style?.textContent, globalStylesheet);\n                }\n            }\n        );\n    }\n\n    function build() {\n        let globalStylesheet;\n        const globalStyle = document.querySelector(`head > style[app=\"${appName}\"]`);\n        if (globalStyle) {\n            globalStylesheet = new CSSStyleSheet();\n            globalStylesheet.replaceSync(globalStyle.textContent);\n        }\n        Array.prototype.forEach.call(document.querySelectorAll(`template[app=\"${appName}\"]`), template => {\n            defineCustomElementFromTemplate(template, template.getAttribute('for'), globalStylesheet);\n        });\n        if (typeof globalThis[`${appName}_runtime`] === 'function') {\n            const globalRuntimeFunction = globalThis[`${appName}_runtime`];\n            globalRuntimeFunction.call(appScope);\n        }\n    }\n    build();\n}","// Convert attribute values to \"typed\" values\nexport function attributeValueToTypedValue(attrValue) {\n    let typedValue = attrValue;\n    if (attrValue === \"true\") typedValue = true;\n    else if (attrValue === \"false\") typedValue = false;\n    else if (!isNaN(Number(attrValue))) typedValue = Number(attrValue);\n    return typedValue; \n}\n\n// Check if attribute node is a \"Command\" or a \"State Attribute\" \nexport function isSpecialAttribute(attrNode) {\n    if (typeof attrNode !== \"object\" && attrNode.constructor.name !== \"Attr\") throw Error(\"Passed non Attribute to isSpecialAttribute!\");\n    return attrNode.nodeName.indexOf('_') === 0 || attrNode.nodeValue.indexOf('$') === 0;\n}","import { attributeValueToTypedValue } from \"./attr_utils\";\nimport { CONDITIONAL_OPERATORS } from \"./consts\";\nimport { queueConditionalRender } from \"./paint_utils\";\n\n// returns a Boolean according to the conditional equality of conditional to conditionStateValue\nexport function resolveConditional(conditional, conditionStateValue) {\n    const typeOf = typeof conditional;\n    if (typeOf !== 'string') {\n        return conditionStateValue === conditional;\n    }\n    else {\n        if (conditional === \"always\") return true;\n        if (CONDITIONAL_OPERATORS.includes(conditional[0])) {\n            const conditionFn = new Function(`return ${conditionStateValue}${conditional}`);\n            return conditionFn();\n        }\n        else {\n            return conditionStateValue === conditional;\n        }\n    }\n}\n\nexport function getConditionalElementClass(ReactiveElementClass) {\n    class ConditionalElement extends ReactiveElementClass {\n\n        #conditionStateProp\n        #renderMap\n        #wasMounted = false\n\n        render(isFirstRender=false) {\n            const stateValue = this.getState(this.#conditionStateProp);\n\n            if (stateValue === undefined) {\n                throw Error(`State value for ${this.#conditionStateProp} not found while rendering conditional-render element:`, this);\n            }\n            const elementsToRender = [];\n            this.#renderMap.forEach((elements, conditional)=> {\n                if (resolveConditional(conditional, stateValue)) {\n                    elementsToRender.push(...elements);\n                }\n            });\n\n            if (isFirstRender) {\n                this.innerHTML = \"\";\n                this.append(...elementsToRender);\n            }\n            else if (elementsToRender.length) {\n                queueConditionalRender(this, ()=> {\n                    this.innerHTML = \"\";\n                    this.append(...elementsToRender);\n                });\n            }\n        }\n        connectedCallback() {\n            this.host = this.getRootNode().host;\n            if (!this.host) {\n                throw Error(\"<conditional-render> must be used as part of a custom element template! Cannot be used outside of a custom element.\");\n            }\n            if (this.#wasMounted) return;\n            const conditionAttributeValue = this.getAttribute(\"_condition\");\n            if (!conditionAttributeValue) {\n                throw Error(\"conditional-render elements must have a _condition command attribute\");\n            }\n            if (!this.children || !this.children.length) {\n                console.warn(\"Conditional element doesn't have any children!\");\n            }\n\n            const statePropName = conditionAttributeValue;\n            this.#conditionStateProp = statePropName;\n\n            const [stateValue, stateObject] = this.getState(statePropName, true);\n            if (typeof stateValue === \"undefined\") {\n                throw Error(`State property ${statePropName} not defined for _condition command!`);\n            }\n\n            const renderMap = new Map();\n            renderMap.set(\"always\", []);\n            const children = [...this.children];\n\n            children.forEach(conditionalChild=> {\n                const _if = conditionalChild.getAttribute('_if');\n                if (_if) {\n                    const expectedValue = attributeValueToTypedValue(_if);\n                    if (!renderMap.has(expectedValue)) renderMap.set(expectedValue, []);\n                    renderMap.get(expectedValue).push(conditionalChild);\n                }\n                else {\n                    renderMap.get(\"always\").push(conditionalChild);\n                }\n            });\n            this.#renderMap = renderMap;\n            stateObject._stateManager.addConditionallyRenderingElements(statePropName, this);\n            this.render(true);\n            this.#wasMounted = true;\n        }\n    }\n    return ConditionalElement;\n}\n\n","import { COMMANDS as COMMAND_ATTRIBUTES } from \"./commands.js\";\nimport { BOOLEAN_ATTRIBUTES, SUPPORTED_ATTRIBUTES_FOR_BINDING, GLOBAL_STATE_FUNCTION_NAME, DEFAULT_TEMPLATE_DOM } from \"./consts.js\";\nimport { setAttribute, setStateAttribute, setStateText } from \"./state_utils.js\";\nimport StateManager from \"./StateManager.js\";\nimport { queueActivate, queueBindEvents } from \"./paint_utils.js\";\nimport { extendElementClassWithReactiveElementClass } from './ReactiveElement.js';\n\nexport function getReactiveCustomElementClass(appScope = window) {\n    const ReactiveHTMLElement = extendElementClassWithReactiveElementClass(HTMLElement, appScope);\n    const StateManager = appScope.SPROUT_CONFIG.stateManagerClass;\n    class ReactiveCustomElement extends ReactiveHTMLElement {\n        // Should contain the \"root\" DOM element containing this element\n        host = null\n\n        #wasMounted = false\n\n        // Callback function for when the element is connected to a DOM tree on the page and rendered\n        #onMount\n        // Callback function for when the element is connected to a DOM tree on the page, just before render\n        #beforeRender\n        // Callback function for when the element is connected to a DOM tree on the page, just after render,\n        // before state/reactivity activation\n        #afterRender\n        // Should only be used on non native custom elements\n        #templateContent\n        #stylesheet\n        #globalStylesheet\n        // This will be an object where keys are element \"ref\" names,\n        // and the value is either a \"click\" event handler (if it's a function),\n        // or an object with DOM event names as keys and event handlers as functions.\n        // Only relevant for non native custom elements - event bubbling from child elements will be used\n        events\n\n        // Name of events that are bound to the main event handler function\n        #boundEventNames = [];\n        // Main event handler function \n        #eventHandler\n\n        propAttributes = new Map();\n        constructor(template=null, runtimeScript, style, globalStylesheet) {\n            super();\n            const isFrameworkElement = this.tagName === \"CONDITIONAL-ELEMENT\";\n            if (isFrameworkElement) return;\n\n            if (runtimeScript) {\n                const dynamicRuntimeFn = new Function(runtimeScript.textContent);\n                const runtime = dynamicRuntimeFn();\n                this.#setRuntime(runtime);\n            }\n\n            if (style) {\n                const stylesheet = new CSSStyleSheet();\n                stylesheet.replaceSync(style);\n                this.#stylesheet = stylesheet;\n            }\n            if (globalStylesheet) {\n                this.#globalStylesheet = globalStylesheet;\n            }\n\n            this.#templateContent = \n                template?.cloneNode(true) ||\n                DEFAULT_TEMPLATE_DOM.cloneNode();\n            // Maps \"ref names\" to actual elements in the component DOM tree,\n            // for fast access.\n            this.ref = {};\n        }\n\n        #setRuntime(runtime) {\n            if (runtime.events) {\n                this.events = runtime.events;\n                if (this.isConnected) this.#bindEvents();\n            }\n            if (runtime.state) {\n                this.setInitialState(runtime.state);\n                // If this is not mounted yet, #setStateFromInitialState will be called from onConnected callback\n                if (this.isConnected) this.#setActiveStateFromInitialState();\n            }\n            if (runtime.onMount) {\n                this.#onMount = runtime.onMount;\n            }\n            if (runtime.beforeRender) {\n                this.#beforeRender = runtime.beforeRender;\n            }\n        }\n\n        setInitialState(initState) {\n            if (this.initialState) {\n                Object.assign(this.initialState, initState);\n            }\n            else {\n                this.initialState = initState;\n            }\n        }\n\n        #setActiveStateFromInitialState() {\n            if (!this.initialState) return;\n            const initialState = this.initialState;\n            if (initialState._stateManager) {\n                this.state = initialState._stateManager.state;\n            }\n            else {\n                this.state = new StateManager(initialState, undefined, undefined, false, appScope).state;\n            }\n            delete this.initialState;\n        }\n\n        #renderTemplate() {\n            if (appScope.SPROUT_CONFIG.useShadow) {\n                const shadowRoot = this.attachShadow({ mode: \"open\" });\n                this.shadowRoot.adoptedStyleSheets = [];\n                if (this.#globalStylesheet) this.shadowRoot.adoptedStyleSheets.push(this.#globalStylesheet);\n                if (this.#stylesheet) this.shadowRoot.adoptedStyleSheets.push(this.#stylesheet);\n                shadowRoot.appendChild(this.#templateContent);\n            }\n            else {\n                const fragment = new DocumentFragment();\n                fragment.appendChild(this.#templateContent);\n                this.appendChild(fragment);\n            }\n        }\n\n        #unbindEvents() {\n            if (!this.#boundEventNames.length) return;\n            const thiselement = this;\n            this.#boundEventNames.forEach(eventName=> {\n                thiselement.removeEventListener(eventName, this.#eventHandler, false);\n            });\n\n        }\n        #bindEvents() {\n            if (!this.events) return;\n            const eventRefNames = Object.keys(this.events);\n            const clickActions = {};\n            const otherActions = {};\n            eventRefNames.forEach(refName=> {\n                const value = this.events[refName];\n                if (typeof value === 'function') {\n                    clickActions[refName] = value;\n                }\n                else if (typeof value === 'object') {\n                    const eventNames = Object.keys(value);\n                    eventNames.forEach(eventName=> {\n                        if (eventName === 'click') {\n                            clickActions[refName] = value[eventName];\n                        }\n                        else {\n                            if (!otherActions[eventName]) otherActions[eventName] = {};\n                            otherActions[eventName][refName] = value[eventName];\n                        }\n                    });\n                }\n            });\n            const globalState = appScope[GLOBAL_STATE_FUNCTION_NAME]();\n            this.#eventHandler = function(event) {\n                const start = performance.now();\n                const elementsPath = event.composedPath();\n                let target;\n                if (elementsPath) {\n                    target = elementsPath.find(element => element.hasAttribute && element.hasAttribute('ref') && (element.getAttribute('ref') in this.events));\n                }\n                else {\n                    target = (event.target.hasAttribute && event.target.hasAttribute('ref') && (event.target.getAttribute('ref') in this.events)) ? event.target : null;\n                }\n                if (target) {\n                    const ref = target.getAttribute('ref');\n                    const eventName = event.type;\n                    if (eventName === \"click\") {\n                        const clickEvent = typeof this.events[ref] === \"function\" ? this.events[ref] : null;\n                        clickEvent?.call(target, event, event.target, globalState);\n                    }\n                    else {\n                        this.events[ref][eventName]?.call(target, event, event.target, globalState);\n                    }\n                }\n            }\n\n            const thiselement = this;\n            if (Object.keys(clickActions).length) {\n                thiselement.addEventListener('click', this.#eventHandler);\n                this.#boundEventNames.push('click');\n            }\n            const eventNames = Object.keys(otherActions);\n            for (const eventName of eventNames)\n                thiselement.addEventListener(eventName, this.#eventHandler);\n            this.#boundEventNames.push(...eventNames);\n        }\n\n        disconnectedCallback() {\n            this.#unbindEvents();\n            this.state = undefined;\n        }\n\n        activate() {\n            const attributeNames = this.getAttributeNames();\n            for (const attrName of attributeNames) {\n                const attrValue = this.getAttribute(attrName);\n                // This also resolves \"State attributes\"\n                this.initialSetAttribute(attrName, attrValue);\n            }\n\n            queueBindEvents(this, ()=> this.#bindEvents());\n            if (this.#onMount) queueMicrotask(()=> this.#onMount.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]()));\n        }\n        connectedCallback() {\n            if (this.#wasMounted) return;\n            // IMPORTANT: THIS *CAN* be NULL, DO NOT CHANGE IT!\n            // It is part of the way a check is made to see if an element is part of ShadowDOM!\n            // host will be null if the element is part of the DOM === the \"root\" custom element will have null in .host\n            // THIS SHOULD BE THE FIRST THING THAT HAPPENS!\n            this.host = this.getRootNode().host;\n            if (this.#beforeRender) this.#beforeRender.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]());\n            this.#renderTemplate();\n            if (this.#afterRender) this.#afterRender.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]());\n\n            queueMicrotask(()=> {\n                this.#setActiveStateFromInitialState();\n                this.dispatchEvent(\n                    new CustomEvent(\"connected\"),\n                );\n                this.activate();\n            });\n            this.#wasMounted = true;\n        }\n\n        attributeChangedCallback(attributeName, oldValue, newValue) {\n            if (oldValue === newValue) return;\n            if (this.propAttributes.has(attributeName)) {\n                const propAttributeNodes = this.propAttributes.get(attributeName);\n                propAttributeNodes.forEach(attrNode=> attrNode.nodeValue = newValue);\n            }\n        }\n\n    }\n\n    return ReactiveCustomElement;\n}\n","import { extendElementClassWithReactiveElementClass } from \"./ReactiveElement.js\";\nimport StateManager from \"./StateManager.js\";\nimport { GLOBAL_STATE_VAR_NAME, GLOBAL_STATE_FUNCTION_NAME, HTML_ELEMENTS_CLASSES_MAP } from \"./consts.js\";\nimport SproutBuild from '../build/index.js';\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\nimport { setHiddenProperty } from \"./prop_utils.js\";\nimport { getConditionalElementClass } from \"./ConditionalElement.js\";\nimport { getReactiveCustomElementClass } from \"./ReactiveCustomElement.js\";\n\nconst allowAppScopeAccess = document.currentScript.hasAttribute(\"allowappscopeaccess\");\nconst stateManagerClass = StateManager;\nglobalThis.SproutInitApp = function(appName) {\n    \n    let appScope = (function() { return { window, document: window?.document }})(window);\n\n    const config = {\n        useShadow: true, // Always use shadow DOM for now, may add configurability later\n        allowAppScopeAccess: allowAppScopeAccess,\n        stateManagerClass\n    }\n\n    if (config.allowAppScopeAccess) {\n        Object.defineProperty(globalThis, \"sproutApps\", {\n            value: {},\n            writable: false\n        });\n        Object.defineProperty(globalThis.sproutApps, appName, {\n            value: appScope,\n            writable: false\n        });\n        \n    }\n\n    appScope.SPROUT_CONFIG = Object.seal(config);\n\n    // Prevent \"hasOwnProperty\" shenanigans\n    const hasOwnProperty = Object.prototype.hasOwnProperty;\n    setHiddenProperty(Object.prototype, \"hasOwnProperty\", hasOwnProperty);\n\n    appScope[GLOBAL_STATE_FUNCTION_NAME] = function() {\n        return {};\n    }\n    // If initialState is passed - also sets it to global state\n    appScope.setGlobalState = function(initialState = {}) {\n        const globalState =  new appScope.SPROUT_CONFIG.stateManagerClass(initialState, undefined, undefined, true, appScope).state;\n        const globalStateVarName = GLOBAL_STATE_VAR_NAME;\n        Object.defineProperty(appScope, globalStateVarName, {\n            value: globalState,\n            writable: DEBUG_MODE ? true : false,\n            configurable: false\n        });\n        Object.defineProperty(appScope, GLOBAL_STATE_FUNCTION_NAME, {\n            value: function() {\n                return appScope[globalStateVarName];\n            },\n        });\n    };\n\n\n    const HTML_REACTIVE_ELEMENT_CLASSES = {};\n    HTML_ELEMENTS_CLASSES_MAP.forEach(elementDefinition=>\n        HTML_REACTIVE_ELEMENT_CLASSES[elementDefinition.element] = extendElementClassWithReactiveElementClass(elementDefinition.class, appScope, true)\n    );\n\n    appScope.ReactiveCustomElement = getReactiveCustomElementClass(appScope);\n\n    // Extend specific HTMLElement classes to enable reactivity (use it by adding an \"is\" attribute to an element)\n    HTML_ELEMENTS_CLASSES_MAP.forEach(itemDefinition => {\n        customElements.define(\n            `reactive-${itemDefinition.element}`, \n            // extendElementClassWithReactiveElementClass(itemDefinition.class, appScope, true),\n            HTML_REACTIVE_ELEMENT_CLASSES[itemDefinition.element],\n            { extends: itemDefinition.element });\n        }\n    );\n\n    const ReactiveHeadingClass = extendElementClassWithReactiveElementClass(HTMLHeadingElement, appScope);\n    [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"].forEach(hTag=> {\n        customElements.define(`reactive-${hTag}`,\n            class extends ReactiveHeadingClass {},\n            { extends: hTag}\n        );\n\n    });\n    const ReactiveConditionalElementClass = extendElementClassWithReactiveElementClass(HTMLElement, appScope);\n    const ConditionalElementClass = getConditionalElementClass(ReactiveConditionalElementClass); \n    customElements.define('conditional-render', ConditionalElementClass);\n\n    return function() {\n        SproutBuild(appScope, appName);\n    }.bind(appScope);\n}\n\n\n\n"],"names":["extendElementClassWithReactiveElementClass","BOOLEAN_ATTRIBUTES","SUPPORTED_ATTRIBUTES_FOR_BINDING","SUPPORTED_PROPERTIES_FOR_BINDING","SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING","BUILT_IN_STATE_PROPS","GLOBAL_STATE_VAR_NAME","GLOBAL_STATE_FUNCTION_NAME","ERROR_MESSAGES","NO_DEPENDENCIES_ARRAY_IN_SET_HOOK","stateProp","concat","HTML_ELEMENTS_CLASSES_MAP","HTMLAnchorElement","element","HTMLAreaElement","HTMLAudioElement","HTMLBodyElement","HTMLBRElement","HTMLButtonElement","HTMLCanvasElement","HTMLDataElement","HTMLDataListElement","HTMLDetailsElement","HTMLDialogElement","HTMLDivElement","HTMLDListElement","HTMLEmbedElement","HTMLFieldSetElement","HTMLFormElement","HTMLHRElement","HTMLHtmlElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLLabelElement","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLObjectElement","HTMLOListElement","HTMLOptGroupElement","HTMLOptionElement","HTMLParagraphElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSelectElement","HTMLSourceElement","HTMLSpanElement","HTMLTableElement","HTMLTableCellElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLVideoElement","HTMLSlotElement","DEBUG_MODE","DEFAULT_TEMPLATE_DOM","document","createElement","NODES_STATE","nodeActionsMap","Map","eventBindingFunctions","conditionalRenders","paintRafId","eventBindRafId","conditionalRenderRafId","activateRafId","elementActivateFunctions","CONDITIONAL_OPERATORS","MAX_OPERATIONS_PER_ANIMATION_FRAME","isElementAList","tagName","doUpdateDOM","queueBindEvents","bindFunction","set","size","cancelAnimationFrame","requestAnimationFrame","forEach","bindFn","clear","queueActivate","activateFn","queuePaint","queueConditionalRender","renderFunction","renderFn","stateToElement","resolveStateMapToDocumentFragment","getNodeActionsForNode","node","has","getNewNodeActionsObject","nodeActions","get","setStateNodeAction","nodeActionsObject","value","nodeType","Node","ATTRIBUTE_NODE","TEXT_NODE","addRemoveAction","elementToRemove","stateIdentifier","remove","Set","add","addReplaceAction","oldElement","newElement","replace","addSwitchAction","addAppendAction","nodeToAppend","append","addStateAttributeToNode","attributeNode","addAppendActionToNode","after","hasPendingActions","generateStateNodeActions","stateManager","_this","state","stateNodes","stateMapElements","stateArrayMaps","conditionallyRenderingElements","stateMapArray","customElementName","parentElement","stateMapNodeActions","currentStateMapArrayIndex","isParentAList","children","length","Array","prototype","call","childElement","currentIndex","_stateItem","customElement","firstElementChild","stateItem","hasOwnProperty","replaceWithChild","undefined","i","len","newChild","render","resolveNodeActionsMapToDOMActions","batchActions","attributeActions","elementActions","setAttribute","console","error","originalOwnerElement","hasAttribute","name","push","removeAttributeNode","setAttributeNode","nodeValue","String","textContent","replaceWith","newNode","oldNode","replaceChild","_iterator","_createForOfIteratorHelper","values","_step","s","n","done","removes","_iterator3","_step3","_loop","nodeToRemove","parentNode","removeChild","err","e","f","_iterator2","_step2","appends","_iterator4","_step4","_loop2","newChildElement","appendChild","logNodeActions","_toConsumableArray","entries","map","_ref","_ref2","_slicedToArray","actions","ELEMENT_NODE","log","appendElements","replaceElements","nodeName","DOMActions","DOMAction","setHiddenProperty","obj","propName","propValue","enumerable","arguments","Object","defineProperty","configurable","writable","HTMLElement","warn","globalThis","attrName","attrValue","includes","removeAttribute","elementSetAttribute","setStateAttribute","equalityValue","indexOf","colonIndex","Error","substring","_this$getState","getState","_this$getState2","stateVal","theState","conditionalStateProp","originalStateProp","_stateManager","addStateDependency","valueToSet","stateAttrNode","createAttribute","addStateNode","setStateText","_this$getState3","_this$getState4","textNode","createTextNode","stateObject","elemName","wrapInElement","customElementInstance","setInitialState","returnElement","mapStateArrayToElements","stateItems","_typeof","handleStateChange","stateDependencies","depStateProp","setStateProp","func","_global","globalStateDependencies","depStateProps","depStateManager","depState","populateStateFromInitialState","initialState","_populate","descriptors","getOwnPropertyDescriptors","descrp","key","bind","isArray","defineProperties","putObjectInDebugMode","attributeValueToTypedValue","mapStateToElements","stateItemsPropertyName","_parentElement$getSta","_parentElement$getSta2","stateItemsArray","elements","innerHTML","apply","COMMANDS","commandValue","_commandValue$split","split","_commandValue$split2","thiselement","addStateMap","text","initialSetText","_commandValue$split3","_commandValue$split4","attributeName","statePropName","bindAttributeToState","getAttribute","addEventListener","updateStateFromProperty","COMMAND_ATTRIBUTES","elementClass","appScope","window","_changeEventHandler","WeakMap","_wasMounted","_boundAttributesToState","_ReactiveElement_brand","WeakSet","ReactiveElement","_elementClass","_classCallCheck","_len","args","_key","_callSuper","_classPrivateMethodInitSpec","_defineProperty","_classPrivateFieldInitSpec","_inherits","_createClass","_classPrivateFieldGet","unbindAttributeToState","propertyName","newValue","stateValue","disconnectedCallback","_this$host","removeEventListener","host","ref","thisRefName","events","_classPrivateFieldSet","activate","_this2","changeEvent","Event","bubbles","composed","dispatchEvent","commands","attributeNames","getAttributeNames","initialSetAttribute","command","_COMMAND_ATTRIBUTES$c","connectedCallback","_this3","getRootNode","once","queueMicrotask","attributeChangedCallback","oldValue","isConnected","isNativeElement","refValue","_assertClassBrand","_updateStateFromAttribute","attrNode","getAttributeNode","propAttributes","returnStateObject","thisInstance","_thisInstance$state","globalState","_thisInstance$state2","_globalState","findElement","refName","root","SPROUT_CONFIG","useShadow","shadowRoot","querySelector","attributeValue","keys","toLowerCase","debugGetProxyHandler","scopeName","originalObject","target","property","receiver","Reflect","debug","Proxy","debugApplyProxyHandler","funcName","construct","newTarget","thisArg","argumentsList","StateManager","StatefulArrayHandler","StatefulArray","_Array","initialArray","parentStateObject","arrayStateProp","noConvertToStateItems","stateManagerClass","rawArray","statefulArray","item","index","_possibleConstructorReturn","splice","_get2","$$operation","result","_get","_getPrototypeOf","shift","_get3","_len2","_key2","unshift","_get4","_len3","_key3","sort","_get5","_len4","_key4","reverse","_get6","_len5","_key5","fill","_get7","_len6","_key6","copyWithin","_get8","_len7","_key7","slice","_get9","_len8","_key8","toArray","Symbol","species","_wrapNativeSuper","parentStateManager","targetArray","setResult","setDirtyProp","Number","isNaN","doStateChangeHandle","StateObjectValueHandler","rootStateObj","objPropertyName","targetObj","descriptor","_value$","definePropertyResult","StateHandler","stateObj","targetState","_targetState","_binding","origTargetState","dependencies","_gettingDependenciesFor","_localStateManager","_value$2","deps","depProp","dep","addGlobalStateDependency","originalProperty","_handleStateChangeRAF_ID","parentStateProp","isGlobal","prop","dirtyProps","handleStateChanges","stateProps","addConditionallyRenderingElements","_element$host","originalParentElement","stateNode","isBooleanStateProp","setAndBindStateProperty","isNegationProp","getOwnPropertyDescriptor","isValueProp","negateStateProp","privateState","currentVal","_regeneratorRuntime","t","r","o","a","iterator","c","asyncIterator","u","toStringTag","define","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","h","l","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","displayName","isGeneratorFunction","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","pop","prev","charAt","stop","rval","handle","complete","finish","_catch","delegateYield","_defineProperties","_toPropertyKey","_toPrimitive","toPrimitive","_isNativeReflectConstruct","_assertThisInitialized","ReferenceError","Boolean","valueOf","_setPrototypeOf","asyncGeneratorStep","_asyncToGenerator","_next","_throw","appName","defineCustomElementFromTemplate","_x","_x2","_x3","_defineCustomElementFromTemplate","_callee","template","globalStylesheet","templateContent","style","runtime","_callee$","_context","importNode","content","customElements","_appScope$ReactiveCus","_class","ReactiveCustomElement","build","globalStyle","CSSStyleSheet","replaceSync","querySelectorAll","globalRuntimeFunction","typedValue","isSpecialAttribute","resolveConditional","conditional","conditionStateValue","typeOf","conditionFn","Function","getConditionalElementClass","ReactiveElementClass","_conditionStateProp","_renderMap","ConditionalElement","_ReactiveElementClass","isFirstRender","elementsToRender","conditionAttributeValue","renderMap","conditionalChild","_if","expectedValue","getReactiveCustomElementClass","ReactiveHTMLElement","_onMount","_beforeRender","_afterRender","_templateContent","_stylesheet","_globalStylesheet","_boundEventNames","_eventHandler","_ReactiveCustomElement_brand","_ReactiveHTMLElement","runtimeScript","isFrameworkElement","dynamicRuntimeFn","_setRuntime","stylesheet","cloneNode","initState","assign","_unbindEvents","_bindEvents","_renderTemplate","_setActiveStateFromInitialState","CustomEvent","propAttributeNodes","onMount","beforeRender","attachShadow","mode","adoptedStyleSheets","fragment","DocumentFragment","_this4","eventName","_this5","_classPrivateFieldGet2","eventRefNames","clickActions","otherActions","eventNames","event","_this6","start","performance","now","elementsPath","composedPath","find","clickEvent","_this$events$ref$even","_i","_eventNames2","SproutBuild","allowAppScopeAccess","currentScript","SproutInitApp","_window","config","sproutApps","seal","setGlobalState","globalStateVarName","HTML_REACTIVE_ELEMENT_CLASSES","elementDefinition","itemDefinition","ReactiveHeadingClass","HTMLHeadingElement","hTag","_ReactiveHeadingClass","ReactiveConditionalElementClass","ConditionalElementClass"],"sourceRoot":""}
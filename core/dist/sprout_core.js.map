{"version":3,"file":"sprout_core.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;ACVkF;AAE3E,IAAMC,kBAAkB,GAAG,CAC9B,QAAQ,EACR,SAAS,CACZ;AAEM,IAAMC,gCAAgC,GAAG,CAC5C,QAAQ,EACR,OAAO,EACP,SAAS,CACZ;;AAED;AACO,IAAMC,gCAAgC,GAAG,CAC5C,OAAO,EACP,SAAS,CACZ;AACM,IAAMC,uCAAuC,GAAG,CACnD,IAAI;AAAE;AACN;AACA,MAAM,EACN,OAAO,EACP,MAAM,EACN,gBAAgB,EAChB,OAAO,EACP,OAAO,EACP,QAAQ,EACR,UAAU,EACV,OAAO,EACP,QAAQ,EACR,KAAK,EACL,MAAM,EACN,KAAK,EACL,MAAM,CACT;;AAED;AACA;AACO,IAAMC,oBAAoB,GAAG,CAChC,SAAS,EACT,yBAAyB,EACzB,oBAAoB,EACpB,eAAe,EACf,UAAU,EACV,WAAW,CACd;AAEM,IAAMC,qBAAqB,GAAG,mBAAmB;AACjD,IAAMC,0BAA0B,GAAG,gBAAgB;AAEnD,IAAMC,cAAc,GAAG;EAC1BC,iCAAiC,WAAAA,kCAACC,SAAS,EAAE;IACzC,gFAAAC,MAAA,CAAgFD,SAAS;EAC7F;AACJ,CAAC;AAEM,IAAME,yBAAyB,GAAG,CACrC;EAAE,SAAOC,iBAAiB;EAAEC,OAAO,EAAE;AAAI,CAAC,EAC1C;EAAE,SAAOC,eAAe;EAAED,OAAO,EAAE;AAAO,CAAC,EAC3C;EAAE,SAAOE,gBAAgB;EAAEF,OAAO,EAAE;AAAQ,CAAC;AAC7C;AACA;EAAE,SAAOG,eAAe;EAAEH,OAAO,EAAE;AAAO,CAAC,EAC3C;EAAE,SAAOI,aAAa;EAAEJ,OAAO,EAAE;AAAK,CAAC,EACvC;EAAE,SAAOK,iBAAiB;EAAEL,OAAO,EAAE;AAAS,CAAC,EAC/C;EAAE,SAAOM,iBAAiB;EAAEN,OAAO,EAAE;AAAS,CAAC,EAC/C;EAAE,SAAOO,eAAe;EAAEP,OAAO,EAAE;AAAO,CAAC,EAC3C;EAAE,SAAOQ,mBAAmB;EAAER,OAAO,EAAE;AAAW,CAAC,EACnD;EAAE,SAAOS,kBAAkB;EAAET,OAAO,EAAE;AAAU,CAAC,EACjD;EAAE,SAAOU,iBAAiB;EAAEV,OAAO,EAAE;AAAS,CAAC,EAC/C;EAAE,SAAOW,cAAc;EAAEX,OAAO,EAAE;AAAM,CAAC,EACzC;EAAE,SAAOY,gBAAgB;EAAEZ,OAAO,EAAE;AAAK,CAAC,EAC1C;EAAE,SAAOa,gBAAgB;EAAEb,OAAO,EAAE;AAAQ,CAAC,EAC7C;EAAE,SAAOc,mBAAmB;EAAEd,OAAO,EAAE;AAAW,CAAC,EACnD;EAAE,SAAOe,eAAe;EAAEf,OAAO,EAAE;AAAO,CAAC;AAC3C;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACI;EAAE,SAAOgB,aAAa;EAAEhB,OAAO,EAAE;AAAK,CAAC,EACvC;EAAE,SAAOiB,eAAe;EAAEjB,OAAO,EAAE;AAAO,CAAC,EAC3C;EAAE,SAAOkB,iBAAiB;EAAElB,OAAO,EAAE;AAAS,CAAC,EAC/C;EAAE,SAAOmB,gBAAgB;EAAEnB,OAAO,EAAE;AAAM,CAAC,EAC3C;EAAE,SAAOoB,gBAAgB;EAAEpB,OAAO,EAAE;AAAQ,CAAC,EAC7C;EAAE,SAAOqB,gBAAgB;EAAErB,OAAO,EAAE;AAAQ,CAAC,EAC7C;EAAE,SAAOsB,iBAAiB;EAAEtB,OAAO,EAAE;AAAS,CAAC,EAC/C;EAAE,SAAOuB,aAAa;EAAEvB,OAAO,EAAE;AAAK,CAAC,EACvC;EAAE,SAAOwB,eAAe;EAAExB,OAAO,EAAE;AAAO,CAAC,EAC3C;EAAE,SAAOyB,cAAc;EAAEzB,OAAO,EAAE;AAAM,CAAC,EACzC;EAAE,SAAO0B,eAAe;EAAE1B,OAAO,EAAE;AAAO,CAAC,EAC3C;EAAE,SAAO2B,gBAAgB;EAAE3B,OAAO,EAAE;AAAQ,CAAC,EAC7C;EAAE,SAAO4B,iBAAiB;EAAE5B,OAAO,EAAE;AAAS,CAAC,EAC/C;EAAE,SAAO6B,gBAAgB;EAAE7B,OAAO,EAAE;AAAK,CAAC,EAC1C;EAAE,SAAO8B,mBAAmB;EAAE9B,OAAO,EAAE;AAAW,CAAC,EACnD;EAAE,SAAO+B,iBAAiB;EAAE/B,OAAO,EAAE;AAAS,CAAC;AAC/C;AACA;EAAE,SAAOgC,oBAAoB;EAAEhC,OAAO,EAAE;AAAI,CAAC;AAC7C;AACA;EAAE,SAAOiC,kBAAkB;EAAEjC,OAAO,EAAE;AAAU,CAAC,EACjD;EAAE,SAAOkC,cAAc;EAAElC,OAAO,EAAE;AAAM,CAAC,EACzC;EAAE,SAAOmC,mBAAmB;EAAEnC,OAAO,EAAE;AAAW,CAAC,EACnD;EAAE,SAAOoC,gBAAgB;EAAEpC,OAAO,EAAE;AAAa,CAAC,EAClD;EAAE,SAAOoC,gBAAgB;EAAEpC,OAAO,EAAE;AAAI,CAAC;AACzC;AACA;EAAE,SAAOqC,iBAAiB;EAAErC,OAAO,EAAE;AAAS,CAAC,EAC/C;EAAE,SAAOsC,iBAAiB;EAAEtC,OAAO,EAAE;AAAS,CAAC,EAC/C;EAAE,SAAOuC,eAAe;EAAEvC,OAAO,EAAE;AAAO,CAAC;AAC3C;AACA;EAAE,SAAOwC,gBAAgB;EAAExC,OAAO,EAAE;AAAQ,CAAC,EAC7C;EAAE,SAAOyC,oBAAoB;EAAEzC,OAAO,EAAE;AAAK,CAAC,EAC9C;EAAE,SAAOyC,oBAAoB;EAAEzC,OAAO,EAAE;AAAK,CAAC,EAC9C;EAAE,SAAO0C,mBAAmB;EAAE1C,OAAO,EAAE;AAAK,CAAC,EAC7C;EAAE,SAAO2C,uBAAuB;EAAE3C,OAAO,EAAE;AAAQ,CAAC,EACpD;EAAE,SAAO2C,uBAAuB;EAAE3C,OAAO,EAAE;AAAQ,CAAC,EACpD;EAAE,SAAO2C,uBAAuB;EAAE3C,OAAO,EAAE;AAAQ,CAAC,EACpD;EAAE,SAAO4C,mBAAmB;EAAE5C,OAAO,EAAE;AAAW,CAAC,EACnD;EAAE,SAAO6C,eAAe;EAAE7C,OAAO,EAAE;AAAO,CAAC,EAC3C;EAAE,SAAO8C,gBAAgB;EAAE9C,OAAO,EAAE;AAAQ,CAAC,EAC7C;EAAE,SAAO+C,gBAAgB;EAAE/C,OAAO,EAAE;AAAQ,CAAC,EAC7C;EAAE,SAAOgD,gBAAgB;EAAEhD,OAAO,EAAE;AAAK,CAAC,EAC1C;EAAE,SAAOiD,gBAAgB;EAAEjD,OAAO,EAAE;AAAQ,CAAC,EAC7C;EAAE,SAAOkD,eAAe;EAAElD,OAAO,EAAE;AAAO;AAC1C;AACA;AAAA,CACH;;AAED;AACA;AACO,IAAMmD,UAAU,GAAG,KAAK;AAExB,IAAMC,oBAAoB,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;AAE1D,IAAMC,WAAW,GAAG;EACvB;EACA;EACA;EACAC,cAAc,EAAE,IAAIC,GAAG,CAAC,CAAC;EACzB;EACAC,qBAAqB,EAAE,IAAID,GAAG,CAAC,CAAC;EAChCE,kBAAkB,EAAE,IAAIF,GAAG,CAAC,CAAC;EAC7B;EACA;EACAG,UAAU,EAAE,IAAI;EAChB;EACAC,cAAc,EAAE,IAAI;EACpB;EACAC,sBAAsB,EAAE;AAC5B,CAAC;AAEM,IAAMC,qBAAqB,GAAG,CACjC,GAAG,EACH,IAAI,EACJ,IAAI,EACJ,KAAK,EACL,GAAG,EACH,IAAI,EACJ,GAAG,EACH,IAAI,CACP;AAEM,IAAMC,kCAAkC,GAAG,GAAG;;ACpK9C,SAASC,cAAcA,CAACjE,OAAO,EAAE;EACtC,OAAOA,OAAO,CAACkE,OAAO,KAAK,IAAI,IAAIlE,OAAO,CAACkE,OAAO,KAAK,IAAI;AAC7D;;ACF6C;AAC8B;AAE3E,IACIN,UAAU,GAMVL,WAAW,CANXK,UAAU;EACVF,qBAAqB,GAKrBH,WAAW,CALXG,qBAAqB;EACrBG,cAAc,GAIdN,WAAW,CAJXM,cAAc;EACdC,sBAAsB,GAGtBP,WAAW,CAHXO,sBAAsB;EACtBH,kBAAkB,GAElBJ,WAAW,CAFXI,kBAAkB;EAClBH,cAAc,GACdD,WAAW,CADXC,cAAc;AAGX,SAASY,eAAeA,CAACpE,OAAO,EAAEqE,YAAY,EAAE;EACnDX,qBAAqB,CAACY,GAAG,CAACtE,OAAO,EAAEqE,YAAY,CAAC;EAChD,IAAIX,qBAAqB,CAACa,IAAI,GAAGP,kCAAkC,EAAE;EACrE,IAAIH,cAAc,EAAEW,oBAAoB,CAACX,cAAc,CAAC;EACxDA,cAAc,GAAGY,qBAAqB,CAAC,YAAK;IACxCZ,cAAc,GAAG,IAAI;IACrBH,qBAAqB,CAACgB,OAAO,CAAC,UAAAC,MAAM;MAAA,OAAGA,MAAM,CAAC,CAAC;IAAA,EAAC;IAChDjB,qBAAqB,GAAG,IAAID,GAAG,CAAC,CAAC;EACrC,CAAC,CAAC;AACN;AAEO,SAASmB,UAAUA,CAAA,EAAG;EACzB,IAAIpB,cAAc,CAACe,IAAI,GAAGP,kCAAkC,EAAE;EAC9D,IAAIJ,UAAU,EAAEY,oBAAoB,CAACZ,UAAU,CAAC;EAChDA,UAAU,GAAGa,qBAAqB,CAAC,YAAK;IACpCN,WAAW,CAAC,CAAC;IACbP,UAAU,GAAG,IAAI;EACrB,CAAC,CAAC;AACN;AACO,SAASiB,sBAAsBA,CAAC7E,OAAO,EAAE8E,cAAc,EAAE;EAC5DnB,kBAAkB,CAACW,GAAG,CAACtE,OAAO,EAAE8E,cAAc,CAAC;EAC/C,IAAInB,kBAAkB,CAACY,IAAI,GAAGP,kCAAkC,EAAE;EAClE,IAAIF,sBAAsB,EAAEU,oBAAoB,CAACV,sBAAsB,CAAC;EACxEA,sBAAsB,GAAGW,qBAAqB,CAAC,YAAK;IAChDX,sBAAsB,GAAG,IAAI;IAC7BH,kBAAkB,CAACe,OAAO,CAAC,UAAAK,QAAQ;MAAA,OAAGA,QAAQ,CAAC,CAAC;IAAA,EAAC;IACjDpB,kBAAkB,GAAG,IAAIF,GAAG,CAAC,CAAC;EAClC,CAAC,CAAC;AACN;;;;;;;;;;;;;ACxCqF;AACrC;AACsB;AAC5B;;AAE1C;AACA,SAASyB,qBAAqBA,CAACC,IAAI,EAAE;EACjC,IAAQ3B,cAAc,GAAKD,WAAW,CAA9BC,cAAc;EACtB,IAAI,CAACA,cAAc,CAAC4B,GAAG,CAACD,IAAI,CAAC,EAAE3B,cAAc,CAACc,GAAG,CAACa,IAAI,EAAEE,uBAAuB,CAAC,CAAC,CAAC;EAClF,IAAMC,WAAW,GAAG9B,cAAc,CAAC+B,GAAG,CAACJ,IAAI,CAAC;EAC5C,OAAOG,WAAW;AACtB;AAEO,SAASE,kBAAkBA,CAACL,IAAI,EAAEM,iBAAiB,EAAEC,KAAK,EAAE;EAC/D,IAAIP,IAAI,CAACQ,QAAQ,KAAKC,IAAI,CAACC,cAAc,EACrCJ,iBAAiB,CAAC,cAAc,CAAC,GAAGC,KAAK,CAAC,KACzC,IAAIP,IAAI,CAACQ,QAAQ,KAAKC,IAAI,CAACE,SAAS,EACrCL,iBAAiB,CAAC,aAAa,CAAC,GAAGC,KAAK;AAChD;AAEO,SAASK,eAAeA,CAACT,WAAW,EAAEU,eAAe,EAAEC,eAAe,EAAE;EAC3E,IAAI,CAACX,WAAW,CAACY,MAAM,CAACd,GAAG,CAACa,eAAe,CAAC,EAAE;IAC1CX,WAAW,CAACY,MAAM,CAAC5B,GAAG,CAAC2B,eAAe,EAAE,IAAIE,GAAG,CAAC,CAAC,CAAC;EACtD;EACAb,WAAW,CAACY,MAAM,CAACX,GAAG,CAACU,eAAe,CAAC,CAACG,GAAG,CAACJ,eAAe,CAAC;AAChE;AACO,SAASK,gBAAgBA,CAACf,WAAW,EAAEgB,UAAU,EAAEC,UAAU,EAAE;EAClEjB,WAAW,CAACkB,OAAO,CAAClC,GAAG,CAACgC,UAAU,EAAEC,UAAU,CAAC;AACnD;AACO,SAASE,eAAeA,CAACnB,WAAW,EAAEiB,UAAU,EAAE;EACrDjB,WAAW,UAAO,GAAGiB,UAAU;AACnC;AACA;AACA;AACO,SAASG,eAAeA,CAACpB,WAAW,EAAEqB,YAAY,EAAEV,eAAe,EAAE;EACxE,IAAI,CAACX,WAAW,CAACsB,MAAM,CAACxB,GAAG,CAACa,eAAe,CAAC,EAAE;IAC1CX,WAAW,CAACsB,MAAM,CAACtC,GAAG,CAAC2B,eAAe,EAAE,IAAIE,GAAG,CAAC,CAAC,CAAC;EACtD;EACAb,WAAW,CAACsB,MAAM,CAACrB,GAAG,CAACU,eAAe,CAAC,CAACG,GAAG,CAACO,YAAY,CAAC;AAC7D;AACO,SAASE,uBAAuBA,CAACC,aAAa,EAAEpB,KAAK,EAAE;EAC1D,IAAMJ,WAAW,GAAGJ,qBAAqB,CAAC4B,aAAa,CAAC;EACxDtB,kBAAkB,CAACsB,aAAa,EAAExB,WAAW,EAAEI,KAAK,CAAC;AACzD;AACO,SAASqB,qBAAqBA,CAAC5B,IAAI,EAAEwB,YAAY,EAAEV,eAAe,EAAE;EACvE,IAAMX,WAAW,GAAGJ,qBAAqB,CAACC,IAAI,CAAC;EAC/CuB,eAAe,CAACpB,WAAW,EAAEqB,YAAY,EAAEV,eAAe,CAAC;AAC/D;;AAEA;AACA;AACO,SAASZ,uBAAuBA,CAAA,EAAG;EACtC,OAAQ;IACJ;IACA;IACA;IACAuB,MAAM,EAAE,IAAInD,GAAG,CAAC,CAAC;IACjB;IACA+C,OAAO,EAAE,IAAI/C,GAAG,CAAC,CAAC;IAClB;IACAuD,KAAK,EAAE,IAAIvD,GAAG,CAAC,CAAC;IAChB;IACA;IACA;IACAyC,MAAM,EAAE,IAAIzC,GAAG,CAAC,CAAC;IACjB,UAAQ,IAAI;IACZ,IAAIwD,iBAAiBA,CAAA,EAAG;MACpB,OACI,IAAI,UAAO,KAAK,IAAI,IACpB,IAAI,CAACL,MAAM,CAACrC,IAAI,IAChB,IAAI,CAACiC,OAAO,CAACjC,IAAI,IACjB,IAAI,CAACyC,KAAK,CAACzC,IAAI,IACf,IAAI,CAAC2B,MAAM,CAAC3B,IAAI;IAExB;EACJ,CAAC;AACL;;AAGA;AACO,SAAS2C,wBAAwBA,CAACC,YAAY,EAAEvH,SAAS,EAAE;EAAA,IAAAwH,KAAA;EAC9D,IAAQ5D,cAAc,GAAKD,WAAW,CAA9BC,cAAc;EACtB,IAAMkC,KAAK,GAAGyB,YAAY,CAACE,KAAK,CAACzH,SAAS,CAAC;EAC3C,IAAM0H,UAAU,GAAGH,YAAY,CAACG,UAAU,CAAC1H,SAAS,CAAC;EACrD;EACA;EACA;EACA;EACA,IAAM2H,gBAAgB,GAAGJ,YAAY,CAACK,cAAc,CAAC5H,SAAS,CAAC;EAC/D,IAAM6H,8BAA8B,GAAGN,YAAY,CAACM,8BAA8B,CAAC7H,SAAS,CAAC;;EAE7F;EACA;EACA,IAAI0H,UAAU,EAAE;IACZA,UAAU,CAAC5C,OAAO,CAAC,UAAAS,IAAI,EAAG;MACtB,IAAI,CAAC3B,cAAc,CAAC4B,GAAG,CAACD,IAAI,CAAC,EAAE3B,cAAc,CAACc,GAAG,CAACa,IAAI,EAAE,CAAC,CAAC,CAAC;MAC3D,IAAMM,iBAAiB,GAAGjC,cAAc,CAAC+B,GAAG,CAACJ,IAAI,CAAC;MAClDK,kBAAkB,CAACL,IAAI,EAAEM,iBAAiB,EAAEC,KAAK,CAAC;IACtD,CAAC,CAAC;EACN;EAEA,IAAI6B,gBAAgB,EAAE;IAClB;IACA,IAAMG,aAAa,GAAGhC,KAAK;IAC3BiC,OAAO,CAACC,GAAG,QAAA/H,MAAA,CAAS0H,gBAAgB,CAAChD,IAAI,sBAAmB,CAAC;IAC7DgD,gBAAgB,CAAC7C,OAAO,CAAC,UAACmD,iBAAiB,EAAEC,aAAa,EAAI;MAC1D;MACA,IAAMC,mBAAmB,GAAG1C,uBAAuB,CAAC,CAAC;MACrD,IAAI2C,yBAAyB,GAAG,CAAC,CAAC;MAClC,IAAMC,aAAa,GAAGhE,cAAc,CAAC6D,aAAa,CAAC;MACnD;MACA,IAAIA,aAAa,CAACI,QAAQ,CAACC,MAAM,EAAE;QAC/BC,KAAK,CAACC,SAAS,CAAC3D,OAAO,CAAC4D,IAAI,CAACR,aAAa,CAACI,QAAQ,EAAE,UAACK,YAAY,EAAEC,YAAY,EAAI;UAAA,IAAAC,UAAA;UAChF,IAAIC,aAAa,GAAGH,YAAY;UAChC;UACA,IAAIN,aAAa,EAAES,aAAa,GAAGH,YAAY,CAACI,iBAAiB;UACjE,IAAIC,SAAS,GAAGlB,aAAa,CAACc,YAAY,CAAC;UAC3C,KAAAC,UAAA,GAAIG,SAAS,cAAAH,UAAA,eAATA,UAAA,CAAWI,cAAc,CAAC,OAAO,CAAC,EAAED,SAAS,GAAGA,SAAS,CAACvB,KAAK;UACnE,IAAI,CAACuB,SAAS,EAAE;YACZ7C,eAAe,CAACgC,mBAAmB,EAAEQ,YAAY,CAAC;YAClD;UACJ,CAAC,MACI,IAAIG,aAAa,CAACrB,KAAK,KAAKuB,SAAS,EAAE;YACxC,IAAME,gBAAgB,GAAG9D,cAAc,CAAC4D,SAAS,EAAEf,iBAAiB,EAAE5D,cAAc,CAAC6D,aAAa,CAAC,GAAG,IAAI,GAAGiB,SAAS,CAAC;YACvH;YACA1C,gBAAgB,CAAC0B,mBAAmB,EAAEQ,YAAY,EAAEO,gBAAgB,CAAC;UACzE;UACAd,yBAAyB,GAAGQ,YAAY;QAC5C,CAAC,CAAC;MACN;;MAEA;MACAR,yBAAyB,EAAE;MAC3B,KAAK,IAAIgB,CAAC,GAAGhB,yBAAyB,EAAEiB,GAAG,GAACvB,aAAa,CAACS,MAAM,EAAEa,CAAC,GAACC,GAAG,EAAED,CAAC,EAAE,EAAE;QAC1E,IAAMJ,SAAS,GAAGlB,aAAa,CAACsB,CAAC,CAAC;QAClC;QACA,IAAIJ,SAAS,EAAE;UACX,IAAMM,QAAQ,GAAGlE,cAAc,CAAC4D,SAAS,EAAEf,iBAAiB,EAAE5D,cAAc,CAAC6D,aAAa,CAAC,GAAG,IAAI,GAAGiB,SAAS,CAAC;UAC/G;UACArC,eAAe,CAACqB,mBAAmB,EAAEmB,QAAQ,EAAEN,SAAS,CAAC;QAC7D;MACJ;;MAEA;MACA,IAAIb,mBAAmB,CAACd,iBAAiB,EAAE;QACvCzD,cAAc,CAACc,GAAG,CAACwD,aAAa,EAAEC,mBAAmB,CAAC;MAC1D;IACJ,CAAC,CAAC;EACN;EAEA,IAAIN,8BAA8B,EAAE;IAChC;IACAA,8BAA8B,CAAC/C,OAAO,CAAC,UAAA1E,OAAO,EAAG;MAC7C6E,sBAAsB,CAACuC,KAAI,EAAE;QAAA,OAAKpH,OAAO,CAACmJ,MAAM,CAAC,CAAC;MAAA,EAAC;IACvD,CAAC,CAAC;EACN;EAEA,IAAI3F,cAAc,CAACe,IAAI,EAAEK,UAAU,CAAC,CAAC;AACzC;AAEA,SAASwE,iCAAiCA,CAAA,EAAG;EACzC,IAAMC,YAAY,GAAG,EAAE;EACvB,IAAMC,gBAAgB,GAAG,EAAE;EAC3B,IAAMC,cAAc,GAAG,EAAE;EAEzB,IAAQ/F,cAAc,GAAKD,WAAW,CAA9BC,cAAc;EAEtBA,cAAc,CAACkB,OAAO,CAAC,UAACY,WAAW,EAAEH,IAAI,EAAI;IACzC;IACA,IAAIG,WAAW,CAACuD,cAAc,CAAC,cAAc,CAAC,EAAE;MAC5C,IAAMnD,KAAK,GAAGJ,WAAW,CAACkE,YAAY;MACtC,IAAI,OAAO9D,KAAK,KAAK,SAAS,EAAE;QAC5B,IAAI,CAACP,IAAI,CAAC0D,cAAc,CAAC,sBAAsB,CAAC,EAAE;UAC9ClB,OAAO,CAAC8B,KAAK,CAAC,gFAAgF,CAAC;QACnG;QACA,IAAI/D,KAAK,KAAK,KAAK,EAAE;UACjB;UACA,IAAIP,IAAI,CAACuE,oBAAoB,CAACC,YAAY,CAACxE,IAAI,CAACyE,IAAI,CAAC,EAAE;YACnDN,gBAAgB,CAACO,IAAI,CAAC,YAAK;cACvB1E,IAAI,CAACuE,oBAAoB,CAACI,mBAAmB,CAAC3E,IAAI,CAAC;YACvD,CAAC,CAAC;UACN;QACJ;QACA;QAAA,KACK;UACD,IAAI,CAACA,IAAI,CAACuE,oBAAoB,CAACC,YAAY,CAACxE,IAAI,CAACyE,IAAI,CAAC,EAAE;YACpDN,gBAAgB,CAACO,IAAI,CAAC,YAAK;cACvB1E,IAAI,CAACuE,oBAAoB,CAACK,gBAAgB,CAAC5E,IAAI,CAAC;YACpD,CAAC,CAAC;UACN;QACJ;MACJ,CAAC,MACI;QACD,IAAI,OAAOO,KAAK,KAAK,QAAQ,IAAIP,IAAI,CAAC6E,SAAS,KAAKtE,KAAK,EAAE;UACvD4D,gBAAgB,CAACO,IAAI,CAAE;YAAA,OAAK1E,IAAI,CAAC6E,SAAS,GAAGtE,KAAK;UAAA,EAAC;QACvD;MACJ;IACJ;;IAEA;IAAA,KACK,IAAIJ,WAAW,CAACuD,cAAc,CAAC,aAAa,CAAC,EAAE;MAChD,IAAMnD,MAAK,GAAGuE,MAAM,CAAC3E,WAAW,CAAC4E,WAAW,CAAC;MAC7C,IAAI/E,IAAI,CAAC6E,SAAS,KAAKtE,MAAK,EAAE;MAC9B6D,cAAc,CAACM,IAAI,CAAE;QAAA,OAAK1E,IAAI,CAAC6E,SAAS,GAAGtE,MAAK;MAAA,EAAC;IACrD;;IAEA;IAAA,KACK,IAAIJ,WAAW,UAAO,EAAE;MACzBiE,cAAc,CAACM,IAAI,CAAC;QAAA,OAAK1E,IAAI,CAACgF,WAAW,CAAC7E,WAAW,UAAO,CAAC;MAAA,EAAC;IAClE,CAAC,MACI;MACDA,WAAW,CAACkB,OAAO,CAAC9B,OAAO,CAAC,UAAC0F,OAAO,EAAEC,OAAO,EAAI;QAC7Cd,cAAc,CAACM,IAAI,CAAC;UAAA;YAChB;YACA1E,IAAI,CAACmF,YAAY,CAACF,OAAO,EAAEC,OAAO;UAAC;QAAA,EAAC;MAC5C,CAAC,CAAC;MAAC,IAAAE,SAAA,GAAAC,0BAAA,CACmBlF,WAAW,CAACY,MAAM,CAACuE,MAAM,CAAC,CAAC;QAAAC,KAAA;MAAA;QAAjD,KAAAH,SAAA,CAAAI,CAAA,MAAAD,KAAA,GAAAH,SAAA,CAAAK,CAAA,IAAAC,IAAA,GAAmD;UAAA,IAAxCC,OAAO,GAAAJ,KAAA,CAAAhF,KAAA;UAAA,IAAAqF,UAAA,GAAAP,0BAAA,CACaM,OAAO;YAAAE,MAAA;UAAA;YAAA,IAAAC,KAAA,YAAAA,MAAA,EAAE;cAAA,IAAzBC,YAAY,GAAAF,MAAA,CAAAtF,KAAA;cACnB,IAAIwF,YAAY,CAACC,UAAU,IAAID,YAAY,CAACC,UAAU,KAAKhG,IAAI,EAAE;gBAC7DoE,cAAc,CAACM,IAAI,CAAC;kBAAA,OAAK1E,IAAI,CAACiG,WAAW,CAACF,YAAY,CAAC;gBAAA,EAAC;cAC5D;YACJ,CAAC;YAJD,KAAAH,UAAA,CAAAJ,CAAA,MAAAK,MAAA,GAAAD,UAAA,CAAAH,CAAA,IAAAC,IAAA;cAAAI,KAAA;YAAA;UAIC,SAAAI,GAAA;YAAAN,UAAA,CAAAO,CAAA,CAAAD,GAAA;UAAA;YAAAN,UAAA,CAAAQ,CAAA;UAAA;QACL;MAAC,SAAAF,GAAA;QAAAd,SAAA,CAAAe,CAAA,CAAAD,GAAA;MAAA;QAAAd,SAAA,CAAAgB,CAAA;MAAA;MAAA,IAAAC,UAAA,GAAAhB,0BAAA,CACqBlF,WAAW,CAACsB,MAAM,CAAC6D,MAAM,CAAC,CAAC;QAAAgB,MAAA;MAAA;QAAjD,KAAAD,UAAA,CAAAb,CAAA,MAAAc,MAAA,GAAAD,UAAA,CAAAZ,CAAA,IAAAC,IAAA,GAAmD;UAAA,IAAxCa,OAAO,GAAAD,MAAA,CAAA/F,KAAA;UAAA,IAAAiG,UAAA,GAAAnB,0BAAA,CACgBkB,OAAO;YAAAE,MAAA;UAAA;YAAA,IAAAC,MAAA,YAAAA,OAAA,EAAE;cAAA,IAA5BC,eAAe,GAAAF,MAAA,CAAAlG,KAAA;cACtB6D,cAAc,CAACM,IAAI,CAAC;gBAAA,OAAK1E,IAAI,CAAC4G,WAAW,CAACD,eAAe,CAAC;cAAA,EAAC;YAC/D,CAAC;YAFD,KAAAH,UAAA,CAAAhB,CAAA,MAAAiB,MAAA,GAAAD,UAAA,CAAAf,CAAA,IAAAC,IAAA;cAAAgB,MAAA;YAAA;UAEC,SAAAR,GAAA;YAAAM,UAAA,CAAAL,CAAA,CAAAD,GAAA;UAAA;YAAAM,UAAA,CAAAJ,CAAA;UAAA;QACL;MAAC,SAAAF,GAAA;QAAAG,UAAA,CAAAF,CAAA,CAAAD,GAAA;MAAA;QAAAG,UAAA,CAAAD,CAAA;MAAA;IACL;EACJ,CAAC,CAAC;EAEF,UAAA1L,MAAA,CAAWyJ,gBAAgB,EAAKC,cAAc;AAClD;;AAEA;AACO,SAASyC,cAAcA,CAAA,EAAG;EAC7B,IAAQxI,cAAc,GAAKD,WAAW,CAA9BC,cAAc;EACtByI,kBAAA,CAAIzI,cAAc,CAAC0I,OAAO,CAAC,CAAC,EAC3BC,GAAG,CAAC,UAAAC,IAAA,EAAoB;IAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA;MAAlBjH,IAAI,GAAAkH,KAAA;MAAEE,OAAO,GAAAF,KAAA;IAEhB,QAAQlH,IAAI,CAACQ,QAAQ;MACjB,KAAKC,IAAI,CAAC4G,YAAY;QAAE;UACpB7E,OAAO,CAACC,GAAG,CAAE,aAAa,EAAEzC,IAAI,CAAC;UACjC,IAAMsH,cAAc,GAAAR,kBAAA,CAAOM,OAAO,CAAC3F,MAAM,CAAC6D,MAAM,CAAC,CAAC,CAAC;UACnD,IAAIgC,cAAc,CAACtE,MAAM,EAAE;YACvBR,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAE6E,cAAc,CAAC;UACzC;UACA,IAAMC,eAAe,GAAAT,kBAAA,CAAOM,OAAO,CAAC/F,OAAO,CAAC0F,OAAO,CAAC,CAAC,CAAC;UACtD,IAAIQ,eAAe,CAACvE,MAAM,EAAE;YACxBR,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAE8E,eAAe,CAAC;UAC1C;UACA,IAAIH,OAAO,CAACrG,MAAM,CAAC3B,IAAI,EAAE;YACrBoD,OAAO,CAACC,GAAG,CAAE,QAAQ,EAAE2E,OAAO,CAACrG,MAAM,CAAC;UAC1C;UACA;QACJ;MAEA,KAAKN,IAAI,CAACC,cAAc;QAAE;UACtB8B,OAAO,CAACC,GAAG,CAAE,eAAe,EAAEzC,IAAI,CAACwH,QAAQ,EAAE,IAAI,EAAExH,IAAI,CAACuE,oBAAoB,EAAE,IAAI,EAAE6C,OAAO,CAAC/C,YAAY,CAAC;UACzG;QACJ;MAEA,KAAK5D,IAAI,CAACE,SAAS;QAAE;UACjB6B,OAAO,CAACC,GAAG,CAAE,sBAAsB,EAAEzC,IAAI,CAACgG,UAAU,EAAE,IAAI,EAAEoB,OAAO,CAACrC,WAAW,CAAC;UAChF;QACJ;IACJ;EACJ,CAAC,CAAC;AACN;AACA;AACO,SAAS/F,WAAWA,CAAA,EAAG;EAC1B,IAAMX,cAAc,GAAKD,WAAW,CAA9BC,cAAc;EACpB,IAAIA,cAAc,CAACe,IAAI,EAAE;IACrB;IACA,IAAMqI,UAAU,GAAGxD,iCAAiC,CAAC5F,cAAc,CAAC;IACpEoJ,UAAU,CAAClI,OAAO,CAAC,UAAAmI,SAAS;MAAA,OAAGA,SAAS,CAAC,CAAC;IAAA,EAAC;IAC3CtJ,WAAW,CAACC,cAAc,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC1C;AACJ;;ACrRA;AACO,SAASqJ,iBAAiBA,CAACC,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAoB;EAAA,IAAlBC,UAAU,GAAAC,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAC,KAAK;EACxEC,MAAM,CAACC,cAAc,CAACN,GAAG,EAAEC,QAAQ,EAAE;IACjCtH,KAAK,EAAEuH,SAAS;IAChBK,YAAY,EAAE,KAAK;IACnBC,QAAQ,EAAE,KAAK;IACfL,UAAU,EAAVA;EACJ,CAAC,CAAC;AACN;;;;;;;;;ACTuE;AACV;AACT;AAEpD,IAAIM,iBAAiB,GAAG,IAAI;AAE5B,IAAI,OAAOC,WAAW,KAAK,WAAW,EAAE;EACpC9F,OAAO,CAAC+F,IAAI,CAAE,iIAAiI,CAAC;AACpJ,CAAC,MACI;EACD;EACAN,MAAM,CAACC,cAAc,CAACM,UAAU,EAAE,qBAAqB,EAAE;IACrDjI,KAAK,EAAE+H,WAAW,CAACpF,SAAS,CAACmB,YAAY;IACzC+D,QAAQ,EAAE,KAAK;IACfD,YAAY,EAAE;EAClB,CAAC,CAAC;AACN;AAGO,IAAM9D,YAAY,GAAG,SAAfA,YAAYA,CAAYoE,QAAQ,EAAEC,SAAS,EAAE;EACtD,IAAI1O,kBAAkB,CAAC2O,QAAQ,CAACF,QAAQ,CAAC,EAAE;IACvC,IAAIC,SAAS,KAAK,OAAO,EAAE;MACvB,IAAI,CAACE,eAAe,CAACH,QAAQ,CAAC;IAClC,CAAC,MACI;MACDI,mBAAmB,CAAC1F,IAAI,CAAC,IAAI,EAAEsF,QAAQ,EAAE,EAAE,CAAC;IAChD;EACJ,CAAC,MACI;IACDI,mBAAmB,CAAC1F,IAAI,CAAC,IAAI,EAAEsF,QAAQ,EAAEC,SAAS,CAAC;EACvD;AACJ,CAAC;;AAED;AACA;AACO,IAAMI,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAYL,QAAQ,EAAEhO,SAAS,EAAE;EAC3D,IAAIsO,aAAa,GAAG,IAAI;EACxB,IAAItO,SAAS,CAACuO,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;IAC/B,IAAIvO,SAAS,CAACuO,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;MAChC,IAAMC,UAAU,GAAGxO,SAAS,CAACuO,OAAO,CAAC,GAAG,CAAC;MACzC,IAAIC,UAAU,KAAK,CAAC,CAAC,EAAE;QACnB,MAAMC,KAAK,CAAC,oHAAoH,CAAC;MACrI;MACAH,aAAa,GAAGtO,SAAS,CAAC0O,SAAS,CAACF,UAAU,GAAC,CAAC,CAAC;MACjDxO,SAAS,GAAGA,SAAS,CAAC0O,SAAS,CAAC,CAAC,EAAEF,UAAU,CAAC;IAClD;EACJ;EACA,IAAAG,cAAA,GAA2B,IAAI,CAACC,QAAQ,CAAC5O,SAAS,EAAE,IAAI,CAAC;IAAA6O,eAAA,GAAAnC,yBAAA,CAAAiC,cAAA;IAApDG,QAAQ,GAAAD,eAAA;IAAEE,QAAQ,GAAAF,eAAA;EAEvB,IAAIC,QAAQ,KAAK3F,SAAS,EAAE;IACxBpB,OAAO,CAAC+F,IAAI,oBAAA7N,MAAA,CAAoBD,SAAS,2DAAwD,CAAC;IAClG;EACJ;EACA,IAAI,CAAC+O,QAAQ,EAAE;IACXhH,OAAO,CAAC+F,IAAI,CAAE,mCAAmC,GAAG9N,SAAS,CAAC;IAC9D;EACJ;EACA,IAAIsO,aAAa,EAAE;IACf,IAAMU,oBAAoB,GAAG,KAAK,GAAChP,SAAS,GAACsO,aAAa;IAC1D,IAAMW,iBAAiB,GAAGjP,SAAS;IACnCwN,MAAM,CAACC,cAAc,CAACsB,QAAQ,EAAEC,oBAAoB,EAAE;MAClDrJ,GAAG,WAAAA,IAAA,EAAG;QACF,OAAO,IAAI,CAACsJ,iBAAiB,CAAC,KAAKX,aAAa;MACpD,CAAC;MACDhB,UAAU,EAAE;IAChB,CAAC,CAAC;IACFyB,QAAQ,CAACG,aAAa,CAACC,kBAAkB,CAACnP,SAAS,EAAEgP,oBAAoB,CAAC;IAC1EF,QAAQ,GAAGC,QAAQ,CAACC,oBAAoB,CAAC;IACzChP,SAAS,GAAGgP,oBAAoB;EACpC;EAEA,IAAMI,UAAU,GAAGN,QAAQ;EAC3B,IAAI,CAACX,eAAe,CAACH,QAAQ,CAAC;EAC9B;EACA,IAAMqB,aAAa,GAAG5L,QAAQ,CAAC6L,eAAe,CAACtB,QAAQ,CAAC;EACxDqB,aAAa,CAACjF,SAAS,GAAGgF,UAAU;EACpC;EACAlC,iBAAiB,CAACmC,aAAa,EAAE,kBAAkB,EAAE,IAAI,CAAC;EAC1D;EACA;EACA;EACAnC,iBAAiB,CAACmC,aAAa,EAAE,sBAAsB,EAAE,IAAI,CAAC;EAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,IAAI,OAAOD,UAAU,KAAK,SAAS,EAAE;IACjC;IACA;IACA;IACAC,aAAa,CAACjF,SAAS,GAAG,EAAE;EAChC;;EAEA;EACA,IAAIgF,UAAU,KAAK,KAAK,EAAE;IACtB,IAAI,CAACjF,gBAAgB,CAACkF,aAAa,CAAC;EACxC;EAEAN,QAAQ,CAACG,aAAa,CAACK,YAAY,CAACvP,SAAS,EAAEqP,aAAa,EAAE,OAAOD,UAAU,KAAK,SAAS,CAAC;AAElG,CAAC;AACM,IAAMI,YAAY,GAAG,SAAfA,YAAYA,CAAYxP,SAAS,EAAE;EAC5C,IAAAyP,eAAA,GAA6B,IAAI,CAACb,QAAQ,CAAC5O,SAAS,EAAE,IAAI,CAAC;IAAA0P,eAAA,GAAAhD,yBAAA,CAAA+C,eAAA;IAApDX,QAAQ,GAAAY,eAAA;IAAEX,QAAQ,GAAAW,eAAA;EAEzB,IAAIZ,QAAQ,KAAK3F,SAAS,IAAI2F,QAAQ,KAAK,IAAI,EAAE;IAC7C/G,OAAO,CAAC+F,IAAI,oBAAA7N,MAAA,CAAoBD,SAAS,4CAAyC,CAAC;IACnF;EACJ;EACA,IAAI,CAAC+O,QAAQ,EAAE;IACXhH,OAAO,CAAC+F,IAAI,CAAE,mCAAmC,GAAG9N,SAAS,CAAC;IAC9D;EACJ;EACA,IAAMoP,UAAU,GAAGN,QAAQ;EAC3B,IAAMa,QAAQ,GAAGlM,QAAQ,CAACmM,cAAc,CAACR,UAAU,CAAC;EACpDlC,iBAAiB,CAACyC,QAAQ,EAAE,kBAAkB,EAAE,IAAI,CAAC;EACrD,IAAI,CAACxD,WAAW,CAACwD,QAAQ,CAAC;EAC1BZ,QAAQ,CAACG,aAAa,CAACK,YAAY,CAACvP,SAAS,EAAE2P,QAAQ,CAAC;AAC5D,CAAC;;AAED;AACO,SAASvK,cAAcA,CAACyK,WAAW,EAAEC,QAAQ,EAAEC,aAAa,EAAE;EACjE,IAAMC,qBAAqB,GAAGvM,QAAQ,CAACC,aAAa,CAACoM,QAAQ,CAAC;EAC9DE,qBAAqB,CAACC,eAAe,CAACJ,WAAW,CAAC;EAClD,IAAIK,aAAa;EACjB,IAAIH,aAAa,EAAE;IACfG,aAAa,GAAGzM,QAAQ,CAACC,aAAa,CAACqM,aAAa,CAAC;IACrDG,aAAa,CAAC/D,WAAW,CAAC6D,qBAAqB,CAAC;EACpD,CAAC,MACI;IACDE,aAAa,GAAGF,qBAAqB;EACzC;EACA,OAAOE,aAAa;AACxB;AAEO,SAASC,uBAAuBA,CAACC,UAAU,EAAEN,QAAQ,EAAEC,aAAa,EAAE;EACzE;EACA,OAAOK,UAAU,CAAC7D,GAAG,CAAC,UAAAvD,SAAS,EAAI;IAC/B,IAAIA,SAAS,CAACC,cAAc,CAAC,OAAO,CAAC,EAAED,SAAS,GAAGA,SAAS,CAACvB,KAAK;IAClE,IAAI4I,OAAA,CAAOrH,SAAS,MAAK,QAAQ,EAAE;MAC/BjB,OAAO,CAAC+F,IAAI,CAAC,iDAAiD,EAAE9E,SAAS,CAAC;MAC1E,OAAO,CAAC,CAAC;IACb;IACA,OAAO5D,cAAc,CAAC4D,SAAS,EAAE8G,QAAQ,EAAEC,aAAa,CAAC;EAC7D,CAAC,CAAC;AACN;;AAEA;AACO,SAASO,iBAAiBA,CAAC/I,YAAY,EAAEvH,SAAS,EAAE;EACvD+H,OAAO,CAACC,GAAG,CAAE,oBAAoB,EAAEhI,SAAS,CAAC;EAC7C,IAAIL,oBAAoB,CAACuO,QAAQ,CAAClO,SAAS,CAAC,EAAE;EAC9C;EACAsH,wBAAwB,CAACC,YAAY,EAAEvH,SAAS,CAAC;EAEjD,IAAMyH,KAAK,GAAGF,YAAY,CAACE,KAAK;EAChC;EACA,IAAIA,KAAK,CAACwB,cAAc,OAAAhJ,MAAA,CAAOD,SAAS,WAAQ,CAAC,EAAE;IAC/C,IAAI,OAAOyH,KAAK,OAAAxH,MAAA,CAAOD,SAAS,YAAS,KAAK,UAAU,EACpDyH,KAAK,OAAAxH,MAAA,CAAOD,SAAS,YAAS,CAAC0I,IAAI,CAACjB,KAAK,CAAC;EAClD;EAEA,IAAM8I,iBAAiB,GAAGhJ,YAAY,CAACgJ,iBAAiB,CAACvQ,SAAS,CAAC;EACnE,IAAIuQ,iBAAiB,EAAE;IACnBA,iBAAiB,CAACzL,OAAO,CAAC,UAAA0L,YAAY,EAAG;MACrC;MACA,IAAIA,YAAY,CAACjC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;QACpC,IAAMkC,YAAY,GAAGD,YAAY,CAAC9B,SAAS,CAAC,CAAC,CAAC;QAC9C,IAAMgC,IAAI,GAAGjJ,KAAK,CAAC+I,YAAY,CAAC,CAAC,CAAC,CAAC;QACnC,IAAIE,IAAI,IAAI,OAAOA,IAAI,KAAK,UAAU,EAAE;UACpCjJ,KAAK,CAACgJ,YAAY,CAAC,GAAGC,IAAI,CAAChI,IAAI,CAACjB,KAAK,CAAC;UACtC;QACJ;MACJ;MACAH,wBAAwB,CAACC,YAAY,EAAEiJ,YAAY,CAAC;MACpD,IAAI/I,KAAK,CAACwB,cAAc,MAAAhJ,MAAA,CAAMuQ,YAAY,WAAQ,CAAC,EAAE;QACjD,IAAI,OAAO/I,KAAK,MAAAxH,MAAA,CAAMuQ,YAAY,YAAS,KAAK,UAAU,EACtD/I,KAAK,MAAAxH,MAAA,CAAMuQ,YAAY,YAAS,CAAC9H,IAAI,CAACjB,KAAK,CAAC;MACpD;IACJ,CAAC,CAAC;EACN;;EAEA;EACA,IAAI,CAACA,KAAK,CAACkJ,OAAO,EAAE;IAChB,IAAMC,uBAAuB,GAAGrJ,YAAY,CAACqJ,uBAAuB,CAAC5Q,SAAS,CAAC;IAC/E4Q,uBAAuB,aAAvBA,uBAAuB,eAAvBA,uBAAuB,CAAE9L,OAAO,CAAC,UAAC+L,aAAa,EAAEC,eAAe,EAAI;MAChE,IAAMC,QAAQ,GAAGD,eAAe,CAACrJ,KAAK;MACtCoJ,aAAa,CAAC/L,OAAO,CAAC,UAAA0L,YAAY,EAAG;QACjC;QACA,IAAIA,YAAY,CAACjC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;UACpC,IAAMkC,YAAY,GAAGD,YAAY,CAAC9B,SAAS,CAAC,CAAC,CAAC;UAC9C,IAAMgC,IAAI,GAAGjJ,KAAK,CAAC+I,YAAY,CAAC,CAAC,CAAC,CAAC;UACnC,IAAIE,IAAI,IAAI,OAAOA,IAAI,KAAK,UAAU,EAAE;YACpCK,QAAQ,CAACN,YAAY,CAAC,GAAGC,IAAI,CAAChI,IAAI,CAACqI,QAAQ,CAAC;YAC5C;UACJ;QACJ;QACAzJ,wBAAwB,CAACwJ,eAAe,EAAEN,YAAY,CAAC;QACvD,IAAI/I,KAAK,CAACwB,cAAc,MAAAhJ,MAAA,CAAMuQ,YAAY,WAAQ,CAAC,EAAE;UACjD,IAAI,OAAO/I,KAAK,MAAAxH,MAAA,CAAMuQ,YAAY,YAAS,KAAK,UAAU,EACtDO,QAAQ,MAAA9Q,MAAA,CAAMuQ,YAAY,YAAS,CAAC9H,IAAI,CAACqI,QAAQ,CAAC;QAC1D;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;EACN;AACJ;AAEO,SAASC,6BAA6BA,CAACvJ,KAAK,EAAEwJ,YAAY,EAAE;EAC/DxJ,KAAK,CAACyJ,SAAS,GAAG,IAAI;EACtB,IAAMC,WAAW,GAAG3D,MAAM,CAAC4D,yBAAyB,CAACH,YAAY,CAAC;EAClE,IAAII,MAAM;EACV,KAAK,IAAIC,GAAG,IAAIH,WAAW,EAAE;IACzB,IAAIxR,oBAAoB,CAACuO,QAAQ,CAACoD,GAAG,CAAC,EAAE;MACpC,OAAOH,WAAW,CAACG,GAAG,CAAC;MACvB;IACJ;IACAD,MAAM,GAAGF,WAAW,CAACG,GAAG,CAAC;IACzB,IAAID,MAAM,CAACpI,cAAc,CAAC,KAAK,CAAC,IAAI,OAAOoI,MAAM,CAAC1L,GAAG,KAAK,UAAU,EAAE;MAClE0L,MAAM,CAAC1L,GAAG,CAAC4L,IAAI,CAAC9J,KAAK,CAAC;IAC1B;IACA,IAAI4J,MAAM,CAACpI,cAAc,CAAC,OAAO,CAAC,EAAE;MAChC,IAAMnD,KAAK,GAAGuL,MAAM,CAACvL,KAAK;MAC1B,IAAI,OAAOA,KAAK,KAAK,UAAU,EAAE;QAC7BuL,MAAM,CAACvL,KAAK,CAACyL,IAAI,CAAC9J,KAAK,CAAC;MAC5B,CAAC,MACI,IAAIe,KAAK,CAACgJ,OAAO,CAAC1L,KAAK,CAAC,IAAIwL,GAAG,CAAC/C,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;QACxD,IAAMmC,IAAI,GAAG5K,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAG,CAAC,CAAC;QACvB,IAAI4K,IAAI,IAAI,OAAOA,IAAI,KAAK,UAAU,EAAE;UACpCA,IAAI,CAACa,IAAI,CAAC9J,KAAK,CAAC;QACpB;MACJ;IACJ;EACJ;;EAEA;EACA;EACA+F,MAAM,CAACiE,gBAAgB,CAAChK,KAAK,EAAE0J,WAAW,CAAC;EAC3C,OAAO1J,KAAK,CAACyJ,SAAS;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/R2D;AAC+E;AAClF;AACR;AACa;AAE7D,SAASU,kBAAkBA,CAACC,sBAAsB,EAAE5J,iBAAiB,EAAEC,aAAa,EAAE;EAClF,IAAA4J,qBAAA,GAAoC5J,aAAa,CAAC0G,QAAQ,CAACiD,sBAAsB,EAAE,IAAI,CAAC;IAAAE,sBAAA,GAAArF,sBAAA,CAAAoF,qBAAA;IAAjFE,eAAe,GAAAD,sBAAA;IAAEhD,QAAQ,GAAAgD,sBAAA;EAChC,IAAI,CAACC,eAAe,IAAI,CAACxJ,KAAK,CAACgJ,OAAO,CAACQ,eAAe,CAAC,EAAE;IACrDjK,OAAO,CAAC+F,IAAI,CAAE,2DAA2D,GAAG+D,sBAAsB,CAAC;IACnG,OAAO,IAAI;EACf;EACA,IAAM9B,aAAa,GAAG1L,cAAc,CAAC6D,aAAa,CAAC,GAAG,IAAI,GAAGiB,SAAS;EACtE,IAAM8I,QAAQ,GAAG9B,uBAAuB,CAAC6B,eAAe,EAAE/J,iBAAiB,EAAE8H,aAAa,CAAC;EAC3F7H,aAAa,CAACgK,SAAS,GAAG,EAAE;EAC5B,IAAID,QAAQ,CAAC1J,MAAM,EAAE;IACjBL,aAAa,CAAClB,MAAM,CAAAmL,KAAA,CAApBjK,aAAa,EAAAmE,0BAAA,CAAW4F,QAAQ,EAAC;EACrC;EACA,OAAOlD,QAAQ;AACnB;;AAEA;AACA;AACO,IAAMqD,QAAQ,GAAG;EACpB7F,GAAG,EAAE,SAAAA,IAAS8F,YAAY,EAAE;IACxB;IACA,IAAAC,mBAAA,GAAoDD,YAAY,CAACE,KAAK,CAAC,GAAG,CAAC;MAAAC,oBAAA,GAAA9F,sBAAA,CAAA4F,mBAAA;MAApET,sBAAsB,GAAAW,oBAAA;MAAEvK,iBAAiB,GAAAuK,oBAAA;IAChD,IAAMC,WAAW,GAAG,IAAI;IACxB,IAAM1D,QAAQ,GAAG6C,kBAAkB,CAACC,sBAAsB,EAAE5J,iBAAiB,EAAEwK,WAAW,CAAC;IAC3F,IAAI,CAAC1D,QAAQ,EAAE;MACXhH,OAAO,CAAC+F,IAAI,YAAA7N,MAAA,CAAa4R,sBAAsB,UAAA5R,MAAA,CAAOgI,iBAAiB,aAAU,CAAC;MAClF;IACJ;IACA8G,QAAQ,CAACG,aAAa,CAACwD,WAAW,CAACb,sBAAsB,EAAE5J,iBAAiB,EAAEwK,WAAW,CAAC;EAC9F,CAAC;EACDE,IAAI,EAAE,SAAAA,KAASN,YAAY,EAAE;IACzB,IAAMrS,SAAS,GAAGqS,YAAY;IAC9B,IAAI,CAACO,cAAc,CAAC5S,SAAS,CAAC;IAC9B;EACJ,CAAC;EACDuR,IAAI,EAAE,SAAAA,KAASc,YAAY,EAAE;IAAA,IAAA7K,KAAA;IACzB,IAAAqL,oBAAA,GAAuCR,YAAY,CAACE,KAAK,CAAC,GAAG,CAAC;MAAAO,oBAAA,GAAApG,sBAAA,CAAAmG,oBAAA;MAAvDE,aAAa,GAAAD,oBAAA;MAAEE,aAAa,GAAAF,oBAAA;IACnC,IAAI,CAACC,aAAa,IAAI,CAACC,aAAa,EAAE;MAClCjL,OAAO,CAAC+F,IAAI,CAAE,kFAAkF,CAAC;MACjG;IACJ;IACA,IAAI,CAACiF,aAAa,IAAIvT,gCAAgC,EAAE;MACpDuI,OAAO,CAAC+F,IAAI,cAAA7N,MAAA,CAAe8S,aAAa,yCAAsC,CAAC;MAC/E;IACJ;IACA,IAAI,CAACE,oBAAoB,CAACF,aAAa,EAAEC,aAAa,CAAC;IAEvD,IAAIvT,gCAAgC,CAACyO,QAAQ,CAAC6E,aAAa,CAAC,EAAE;MAC1D,IAAIA,aAAa,KAAK,OAAO,IAAI,IAAI,CAACzO,OAAO,KAAK,OAAO,IAAI5E,uCAAuC,CAACwO,QAAQ,CAAC,IAAI,CAACgF,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE;QACtI,IAAI,CAACC,gBAAgB,CAAC,OAAO,EACzB;UAAA,OAAK3L,KAAI,CAAC4L,uBAAuB,CAAC,OAAO,CAAC;QAAA,CAC9C,CAAC;MACL,CAAC,MACI,IAAIL,aAAa,KAAK,SAAS,IAAI,IAAI,CAACzO,OAAO,KAAK,OAAO,IAAI,IAAI,CAAC4O,YAAY,CAAC,MAAM,CAAC,KAAK,UAAU,EAAE;QAC1G,IAAI,CAACC,gBAAgB,CAAC,QAAQ,EAC1B;UAAA,OAAK3L,KAAI,CAAC4L,uBAAuB,CAAC,SAAS,CAAC;QAAA,CAChD,CAAC;MACL;IACJ;EACL;AACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjE8D;AACsE;AACpD;AAE1E,SAAS9T,0CAA0CA,CAACgU,YAAY,EAAqB;EAAA,IAAnBC,QAAQ,GAAAhG,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAGiG,MAAM;EAAA,IAAAC,mBAAA,oBAAAC,OAAA;EAAA,IAAAC,WAAA,oBAAAD,OAAA;EAAA,IAAAE,uBAAA,oBAAAF,OAAA;EAAA,IAAAG,sBAAA,oBAAAC,OAAA;EAAA,IAChFC,eAAe,0BAAAC,aAAA;IAAA,SAAAD,gBAAA;MAAA,IAAAvM,KAAA;MAAAyM,eAAA,OAAAF,eAAA;MAAA,SAAAG,IAAA,GAAA3G,SAAA,CAAAhF,MAAA,EAAA4L,IAAA,OAAA3L,KAAA,CAAA0L,IAAA,GAAAE,IAAA,MAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA;QAAAD,IAAA,CAAAC,IAAA,IAAA7G,SAAA,CAAA6G,IAAA;MAAA;MAAA5M,KAAA,GAAA6M,UAAA,OAAAN,eAAA,KAAA9T,MAAA,CAAAkU,IAAA;MAAAG,2BAAA,CAAA9M,KAAA,EAAAqM,sBAAA;MACjB;MAAAU,eAAA,CAAA/M,KAAA,UACO,IAAI;MAEX;MACAgN,0BAAA,CAAAhN,KAAA,EAAAiM,mBAAmB;MAEnBe,0BAAA,CAAAhN,KAAA,EAAAmM,WAAW,EAAG,KAAK;MAEnB;MACA;MACAa,0BAAA,CAAAhN,KAAA,EAAAoM,uBAAuB,EAAG,CAAC,CAAC;MAAA,OAAApM,KAAA;IAAA;IAAAiN,SAAA,CAAAV,eAAA,EAAAC,aAAA;IAAA,OAAAU,YAAA,CAAAX,eAAA;MAAAzC,GAAA;MAAAxL,KAAA,EAO5B,SAAAmN,qBAAqBjF,QAAQ,EAAEgF,aAAa,EAAE;QAC1C2B,qBAAA,CAAKf,uBAAuB,EAA5B,IAA2B,CAAC,CAAC5F,QAAQ,CAAC,GAAGgF,aAAa;MAC1D;IAAC;MAAA1B,GAAA;MAAAxL,KAAA,EACD,SAAA8O,uBAAuB5G,QAAQ,EAAE;QAC7B,OAAO2G,qBAAA,CAAKf,uBAAuB,EAA5B,IAA2B,CAAC,CAAC5F,QAAQ,CAAC;MACjD;;MAEA;IAAA;MAAAsD,GAAA;MAAAxL,KAAA,EACA,SAAAsN,wBAAwByB,YAAY,EAAE;QAClC,IAAIC,QAAQ,GAAG,IAAI,CAACD,YAAY,CAAC;QACjC,IAAM7U,SAAS,GAAG2U,qBAAA,CAAKf,uBAAuB,EAA5B,IAA2B,CAAC,CAACiB,YAAY,CAAC;QAC5D,IAAAlG,cAAA,GAA+B,IAAI,CAACC,QAAQ,CAAC5O,SAAS,EAAE,IAAI,CAAC;UAAA6O,eAAA,GAAAnC,6BAAA,CAAAiC,cAAA;UAAtDoG,UAAU,GAAAlG,eAAA;UAAEE,QAAQ,GAAAF,eAAA;QAC3B,IAAIkG,UAAU,KAAKD,QAAQ,EAAE/F,QAAQ,CAAC/O,SAAS,CAAC,GAAG8U,QAAQ;MAE/D;IAAC;MAAAxD,GAAA;MAAAxL,KAAA,EAaD,SAAAkP,qBAAA,EAAuB;QAAA,IAAAC,UAAA;QACnB,IAAIN,qBAAA,CAAKlB,mBAAmB,EAAxB,IAAuB,CAAC,EAAE,IAAI,CAACyB,mBAAmB,CAAC,QAAQ,EAAEP,qBAAA,CAAKlB,mBAAmB,EAAxB,IAAuB,CAAC,CAAC;QAC1F,IAAM0B,IAAI,IAAAF,UAAA,GAAG,IAAI,CAACE,IAAI,cAAAF,UAAA,cAAAA,UAAA,GAAI,IAAI;QAC9B,IAAIE,IAAI,CAACC,GAAG,EAAE;UACV,IAAMC,WAAW,GAAG,IAAI,CAACnC,YAAY,CAAC,KAAK,CAAC;UAC5C,IAAImC,WAAW,EAAE;YACb,OAAOF,IAAI,CAACC,GAAG,CAACC,WAAW,CAAC;YAC5B,OAAOF,IAAI,CAACG,MAAM,CAACD,WAAW,CAAC;UACnC;QACJ;QACAE,qBAAA,CAAK3B,uBAAuB,EAA5B,IAAI,EAA2B,CAAC,CAAL,CAAC;MAChC;IAAC;MAAAtC,GAAA;MAAAxL,KAAA,EAED,SAAA0P,kBAAA,EAAoB;QAAA,IAAAC,MAAA;QAChB,IAAId,qBAAA,CAAKhB,WAAW,EAAhB,IAAe,CAAC,EAAE;QACtB;QACA;QACA;QACA;QACA,IAAI,CAACwB,IAAI,GAAG,IAAI,CAACO,WAAW,CAAC,CAAC,CAACP,IAAI;;QAGnC;QACA,IAAI,KAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE7Q,OAAO,MAAK,OAAO,EAAE;UAC3BiR,qBAAA,CAAK9B,mBAAmB,EAAxB,IAAI,EAAuB,YAAW;YAClC,IAAMkC,WAAW,GAAG,IAAIC,KAAK,CAAC,aAAa,EAAE;cAAEC,OAAO,EAAE,IAAI;cAAEC,QAAQ,EAAE;YAAK,CAAC,CAAC;YAC/E,IAAI,CAACC,aAAa,CAACJ,WAAW,CAAC;UACnC,CAHuB,CAAC;UAIxB;UACA,IAAI,CAACxC,gBAAgB,CAAC,QAAQ,EAAEwB,qBAAA,CAAKlB,mBAAmB,EAAxB,IAAuB,CAAC,EAAE,KAAK,CAAC;QACpE;QAEA,IAAMuC,QAAQ,GAAG,EAAE;QACnB,IAAMC,cAAc,GAAG,IAAI,CAACC,iBAAiB,CAAC,CAAC;QAAC,IAAAvL,SAAA,GAAAC,yCAAA,CACzBqL,cAAc;UAAAnL,KAAA;QAAA;UAArC,KAAAH,SAAA,CAAAI,CAAA,MAAAD,KAAA,GAAAH,SAAA,CAAAK,CAAA,IAAAC,IAAA,GAAuC;YAAA,IAA5B+C,QAAQ,GAAAlD,KAAA,CAAAhF,KAAA;YACf,IAAMmI,SAAS,GAAG,IAAI,CAACiF,YAAY,CAAClF,QAAQ,CAAC;YAC7C;YACA,IAAI,CAACmI,mBAAmB,CAACnI,QAAQ,EAAEC,SAAS,CAAC;;YAE7C;YACA,IAAID,QAAQ,CAACO,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;cAC7B,IAAM6H,OAAO,GAAGpI,QAAQ,CAACU,SAAS,CAAC,CAAC,CAAC;cACrCsH,QAAQ,CAAC/L,IAAI,CAAC;gBAAEmM,OAAO,EAAPA,OAAO;gBAAEjC,IAAI,EAAElG;cAAU,CAAC,CAAC;YAC/C;UACJ;QAAC,SAAAxC,GAAA;UAAAd,SAAA,CAAAe,CAAA,CAAAD,GAAA;QAAA;UAAAd,SAAA,CAAAgB,CAAA;QAAA;QACDqK,QAAQ,CAAClR,OAAO,CAAC,UAAA0H,IAAA,EAAqB;UAAA,IAAA6J,qBAAA;UAAA,IAAlBD,OAAO,GAAA5J,IAAA,CAAP4J,OAAO;YAAEjC,IAAI,GAAA3H,IAAA,CAAJ2H,IAAI;UAC7B,CAAAkC,qBAAA,GAAAhD,QAAkB,CAAC+C,OAAO,CAAC,cAAAC,qBAAA,eAA3BA,qBAAA,CAA6B3N,IAAI,CAAC+M,MAAI,EAAEtB,IAAI,CAAC;QACjD,CAAC,CAAC;QACFoB,qBAAA,CAAK5B,WAAW,EAAhB,IAAI,EAAe,IAAJ,CAAC;MACpB;IAAC;MAAArC,GAAA;MAAAxL,KAAA,EAED,SAAAwQ,yBAAyBvD,aAAa,EAAEwD,QAAQ,EAAEzB,QAAQ,EAAE;QACxD,IAAIyB,QAAQ,KAAKzB,QAAQ,EAAE;QAC3B,IAAI,CAAC,IAAI,CAAC0B,WAAW,EAAE;QAEvB,IAAIzD,aAAa,KAAK,KAAK,EAAE;UACzB,IAAMoC,IAAI,GAAG,IAAI,CAACsB,eAAe,GAAG,IAAI,CAACtB,IAAI,GAAG,IAAI;UACpD,IAAMuB,QAAQ,GAAG5B,QAAQ;UACzBK,IAAI,CAACC,GAAG,CAACsB,QAAQ,CAAC,GAAG,IAAI;QAC7B;QAEA,IAAI3D,aAAa,IAAI4B,qBAAA,CAAKf,uBAAuB,EAA5B,IAA2B,CAAC,EAAE;UAC/C+C,iBAAA,CAAA9C,sBAAA,MAAI,EAAC+C,yBAAwB,CAAC,CAAAlO,IAAA,CAA9B,IAAI,EAA2BqK,aAAa;QAChD;MACJ;;MAEA;MACA;MACA;IAAA;MAAAzB,GAAA;MAAAxL,KAAA,EACA,SAAA8I,SAAS5O,SAAS,EAA2B;QAAA,IAAzB6W,iBAAiB,GAAAtJ,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAC,KAAK;QACvC,IAAIwB,QAAQ;QACZ;QACA;QACA,IAAI+H,YAAY,GAAG,IAAI,CAACL,eAAe,IAAI,IAAI,CAACtB,IAAI,GAAG,IAAI,CAACA,IAAI,GAAG,IAAI;QACvE;QACA,IAAIrG,QAAQ;QACZ,IAAIgI,YAAY,IAAIA,YAAY,CAACrP,KAAK,EAAE;UAAA,IAAAsP,mBAAA;UACpCjI,QAAQ,IAAAiI,mBAAA,GAAGD,YAAY,CAACrP,KAAK,cAAAsP,mBAAA,uBAAlBA,mBAAA,CAAqB/W,SAAS,CAAC;QAC9C;QAEA,IAAIgX,WAAW,GAAG,KAAK;QACvB,OAAOlI,QAAQ,KAAK3F,SAAS,IAAI,OAAO2N,YAAY,CAAC3B,IAAI,KAAK,WAAW,IAAI2B,YAAY,CAAC3B,IAAI,KAAK,IAAI,EAAE;UAAA,IAAA8B,oBAAA;UACrGH,YAAY,GAAGA,YAAY,CAAC3B,IAAI;UAChCrG,QAAQ,IAAAmI,oBAAA,GAAGH,YAAY,CAACrP,KAAK,cAAAwP,oBAAA,uBAAlBA,oBAAA,CAAqBjX,SAAS,CAAC;QAC9C;QAEA,IAAI8O,QAAQ,KAAK3F,SAAS,EAAE4F,QAAQ,GAAG+H,YAAY,CAACrP,KAAK,CAAC,KACrD;UAAA,IAAAyP,YAAA;UACDF,WAAW,GAAGzD,QAAQ,CAAC1T,0BAA0B,CAAC,CAAC,CAAC;UACpDiP,QAAQ,IAAAoI,YAAA,GAAGF,WAAW,cAAAE,YAAA,uBAAXA,YAAA,CAAclX,SAAS,CAAC;UACnC,IAAI8O,QAAQ,KAAK3F,SAAS,EAAE4F,QAAQ,GAAGiI,WAAW;QACtD;QACA,IAAIH,iBAAiB,EAAE;UACnB,OAAO,CAAC/H,QAAQ,EAAEC,QAAQ,CAAC;QAC/B;QACA,OAAOD,QAAQ;MACnB;IAAC;MAAAwC,GAAA;MAAAxL,KAAA,EAED,SAAAqR,YAAYC,OAAO,EAAE;QACjB,IAAMjC,IAAI,GAAG,IAAI,CAACA,IAAI,IAAI,IAAI;QAC9B;QACA;QACA,IAAIkC,IAAI,GAAGlC,IAAI;QACf,IAAI5B,QAAQ,CAAC+D,aAAa,CAACC,SAAS,EAAE;UAClCF,IAAI,GAAGlC,IAAI,CAACqC,UAAU;QAC1B;QACA,OAAOrC,IAAI,CAACC,GAAG,CAACnM,cAAc,CAACmO,OAAO,CAAC,GAAGjC,IAAI,CAACC,GAAG,CAACgC,OAAO,CAAC,GAAGC,IAAI,CAACI,aAAa,WAAAxX,MAAA,CAAUmX,OAAO,QAAI,CAAC;MAC1G;;MAEA;MACA;MACA;MACA;MACA;IAAA;MAAA9F,GAAA;MAAAxL,KAAA,EACA,SAAA8M,eAAe5S,SAAS,EAAE;QACtBwP,YAAY,CAAC9G,IAAI,CAAC,IAAI,EAAE1I,SAAS,CAAC;MACtC;IAAC;MAAAsR,GAAA;MAAAxL,KAAA,EACD,SAAAqQ,oBAAoBpD,aAAa,EAAE2E,cAAc,EAAE;QAC/CA,cAAc,GAAGrN,MAAM,CAACqN,cAAc,CAAC;QACvC,IAAItI,UAAU,GAAGsI,cAAc;QAC/B;AACZ;AACA;AACA;AACA;AACA;;QAEY;QACA,IAAIA,cAAc,CAACnJ,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAACiI,WAAW,EAAG;UACxD,IAAIxW,SAAS,GAAG0X,cAAc,CAAChJ,SAAS,CAAC,CAAC,CAAC;UAC3CL,iBAAiB,CAAC3F,IAAI,CAAC,IAAI,EAAEqK,aAAa,EAAE/S,SAAS,CAAC;QAC1D;QACA;QAAA,KACK;UACD4J,YAAY,CAAClB,IAAI,CAAC,IAAI,EAAEqK,aAAa,EAAE3D,UAAU,CAAC;QACtD;MACJ;IAAC;EAAA,EArLyBkE,YAAY;EAwL1C;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAhBI,SAAAsD,0BAtJ8B7D,aAAa,EAAE;IACrC,IAAI+B,QAAQ,GAAG,IAAI,CAAC5B,YAAY,CAACH,aAAa,CAAC;IAC/C,IAAIxT,kBAAkB,CAAC2O,QAAQ,CAAC6E,aAAa,CAAC,EAAE;MAC5C,IAAI+B,QAAQ,KAAK,IAAI,EAAEA,QAAQ,GAAG,KAAK,CAAC,KACnCA,QAAQ,GAAG,IAAI;IACxB;IACA,IAAM9U,SAAS,GAAG2U,qBAAA,CAAKf,uBAAuB,EAA5B,IAA2B,CAAC,CAACb,aAAa,CAAC;IAC7D,IAAAtD,eAAA,GAA+B,IAAI,CAACb,QAAQ,CAAC5O,SAAS,EAAE,IAAI,CAAC;MAAA0P,eAAA,GAAAhD,6BAAA,CAAA+C,eAAA;MAAtDsF,UAAU,GAAArF,eAAA;MAAEX,QAAQ,GAAAW,eAAA;IAC3B,IAAIqF,UAAU,KAAKD,QAAQ,EAAE/F,QAAQ,CAAC/O,SAAS,CAAC,GAAG8U,QAAQ;EAC/D;EAACP,eAAA,CA3CCR,eAAe,wBAaW,CAAC,KAAK,CAAC,CACN9T,MAAM,CAACT,gCAAgC,CAAC,CACxCS,MAAM,CAACuN,MAAM,CAACmK,IAAI,CAACtE,QAAkB,CAAC,CAAC9G,GAAG,CAAC,UAAA6J,OAAO;IAAA,OAAK,GAAG,GAAGA,OAAO,CAACwB,WAAW,CAAC,CAAC;EAAA,CAAC,CAAC,CAAC;EA2LtH,OAAO7D,eAAe;AAC1B;;;AChNA,SAAS8D,oBAAoBA,CAACC,SAAS,EAAEC,cAAc,EAAE;EACrD,OAAO;IACHpS,GAAG,WAAAA,IAACqS,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;MAC5B,IAAI7H,kBAAA,CAAO4H,QAAQ,MAAK,QAAQ,EAAE,OAAOE,OAAO,CAACxS,GAAG,CAAAwM,KAAA,CAAXgG,OAAO,EAAQ5K,SAAS,CAAC;MAClExF,OAAO,CAACqQ,KAAK,aAAAnY,MAAA,CAAcgY,QAAQ,iBAAAhY,MAAA,CAAc6X,SAAS,CAAE,CAAC;MAC7D,IAAIG,QAAQ,KAAK,WAAW,EAAE;QAC1B;QACA,OAAOF,cAAc,CAACtP,SAAS;MACnC;MACA,IAAI,OAAOuP,MAAM,CAACC,QAAQ,CAAC,KAAK,UAAU,EAAE;QACxC,OAAO,IAAII,KAAK,CAACL,MAAM,CAACC,QAAQ,CAAC,EAAEK,sBAAsB,CAACL,QAAQ,KAAAhY,MAAA,CAAK6X,SAAS,OAAA7X,MAAA,CAAIgY,QAAQ,CAAE,CAAC,CAAC;MACpG,CAAC,MACI,IAAI5H,kBAAA,CAAO2H,MAAM,CAACC,QAAQ,CAAC,MAAK,QAAQ,EAAE;QAC3C,IAAI,CAACD,MAAM,CAACC,QAAQ,CAAC,CAAChP,cAAc,CAAC,eAAe,CAAC,EAAE;UACnD,OAAO,IAAIoP,KAAK,CAACL,MAAM,CAACC,QAAQ,CAAC,EAAEJ,oBAAoB,IAAA5X,MAAA,CAAI6X,SAAS,OAAA7X,MAAA,CAAIgY,QAAQ,CAAE,CAAC,CAAC;QACxF;MACJ;MACA,OAAOE,OAAO,CAACxS,GAAG,CAAAwM,KAAA,CAAXgG,OAAO,EAAQ5K,SAAS,CAAC;IACpC;EACJ,CAAC;AACL;AAEA,SAAS+K,sBAAsBA,CAACC,QAAQ,EAAET,SAAS,EAAE;EACjD,OAAO;IACHU,SAAS,WAAAA,UAACR,MAAM,EAAE7D,IAAI,EAAEsE,SAAS,EAAE;MAC/B1Q,OAAO,CAACqQ,KAAK,iBAAAnY,MAAA,CAAiBsY,QAAQ,CAAE,CAAC;MACzC,OAAOJ,OAAO,CAACK,SAAS,CAACR,MAAM,EAAE7D,IAAI,EAAEsE,SAAS,CAAC;IACrD,CAAC;IACDtG,KAAK,WAAAA,MAAC6F,MAAM,EAAEU,OAAO,EAAEC,aAAa,EAAE;MAClC5Q,OAAO,CAACqQ,KAAK,cAAAnY,MAAA,CAAcsY,QAAQ,uBAAAtY,MAAA,CAAoB0Y,aAAa,iBAAA1Y,MAAA,CAAc6X,SAAS,CAAE,CAAC;MAC9F,OAAOK,OAAO,CAAChG,KAAK,CAAAA,KAAA,CAAbgG,OAAO,EAAU5K,SAAS,CAAC;IACtC;EACJ,CAAC;AACL;AACO,SAASmE,oBAAoBA,CAACvE,GAAG,EAAEnD,IAAI,EAAE;EAC5C,OAAO,IAAIqO,KAAK,CAAClL,GAAG,EAAE0K,oBAAoB,CAAC7N,IAAI,EAAEmD,GAAG,CAAC,CAAC;AAC1D;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpC6C;AACc;AACN;AACG;AACf;AAAA,IAEnC2L,aAAa,0BAAAC,MAAA;EA2Ff;EACA;;EAEA;EACA;EACA,SAAAD,cAAYE,YAAY,EAAEC,iBAAiB,EAAEC,cAAc,EAAkD;IAAA,IAAA1R,KAAA;IAAA,IAAhD2R,qBAAqB,GAAA5L,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAC,KAAK;IAAA,IAAEgG,QAAQ,GAAAhG,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAGiG,MAAM;IAAAS,4BAAA,OAAA6E,aAAA;IACvG,IAAI,CAACtQ,KAAK,CAACgJ,OAAO,CAACwH,YAAY,CAAC,EAAE;MAC9B,MAAMvK,KAAK,CAAC,0DAA0D,CAAC;IAC3E;IAEA,IAAM2K,QAAQ,GAAGJ,YAAY;IAC7B,IAAIK,aAAa;IACjB,IAAI,CAACF,qBAAqB,EAAE;MACxBE,aAAa,GAAGD,QAAQ,CAAC7M,GAAG,CAAC,UAAC+M,IAAI,EAAEC,KAAK,EAAI;QACzC,IAAID,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAErQ,cAAc,CAAC,OAAO,CAAC,EAAE,OAAOqQ,IAAI;QAC9C,IAAI9Q,KAAK,CAACgJ,OAAO,CAAC8H,IAAI,CAAC,EAAE,OAAOA,IAAI,CAAC,CAAC;QACtC,IAAIjJ,oBAAA,CAAOiJ,IAAI,MAAK,QAAQ,EAAE,OAAO,IAAIV,iBAAY,CAACU,IAAI,EAAEJ,cAAc,EAAED,iBAAiB,CAAC/J,aAAa,EAAE,KAAK,EAAEqE,QAAQ,CAAC;QAC7H,OAAO+F,IAAI;MACf,CAAC,CAAC;IACN;IACA9R,KAAA,GAAA6M,uBAAA,OAAAyE,aAAA,EAAAzM,+BAAA,CAASgN,aAAa;IAxG1B;IAAA9E,4BAAA,CAAA/M,KAAA,qBACkB,IAAI3D,GAAG,CAAC,CAAC;IAyGvB2D,KAAA,CAAKyR,iBAAiB,GAAGA,iBAAiB;IAC1CzR,KAAA,CAAK0R,cAAc,GAAGA,cAAc;IACpC1R,KAAA,CAAK4R,QAAQ,GAAGA,QAAQ;IAExBC,aAAa,GAAG,IAAIhB,KAAK,CAAA7Q,KAAA,EAAOqR,oBAAoB,CAACI,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAE/J,aAAa,EAAEgK,cAAc,EAAE3F,QAAQ,CAAC,CAAC;IACjH,OAAAiG,uCAAA,CAAAhS,KAAA,EAAO6R,aAAa;EACxB;EAAC5E,sBAAA,CAAAqE,aAAA,EAAAC,MAAA;EAAA,OAAArE,yBAAA,CAAAoE,aAAA;IAAAxH,GAAA;IAAAxL,KAAA;IA7GD;IACA;IACA;IACA,SAAA2T,OAAA,EAAgB;MAAA,IAAAC,KAAA;MACZ,IAAI,CAACC,WAAW,GAAG,QAAQ;MAAC,SAAAzF,IAAA,GAAA3G,SAAA,CAAAhF,MAAA,EADtB4L,IAAI,OAAA3L,KAAA,CAAA0L,IAAA,GAAAE,IAAA,MAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA;QAAJD,IAAI,CAAAC,IAAA,IAAA7G,SAAA,CAAA6G,IAAA;MAAA;MAEV,IAAMwF,MAAM,IAAAF,KAAA,GAAAG,IAAA,CAAAC,4BAAA,CAAAhB,aAAA,CAAArQ,SAAA,oBAAAC,IAAA,CAAAyJ,KAAA,CAAAuH,KAAA,SAAAzZ,MAAA,CAAmBkU,IAAI,EAAC;MACpC,OAAO,IAAI,CAACwF,WAAW;MACvB,OAAOC,MAAM;IACjB;EAAC;IAAAtI,GAAA;IAAAxL,KAAA,EACD,SAAAiU,MAAA,EAAe;MAAA,IAAAC,KAAA;MACX,IAAI,CAACL,WAAW,GAAG,OAAO;MAAC,SAAAM,KAAA,GAAA1M,SAAA,CAAAhF,MAAA,EADtB4L,IAAI,OAAA3L,KAAA,CAAAyR,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;QAAJ/F,IAAI,CAAA+F,KAAA,IAAA3M,SAAA,CAAA2M,KAAA;MAAA;MAET,IAAMN,MAAM,IAAAI,KAAA,GAAAH,IAAA,CAAAC,4BAAA,CAAAhB,aAAA,CAAArQ,SAAA,mBAAAC,IAAA,CAAAyJ,KAAA,CAAA6H,KAAA,SAAA/Z,MAAA,CAAkBkU,IAAI,EAAC;MACnC,OAAO,IAAI,CAACwF,WAAW;MACvB,OAAOC,MAAM;IACjB;EAAC;IAAAtI,GAAA;IAAAxL,KAAA,EACD,SAAAqU,QAAA,EAAiB;MAAA,IAAAC,KAAA;MACb,IAAI,CAACT,WAAW,GAAG,QAAQ;MAAC,SAAAU,KAAA,GAAA9M,SAAA,CAAAhF,MAAA,EADrB4L,IAAI,OAAA3L,KAAA,CAAA6R,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;QAAJnG,IAAI,CAAAmG,KAAA,IAAA/M,SAAA,CAAA+M,KAAA;MAAA;MAEX,IAAMV,MAAM,IAAAQ,KAAA,GAAAP,IAAA,CAAAC,4BAAA,CAAAhB,aAAA,CAAArQ,SAAA,qBAAAC,IAAA,CAAAyJ,KAAA,CAAAiI,KAAA,SAAAna,MAAA,CAAoBkU,IAAI,EAAC;MACrC,OAAO,IAAI,CAACwF,WAAW;MACvB,OAAOC,MAAM;IACjB;EAAC;IAAAtI,GAAA;IAAAxL,KAAA,EAED,SAAAyU,KAAA,EAAc;MAAA,IAAAC,KAAA;MACV,IAAI,CAACb,WAAW,GAAG,MAAM;MAAC,SAAAc,KAAA,GAAAlN,SAAA,CAAAhF,MAAA,EADtB4L,IAAI,OAAA3L,KAAA,CAAAiS,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;QAAJvG,IAAI,CAAAuG,KAAA,IAAAnN,SAAA,CAAAmN,KAAA;MAAA;MAER,IAAMd,MAAM,IAAAY,KAAA,GAAAX,IAAA,CAAAC,4BAAA,CAAAhB,aAAA,CAAArQ,SAAA,kBAAAC,IAAA,CAAAyJ,KAAA,CAAAqI,KAAA,SAAAva,MAAA,CAAiBkU,IAAI,EAAC;MAClC,OAAO,IAAI,CAACwF,WAAW;MACvBrJ,iBAAiB,CAAC,IAAI,CAAC2I,iBAAiB,CAAC/J,aAAa,EAAE,IAAI,CAACgK,cAAc,CAAC;MAC5E,OAAOU,MAAM;IACjB;EAAC;IAAAtI,GAAA;IAAAxL,KAAA,EAED,SAAA6U,QAAA,EAAiB;MAAA,IAAAC,KAAA;MACb,IAAI,CAACjB,WAAW,GAAG,SAAS;MAAC,SAAAkB,KAAA,GAAAtN,SAAA,CAAAhF,MAAA,EADtB4L,IAAI,OAAA3L,KAAA,CAAAqS,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;QAAJ3G,IAAI,CAAA2G,KAAA,IAAAvN,SAAA,CAAAuN,KAAA;MAAA;MAEX,IAAMlB,MAAM,IAAAgB,KAAA,GAAAf,IAAA,CAAAC,4BAAA,CAAAhB,aAAA,CAAArQ,SAAA,qBAAAC,IAAA,CAAAyJ,KAAA,CAAAyI,KAAA,SAAA3a,MAAA,CAAoBkU,IAAI,EAAC;MACrC,OAAO,IAAI,CAACwF,WAAW;MACvBrJ,iBAAiB,CAAC,IAAI,CAAC2I,iBAAiB,CAAC/J,aAAa,EAAE,IAAI,CAACgK,cAAc,CAAC;MAC5E,OAAOU,MAAM;IACjB;EAAC;IAAAtI,GAAA;IAAAxL,KAAA,EAED,SAAAiV,KAAA,EAAc;MAAA,IAAAC,KAAA;MACV,IAAI,CAACrB,WAAW,GAAG,MAAM;MAAC,SAAAsB,KAAA,GAAA1N,SAAA,CAAAhF,MAAA,EADtB4L,IAAI,OAAA3L,KAAA,CAAAyS,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;QAAJ/G,IAAI,CAAA+G,KAAA,IAAA3N,SAAA,CAAA2N,KAAA;MAAA;MAER,IAAMtB,MAAM,IAAAoB,KAAA,GAAAnB,IAAA,CAAAC,4BAAA,CAAAhB,aAAA,CAAArQ,SAAA,kBAAAC,IAAA,CAAAyJ,KAAA,CAAA6I,KAAA,SAAA/a,MAAA,CAAiBkU,IAAI,EAAC;MAClC,OAAO,IAAI,CAACwF,WAAW;MACvBrJ,iBAAiB,CAAC,IAAI,CAAC2I,iBAAiB,CAAC/J,aAAa,EAAE,IAAI,CAACgK,cAAc,CAAC;MAC5E,OAAOU,MAAM;IACjB;EAAC;IAAAtI,GAAA;IAAAxL,KAAA,EAED,SAAAqV,WAAA,EAAoB;MAAA,IAAAC,KAAA;MAChB,IAAI,CAACzB,WAAW,GAAG,YAAY;MAAC,SAAA0B,KAAA,GAAA9N,SAAA,CAAAhF,MAAA,EADtB4L,IAAI,OAAA3L,KAAA,CAAA6S,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;QAAJnH,IAAI,CAAAmH,KAAA,IAAA/N,SAAA,CAAA+N,KAAA;MAAA;MAEd,IAAM1B,MAAM,IAAAwB,KAAA,GAAAvB,IAAA,CAAAC,4BAAA,CAAAhB,aAAA,CAAArQ,SAAA,kBAAAC,IAAA,CAAAyJ,KAAA,CAAAiJ,KAAA,SAAAnb,MAAA,CAAiBkU,IAAI,EAAC;MAClC,OAAO,IAAI,CAACwF,WAAW;MACvBrJ,iBAAiB,CAAC,IAAI,CAAC2I,iBAAiB,CAAC/J,aAAa,EAAE,IAAI,CAACgK,cAAc,CAAC;MAC5E,OAAOU,MAAM;IACjB;EAAC;IAAAtI,GAAA;IAAAxL,KAAA,EAED,SAAAyV,MAAA,EAAe;MAAA,IAAAC,KAAA;MACX,IAAI,CAAC7B,WAAW,GAAG,OAAO;MAAC,SAAA8B,KAAA,GAAAlO,SAAA,CAAAhF,MAAA,EADtB4L,IAAI,OAAA3L,KAAA,CAAAiT,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;QAAJvH,IAAI,CAAAuH,KAAA,IAAAnO,SAAA,CAAAmO,KAAA;MAAA;MAET,IAAM9B,MAAM,IAAA4B,KAAA,GAAA3B,IAAA,CAAAC,4BAAA,CAAAhB,aAAA,CAAArQ,SAAA,mBAAAC,IAAA,CAAAyJ,KAAA,CAAAqJ,KAAA,SAAAvb,MAAA,CAAkBkU,IAAI,EAAC;MACnC,OAAO,IAAI,CAACwF,WAAW;MACvB,OAAOC,MAAM;IACjB;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EAPI;IAAAtI,GAAA;IAAAxL,KAAA,EAQA,SAAA6V,QAAA,EAAU;MACN,IAAI,CAAChC,WAAW,GAAG,SAAS;MAC5B;AACR;AACA;AACA;AACA;AACA;MACQ,IAAMC,MAAM,GAAG,IAAI,CAACR,QAAQ;MAC5B,OAAO,IAAI,CAACO,WAAW;MACvB,OAAOC,MAAM;IACjB;EAAC;IAAAtI,GAAA,EAvFWsK,MAAM,CAACC,OAAO;IAAAlW,GAAA;IAD1B;IACA,SAAAA,IAAA,EAA8B;MAC1B,OAAO6C,KAAK;IAChB;EAAC;AAAA,gBAAAsT,gBAAA,CALuBtT,KAAK;AA0HjC,IAAIjF,UAAU,EAAE;EACZuV,aAAa,GAAGpH,oBAAoB,CAACoH,aAAa,EAAE,eAAe,CAAC;AACxE;AAEA,yDAAeA,aAAa;;;ACpIiB;AACQ;AACN;AACoB;AAE5D,IAAMD,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAYkD,kBAAkB,EAAE7C,cAAc,EAAqB;EAAA,IAAnB3F,QAAQ,GAAAhG,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAGiG,MAAM;EAC9F,OAAO;IACH9O,GAAG,WAAAA,IAACsX,WAAW,EAAE/D,QAAQ,EAAEnS,KAAK,EAAE;MAC9B;MACA,IAAImS,QAAQ,KAAK,QAAQ,EAAE;QACvB,IAAMgE,SAAS,GAAG9D,OAAO,CAACzT,GAAG,CAACsX,WAAW,EAAE/D,QAAQ,EAAEnS,KAAK,CAAC;QAC3DiW,kBAAkB,CAACG,YAAY,CAAChD,cAAc,CAAC;QAC/C;QACA,OAAO+C,SAAS;MACpB;;MAEA;MACA,IAAID,WAAW,CAAC/D,QAAQ,CAAC,KAAKnS,KAAK,EAAE,OAAO,IAAI;MAEhD,IAAMyT,KAAK,GAAG4C,MAAM,CAAClE,QAAQ,CAAC;MAC9B,IAAI,CAACmE,KAAK,CAAC7C,KAAK,CAAC,EAAE;QAAE;QACjB;QACA,IAAIlJ,qBAAA,CAAOvK,KAAK,MAAK,QAAQ,IAAK,CAACA,KAAK,CAACmD,cAAc,CAAC,eAAe,CAAC,IAAI,CAACnD,KAAK,CAACmD,cAAc,CAAC,OAAO,CAAE,EAAE;UACzGnD,KAAK,GAAG,IAAI8S,iBAAY,CAAC9S,KAAK,EAAEoT,cAAc,EAAE6C,kBAAkB,EAAE,KAAK,EAAExI,QAAQ,CAAC;QACxF;QACA;QACA;QACA,IAAIzN,KAAK,CAACmD,cAAc,CAAC,eAAe,CAAC,EAAE;UACvCnD,KAAK,GAAGA,KAAK,CAACoJ,aAAa;QAC/B;QACA;QACA;QACA,IAAI,CAAC8M,WAAW,CAAC/S,cAAc,CAAC,aAAa,CAAC,EAAE;UAC5C,IAAIoT,mBAAmB,GAAG,KAAK;UAC/B,IAAI9C,KAAK,GAAGyC,WAAW,CAACzT,MAAM,EAAE;YAC5B8T,mBAAmB,GAAG,IAAI;UAC9B;UACA,IAAMJ,UAAS,GAAG9D,OAAO,CAACzT,GAAG,CAACsX,WAAW,EAAE/D,QAAQ,EAAEnS,KAAK,CAAC;UAC3D;UACA;UACA;UACA,IAAIuW,mBAAmB,EAAE;YACrBN,kBAAkB,CAACG,YAAY,CAAChD,cAAc,CAAC;YAC/C;UACJ;UACA,OAAO+C,UAAS;QACpB;MACJ;MACA,OAAO9D,OAAO,CAACzT,GAAG,CAACsX,WAAW,EAAE/D,QAAQ,EAAEnS,KAAK,CAAC;IACpD,CAAC;IAEDH,GAAG,WAAAA,IAACqW,WAAW,EAAE/D,QAAQ,EAAEC,QAAQ,EAAE;MACjC;MACA;MACA,IAAMqB,KAAK,GAAG4C,MAAM,CAAClE,QAAQ,CAAC;MAC9B,IAAI,CAACmE,KAAK,CAAC7C,KAAK,CAAC,EAAE;QACf,IAAI,CAACyC,WAAW,CAACzC,KAAK,CAAC,EAAE,OAAOpQ,SAAS;QACzC,IAAI6S,WAAW,CAACzC,KAAK,CAAC,CAACtQ,cAAc,CAAC,OAAO,CAAC,EAAE,OAAO+S,WAAW,CAACzC,KAAK,CAAC,CAAC9R,KAAK;QAC/E;QACA,OAAOuU,WAAW,CAACzC,KAAK,CAAC;MAC7B;;MAEA;AACZ;AACA;AACA;AACA;AACA;AACA;;MAEY,OAAOpB,OAAO,CAACxS,GAAG,CAAAwM,KAAA,CAAXgG,OAAO,EAAQ5K,SAAS,CAAC;IACpC;EACJ,CAAC;AACL,CAAC;AAEM,IAAM+O,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAYC,YAAY,EAAEC,eAAe,EAAqB;EAAA,IAAnBjJ,QAAQ,GAAAhG,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAGiG,MAAM;EAC5F,OAAO;IACH/F,cAAc,WAAAA,eAACgP,SAAS,EAAExE,QAAQ,EAAEyE,UAAU,EAAE;MAC5C,IAAI,QAAOA,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAE5W,KAAK,MAAK,WAAW,EAAE;QAC1C,IAAMA,KAAK,GAAG4W,UAAU,CAAC5W,KAAK;QAC9B;QACA,IAAI0C,KAAK,CAACgJ,OAAO,CAAC1L,KAAK,CAAC,EAAE;UAAA,IAAA6W,OAAA;UACtB,IAAI,EAAC7W,KAAK,aAALA,KAAK,gBAAA6W,OAAA,GAAL7W,KAAK,CAAG,CAAC,CAAC,cAAA6W,OAAA,eAAVA,OAAA,CAAYzN,aAAa,GAAE;YAC5BwN,UAAU,CAAC5W,KAAK,GAAG,IAAIgT,kBAAa,CAAC4D,UAAU,CAAC5W,KAAK,EAAEyW,YAAY,EAAEC,eAAe,EAAE,KAAK,EAAEjJ,QAAQ,CAAC;UAC1G;QACJ,CAAC,MACI,IAAIlD,qBAAA,CAAOvK,KAAK,MAAK,QAAQ,EAAE;UAChC4W,UAAU,CAAC5W,KAAK,GAAG,IAAIuS,KAAK,CAACqE,UAAU,CAAC5W,KAAK,EAAEwW,uBAAuB,CAACC,YAAY,EAAEC,eAAe,EAAEjJ,QAAQ,CAAC,CAAC;QAEpH;MACJ,CAAC,MACI,IAAI,QAAOmJ,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAE/W,GAAG,MAAK,UAAU,EAAE;QAC5C+W,UAAU,CAAC/W,GAAG,CAAC+C,IAAI,CAAC+T,SAAS,CAAC;MAClC;MACA;MACA,IAAMG,oBAAoB,GAAGzE,OAAO,CAAC1K,cAAc,CAACgP,SAAS,EAAExE,QAAQ,EAAEyE,UAAU,CAAC;MACpF,IAAMnV,YAAY,GAAGgV,YAAY,CAACrN,aAAa;MAC/C3H,YAAY,CAAC2U,YAAY,CAACM,eAAe,CAAC;MAC1C;MACA,OAAOI,oBAAoB;IAC/B;EACJ,CAAC;AACL,CAAC;AACM,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAYC,QAAQ,EAAqB;EAAA,IAAnBvJ,QAAQ,GAAAhG,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAGiG,MAAM;EAC5D,OAAO;IACH/F,cAAc,WAAAA,eAACsP,WAAW,EAAE/c,SAAS,EAAE0c,UAAU,EAAE;MAAA,IAAAM,YAAA;MAC/C,IAAIrd,oBAAoB,CAACuO,QAAQ,CAAClO,SAAS,CAAC,KAAAgd,YAAA,GAAID,WAAW,cAAAC,YAAA,eAAXA,YAAA,CAAaC,QAAQ,EAAE;QACnE,OAAO9E,OAAO,CAAC1K,cAAc,CAAA0E,KAAA,CAAtBgG,OAAO,EAAmB5K,SAAS,CAAC;MAC/C;MACA,IAAM2P,eAAe,GAAGH,WAAW;MACnC,IAAMI,YAAY,GAAG,IAAI5W,GAAG,CAAC,CAAC;MAC9B;MACA,IAAIkK,YAAY;MAChBsM,WAAW,GAAG,IAAI1E,KAAK,CAAC0E,WAAW,EAAE;QACjCpX,GAAG,WAAAA,IAACqS,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;UAC5B,IAAID,QAAQ,KAAK,SAAS,EAAE;YACxBD,MAAM,CAACrH,OAAO,CAACyM,uBAAuB,GAAGpd,SAAS;YAClDgY,MAAM,CAACrH,OAAO,CAAC0M,kBAAkB,GAAGrF,MAAM,CAAC9I,aAAa;UAE5D;UACA,IAAIvP,oBAAoB,CAACuO,QAAQ,CAAC+J,QAAQ,CAAC,EAAE;YACzC,OAAOE,OAAO,CAACxS,GAAG,CAAAwM,KAAA,CAAXgG,OAAO,EAAQ5K,SAAS,CAAC;UACpC;UACA,IAAI/E,KAAK,CAACgJ,OAAO,CAACwG,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE;YACjCD,MAAM,CAACC,QAAQ,CAAC,CAACmF,uBAAuB,GAAGpd,SAAS;UACxD;UACAmd,YAAY,CAAC3W,GAAG,CAACyR,QAAQ,CAAC;UAC1B,OAAOE,OAAO,CAACxS,GAAG,CAAAwM,KAAA,CAAXgG,OAAO,EAAQ5K,SAAS,CAAC;QACpC;MACJ,CAAC,CAAC;MACF,IAAI,QAAOmP,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAE5W,KAAK,MAAK,WAAW,EAAE;QAC1C,IAAMA,KAAK,GAAG4W,UAAU,CAAC5W,KAAK;QAC9B;QACA,IAAI0C,KAAK,CAACgJ,OAAO,CAAC1L,KAAK,CAAC,EAAE;UAAA,IAAAwX,QAAA;UACtB;UACA,IAAItd,SAAS,CAACuO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;YACjC,IAAMgP,IAAI,GAAGzX,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAG,CAAC,CAAC;YACvB,IAAI,CAACyX,IAAI,EAAE,MAAM9O,KAAK,CAAC3O,cAAc,CAACC,iCAAiC,CAACC,SAAS,CAAC,CAAC;YACnF;YACA8F,KAAK,aAALA,KAAK,eAALA,KAAK,CAAG,CAAC,CAAC,CAAChB,OAAO,CAAC,UAAA0Y,OAAO,EAAG;cACzBL,YAAY,CAAC3W,GAAG,CAACgX,OAAO,CAAC;YAC7B,CAAC,CAAC;YACF;YACA,IAAI,CAAA1X,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAG,CAAC,CAAC,MAAK,IAAI,EAAE;cACrB2K,YAAY,GAAGzQ,SAAS,CAAC0O,SAAS,CAAC,CAAC,CAAC;cACrC,IAAMgC,IAAI,GAAG5K,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAG,CAAC,CAAC;cACvB,IAAI4K,IAAI,IAAI,OAAOA,IAAI,KAAK,UAAU,EAAE;gBACpCoM,QAAQ,CAACrM,YAAY,CAAC,GAAGC,IAAI,CAAChI,IAAI,CAACoU,QAAQ,CAAC;cAChD;YACJ,CAAC,MACI;cACD,IAAIhX,KAAK,aAALA,KAAK,eAALA,KAAK,CAAG,CAAC,CAAC,EAAE;gBACZgX,QAAQ,CAACrM,YAAY,CAAC,GAAG3K,KAAK,CAAC,CAAC,CAAC;cACrC;YACJ;UACJ,CAAC,MACI,IAAI,EAACA,KAAK,aAALA,KAAK,gBAAAwX,QAAA,GAALxX,KAAK,CAAG,CAAC,CAAC,cAAAwX,QAAA,eAAVA,QAAA,CAAYpO,aAAa,GAAE;YACjCwN,UAAU,CAAC5W,KAAK,GAAG,IAAIgT,kBAAa,CAAC4D,UAAU,CAAC5W,KAAK,EAAEgX,QAAQ,EAAE9c,SAAS,EAAE,KAAK,EAAEuT,QAAQ,CAAC;UAChG;QACJ,CAAC,MACI,IAAIlD,qBAAA,CAAOvK,KAAK,MAAK,QAAQ,EAAE;UAChC4W,UAAU,CAAC5W,KAAK,GAAG,IAAIuS,KAAK,CAACqE,UAAU,CAAC5W,KAAK,EAAEwW,uBAAuB,CAACQ,QAAQ,EAAE9c,SAAS,EAAEuT,QAAQ,CAAC,CAAC;QAC1G;MACJ,CAAC,MACI,IAAI,QAAOmJ,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAE/W,GAAG,MAAK,UAAU,EAAE;QAC5C+W,UAAU,CAAC/W,GAAG,CAAC+C,IAAI,CAACqU,WAAW,CAAC;MACpC;MAEA,IAAII,YAAY,CAACxY,IAAI,EAAE;QACnBwY,YAAY,CAACrY,OAAO,CAAC,UAAA2Y,GAAG;UAAA,OAAGX,QAAQ,CAAC5N,aAAa,CAACC,kBAAkB,CAACsO,GAAG,EAAEzd,SAAS,CAAC;QAAA,EAAC;MACzF;;MAEA;MACA,IAAM4c,oBAAoB,GAAGzE,OAAO,CAAC1K,cAAc,CAACyP,eAAe,EAAEld,SAAS,EAAE0c,UAAU,CAAC;MAC3F,IAAMnV,YAAY,GAAGuV,QAAQ,CAAC5N,aAAa;MAC3C,IAAIuB,YAAY,EAAEzQ,SAAS,GAAGyQ,YAAY;MAC1C,IAAI,CAACyM,eAAe,CAACjU,cAAc,CAAC,WAAW,CAAC,EAC5C1B,YAAY,CAAC2U,YAAY,CAAClc,SAAS,CAAC;MACpC;MACJ,OAAO4c,oBAAoB;IAC/B,CAAC;IACDjX,GAAG,WAAAA,IAACoX,WAAW,EAAE9E,QAAQ,EAAEC,QAAQ,EAAE;MACjC,IAAID,QAAQ,KAAK,gBAAgB,EAAE,OAAOE,OAAO,CAACxS,GAAG,CAAAwM,KAAA,CAAXgG,OAAO,EAAQ5K,SAAS,CAAC;MACnE;MACA,IAAI,CAACwP,WAAW,CAAC9T,cAAc,CAAC,SAAS,CAAC,EAAE;QACxC,IAAI8T,WAAW,CAAC9T,cAAc,CAAC,yBAAyB,CAAC,EAAE;UACvD8T,WAAW,CAAC7N,aAAa,CAACwO,wBAAwB,CAACzF,QAAQ,EAAE8E,WAAW,CAACK,uBAAuB,EAAEL,WAAW,CAACM,kBAAkB,CAAC;UACjI,OAAON,WAAW,CAACK,uBAAuB;UAC1C,OAAOL,WAAW,CAACM,kBAAkB;UACrC,OAAOlF,OAAO,CAACxS,GAAG,CAAAwM,KAAA,CAAXgG,OAAO,EAAQ5K,SAAS,CAAC;QACpC;MACJ;MACA;MACA;MACA,IAAI,QAAO0K,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAE1J,OAAO,MAAK,UAAU,IAAI,CAAA0J,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAE1J,OAAO,CAAC,GAAG,CAAC,MAAK,CAAC,EAAE;QACzE,IAAMoP,gBAAgB,GAAG1F,QAAQ,CAACvJ,SAAS,CAAC,CAAC,CAAC;QAC9C,IAAIqO,WAAW,CAAC9T,cAAc,CAAC0U,gBAAgB,CAAC,EAAE;UAC9C,OAAO,CAACZ,WAAW,CAACY,gBAAgB,CAAC;QACzC;MACJ;MACA,OAAOxF,OAAO,CAACxS,GAAG,CAAAwM,KAAA,CAAXgG,OAAO,EAAQ5K,SAAS,CAAC;IACpC;EACJ,CAAC;AACL,CAAC;;;;;;;;;;;;;;;;;;;;AC3MmF;AACjC;AACM;AACD;AACf;AACW;;AAEpD;AACA;AAAA,IAAAqQ,wBAAA,oBAAAlK,OAAA;AAAA,IACMkF,YAAY;EAuDd,SAAAA,aAAY3H,YAAY,EAAE4M,eAAe,EAAE9B,kBAAkB,EAAqC;IAAA,IAAAvU,KAAA;IAAA,IAAnCsW,QAAQ,GAAAvQ,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAG,KAAK;IAAA,IAAEgG,QAAQ,GAAAhG,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAACiG,MAAM;IAAAS,2BAAA,OAAA2E,YAAA;IArDhG;IACA;IAAArE,2BAAA,uBACe,CAAC,CAAC;IACjB;IAAAA,2BAAA,gBACQ,CAAC,CAAC;IAEV;IACA;IAAAA,2BAAA,yBACiB,CAAC,CAAC;IACnB;IACA;IACA;IAAAA,2BAAA,4BACoB,CAAC,CAAC;IAAAA,2BAAA,yCACW,CAAC,CAAC;IAEnC;IACA;IAAAA,2BAAA,qBACa,CAAC,CAAC;IAEf;IAAAA,2BAAA;IAAAA,2BAAA;IAGA;IACA;IACA;IACA;IAAAA,2BAAA,qBAEa,IAAIhO,GAAG,CAAC,CAAC;IAEtBiO,sCAAA,OAAAoJ,wBAAwB,EAAG,IAAI;IAyB3B,IAAI,CAACC,eAAe,GAAGA,eAAe;IACtC,IAAI,CAAC9B,kBAAkB,GAAGA,kBAAkB;;IAE5C;IACA7O,iBAAiB,CAAC,IAAI,CAACzF,KAAK,EAAE,eAAe,EAAE,IAAI,EAAE,IAAI,CAAC;;IAE1D;IACA,IAAI,CAACA,KAAK,GAAG,IAAI4Q,KAAK,CAAC,IAAI,CAAC5Q,KAAK,EAAEoV,YAAY,CAAC,IAAI,CAACpV,KAAK,EAAE8L,QAAQ,CAAC,CAAC;IACtE,IAAI,CAACuK,QAAQ,EAAE5Q,iBAAiB,CAAC,IAAI,CAACzF,KAAK,EAAE,SAAS,EAAE8L,QAAQ,CAAC1T,0BAA0B,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,KACjG;MACD;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,IAAI,CAAC+Q,uBAAuB,GAAG,CAAC,CAAC;MACjC,IAAI,CAAC8M,wBAAwB,GAAG,UAAC1d,SAAS,EAAEwQ,YAAY,EAAEjJ,YAAY,EAAI;QACtE,IAAI,CAACC,KAAI,CAACoJ,uBAAuB,CAAC3H,cAAc,CAACjJ,SAAS,CAAC,EAAE;UACzDwH,KAAI,CAACoJ,uBAAuB,CAAC5Q,SAAS,CAAC,GAAG,IAAI6D,GAAG,CAAC,CAAC;QACvD;QACA,IAAI,CAAC2D,KAAI,CAACoJ,uBAAuB,CAAC5Q,SAAS,CAAC,CAACwF,GAAG,CAAC+B,YAAY,CAAC,EAAE;UAC5DC,KAAI,CAACoJ,uBAAuB,CAAC5Q,SAAS,CAAC,CAAC0E,GAAG,CAAC6C,YAAY,EAAE,IAAIhB,GAAG,CAAC,CAAC,CAAC;QACxE;QACAiB,KAAI,CAACoJ,uBAAuB,CAAC5Q,SAAS,CAAC,CAAC2F,GAAG,CAAC4B,YAAY,CAAC,CAACf,GAAG,CAACgK,YAAY,CAAC;MAC/E,CAAC;IACL;IACA,IAAIS,YAAY,EAAE;MACdD,6BAA6B,CAAC,IAAI,CAACvJ,KAAK,EAAEwJ,YAAY,CAAC;IAC3D;EACJ;EAAC,OAAAyD,wBAAA,CAAAkE,YAAA;IAAAtH,GAAA;IAAAxL,KAAA,EAxDD,SAAAoW,aAAa6B,IAAI,EAAE;MAAA,IAAAtI,MAAA;MACf,IAAI,CAACuI,UAAU,CAACxX,GAAG,CAACuX,IAAI,CAAC;MACzB,IAAIpJ,iCAAA,CAAKiJ,wBAAwB,EAA7B,IAA4B,CAAC,EAAE;QAC/BhZ,oBAAoB,CAAC+P,iCAAA,CAAKiJ,wBAAwB,EAA7B,IAA4B,CAAC,CAAC;QACnD;MAEJ;MACArI,iCAAA,CAAKqI,wBAAwB,EAA7B,IAAI,EAA4B/Y,qBAAqB,CAAC,YAAK;QACvD0Q,iCAAA,CAAKqI,wBAAwB,EAA7BnI,MAAI,EAA4B,IAAJ,CAAC;QAC7B,IAAIA,MAAI,CAACuI,UAAU,CAACrZ,IAAI,GAAG,CAAC,EAAE;UAC1B8Q,MAAI,CAACwI,kBAAkB,CAAC,CAAC;QAC7B;MACJ,CAAC,CAL2B,CAAC;IAMjC;EAAC;IAAA3M,GAAA;IAAAxL,KAAA,EAED,SAAAmY,mBAAA,EAAqB;MAAA,IAAAC,MAAA;MACjBnW,OAAO,CAACC,GAAG,CAAE,4BAA4B,EAAE,IAAI,CAAC;MAChD,IAAMmW,UAAU,GAAA9R,8BAAA,CAAO,IAAI,CAAC2R,UAAU,CAAC;MACvC,IAAI,CAACA,UAAU,CAACI,KAAK,CAAC,CAAC;MACvBD,UAAU,CAACrZ,OAAO,CAAC,UAAAiZ,IAAI,EAAG;QACtBzN,iBAAiB,CAAC4N,MAAI,EAAEH,IAAI,CAAC;MACjC,CAAC,CAAC;IACN;EAAC;IAAAzM,GAAA;IAAAxL,KAAA,EAoCD,SAAAqJ,mBAAmBnP,SAAS,EAAEwQ,YAAY,EAAE;MACxC,IAAI,CAAC,IAAI,CAACD,iBAAiB,CAACtH,cAAc,CAACjJ,SAAS,CAAC,EAAE;QACnD,IAAI,CAACuQ,iBAAiB,CAACvQ,SAAS,CAAC,GAAG,IAAIuG,GAAG,CAAC,CAAC;MACjD;MACA,IAAI,CAACgK,iBAAiB,CAACvQ,SAAS,CAAC,CAACwG,GAAG,CAACgK,YAAY,CAAC;IACvD;EAAC;IAAAc,GAAA;IAAAxL,KAAA,EAED,SAAA4M,YAAY1S,SAAS,EAAEiI,iBAAiB,EAAEC,aAAa,EAAE;MACrD,IAAI,CAAC,IAAI,CAACN,cAAc,CAACqB,cAAc,CAACjJ,SAAS,CAAC,EAAE;QAChD,IAAI,CAAC4H,cAAc,CAAC5H,SAAS,CAAC,GAAG,IAAI6D,GAAG,CAAC,CAAC;MAC9C;MACA,IAAI,CAAC+D,cAAc,CAAC5H,SAAS,CAAC,CAAC0E,GAAG,CAACwD,aAAa,EAAED,iBAAiB,CAAC;IACxE;EAAC;IAAAqJ,GAAA;IAAAxL,KAAA,EAGD,SAAAuY,kCAAkCre,SAAS,EAAEI,OAAO,EAAE;MAAA,IAAAke,aAAA;MAClD,IAAI,CAAC,IAAI,CAACzW,8BAA8B,CAACoB,cAAc,CAACjJ,SAAS,CAAC,EAAC;QAC/D,IAAI,CAAC6H,8BAA8B,CAAC7H,SAAS,CAAC,GAAG,IAAIuG,GAAG,CAAC,CAAC;MAC9D;MACAnG,OAAO,CAACme,qBAAqB,GAAGne,OAAO,CAAC8H,aAAa,MAAAoW,aAAA,GAAIle,OAAO,CAAC+U,IAAI,cAAAmJ,aAAA,uBAAZA,aAAA,CAAc9G,UAAU;MACjF,IAAI,CAAC3P,8BAA8B,CAAC7H,SAAS,CAAC,CAACwG,GAAG,CAACpG,OAAO,CAAC;IAC/D;;IAGA;EAAA;IAAAkR,GAAA;IAAAxL,KAAA,EACA,SAAAyJ,aAAavP,SAAS,EAAEwe,SAAS,EAA4B;MAAA,IAA1BC,kBAAkB,GAAAlR,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAC,KAAK;MACvD,IAAI,CAAC,IAAI,CAAC7F,UAAU,CAACuB,cAAc,CAACjJ,SAAS,CAAC,EAAE;QAC5C,IAAI,CAAC0H,UAAU,CAAC1H,SAAS,CAAC,GAAG,IAAIuG,GAAG,CAAC,CAAC;QACtC,IAAI,CAACmY,uBAAuB,CAAC1e,SAAS,EAAEye,kBAAkB,CAAC;MAC/D;MACA,IAAI,CAAC/W,UAAU,CAAC1H,SAAS,CAAC,CAACwG,GAAG,CAACgY,SAAS,CAAC;IAC7C;EAAC;IAAAlN,GAAA;IAAAxL,KAAA,EACD,SAAA4Y,wBAAwB1e,SAAS,EAAE;MAC/B,IAAI8c,QAAQ,GAAG,IAAI,CAACrV,KAAK;MACzB,IAAIwH,iBAAiB,GAAGjP,SAAS;MACjC,IAAM2e,cAAc,GAAG3e,SAAS,CAACuO,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;MACnD,IAAIoQ,cAAc,EAAE;QAChB1P,iBAAiB,GAAGjP,SAAS,CAAC0O,SAAS,CAAC,CAAC,CAAC;MAC9C;MACA,IAAIgO,UAAU,GAAGlP,MAAM,CAACoR,wBAAwB,CAAC9B,QAAQ,EAAE7N,iBAAiB,CAAC;MAC7E,IAAI,CAACyN,UAAU,EAAE;QACbI,QAAQ,GAAGA,QAAQ,CAACnM,OAAO;QAC3B+L,UAAU,GAAGlP,MAAM,CAACoR,wBAAwB,CAAC9B,QAAQ,EAAE7N,iBAAiB,CAAC;QACzE,IAAI,CAACyN,UAAU,EAAE;UACb,MAAMjO,KAAK,8BAAAxO,MAAA,CAA8BD,SAAS,mBAAAC,MAAA,CAAgBgP,iBAAiB,kBAAe,CAAC;QACvG;MACJ;MAEA6N,QAAQ,CAACG,QAAQ,GAAG,IAAI;;MAExB;MACA;MACA,IAAM4B,WAAW,GAAGnC,UAAU,CAACzT,cAAc,CAAC,OAAO,CAAC;MACtD,IAAM1B,YAAY,GAAGuV,QAAQ,CAAC5N,aAAa;MAE3C,IAAIyP,cAAc,EAAE;QAChB,IAAMG,eAAe,GAAG9e,SAAS;QACjC,IAAI6e,WAAW,EAAE;UACb,IAAI,CAACtX,YAAY,CAACwX,YAAY,CAAC9V,cAAc,CAAC6V,eAAe,CAAC,EAAE;YAC5DtR,MAAM,CAACC,cAAc,CAACqP,QAAQ,EAAEgC,eAAe,EAAE;cAC7CnZ,GAAG,WAAAA,IAAA,EAAG;gBACF,OAAO,CAAC4B,YAAY,CAACwX,YAAY,CAAC9P,iBAAiB,CAAC;cACxD,CAAC;cACDvK,GAAG,WAAAA,IAAA,EAAG;gBACF,MAAM+J,KAAK,CAAC,gDAAgD,CAAC;cACjE,CAAC;cACDnB,UAAU,EAAE;YAChB,CAAC,CAAC;YACF/F,YAAY,CAAC4H,kBAAkB,CAACF,iBAAiB,EAAE6P,eAAe,CAAC;UACvE;QACJ,CAAC,MACI;UACD,IAAI,CAACvX,YAAY,CAACE,KAAK,CAACwB,cAAc,CAAC6V,eAAe,CAAC,EAAE;YACrDtR,MAAM,CAACC,cAAc,CAACqP,QAAQ,EAAEgC,eAAe,EAAE;cAC7CnZ,GAAG,WAAAA,IAAA,EAAG;gBACF,OAAO,CAAC4B,YAAY,CAACE,KAAK,CAACwH,iBAAiB,CAAC;cACjD,CAAC;cACDvK,GAAG,WAAAA,IAAA,EAAG;gBACF,MAAM+J,KAAK,CAAC,gDAAgD,CAAC;cACjE,CAAC;cACDnB,UAAU,EAAE;YAChB,CAAC,CAAC;YACF/F,YAAY,CAAC4H,kBAAkB,CAACF,iBAAiB,EAAE6P,eAAe,CAAC;UACvE;QACJ;MACJ,CAAC,MACI;QACD,IAAID,WAAW,EAAE;UACb,IAAI,CAACtX,YAAY,CAACwX,YAAY,CAAC9V,cAAc,CAACjJ,SAAS,CAAC,EAAE;YACtDuH,YAAY,CAACwX,YAAY,CAAC/e,SAAS,CAAC,GAAG8c,QAAQ,CAAC9c,SAAS,CAAC;UAC9D;UACAwN,MAAM,CAACC,cAAc,CAACqP,QAAQ,EAAE9c,SAAS,EAAE;YACvC0E,GAAG,WAAAA,IAACoB,KAAK,EAAE;cACP,IAAMkZ,UAAU,GAAGzX,YAAY,CAACwX,YAAY,CAAC/e,SAAS,CAAC;cACvD,IAAI8F,KAAK,KAAKkZ,UAAU,EAAE;cAC1B;cACAzX,YAAY,CAACwX,YAAY,CAAC/e,SAAS,CAAC,GAAG8F,KAAK;cAC5CwK,iBAAiB,CAAC/I,YAAY,EAAEvH,SAAS,CAAC;cAC1C;cACA,IAAIuH,YAAY,CAACwU,kBAAkB,EAAE;gBACjCzL,iBAAiB,CAAC/I,YAAY,CAACwU,kBAAkB,EAAExU,YAAY,CAACsW,eAAe,CAAC;cACpF;YACJ,CAAC;YACDlY,GAAG,WAAAA,IAAA,EAAG;cACF;cACA,OAAO4B,YAAY,CAACwX,YAAY,CAAC/e,SAAS,CAAC;YAC/C;UACJ,CAAC,CAAC;QACN;QACA;MACJ;MACA,OAAO,IAAI,CAACyH,KAAK,CAACwV,QAAQ;IAC9B;EAAC;AAAA;AAGL,IAAI1Z,UAAU,EAAE;EACZqV,YAAY,GAAGlH,oBAAoB,CAACkH,YAAY,EAAE,cAAc,CAAC;AACrE;AAEA,wDAAeA,YAAY;;;+CCzN3B,qJAAAqG,mBAAA,YAAAA,oBAAA,WAAAvT,CAAA,SAAAwT,CAAA,EAAAxT,CAAA,OAAAyT,CAAA,GAAA3R,MAAA,CAAA/E,SAAA,EAAAuC,CAAA,GAAAmU,CAAA,CAAAlW,cAAA,EAAAmW,CAAA,GAAA5R,MAAA,CAAAC,cAAA,cAAAyR,CAAA,EAAAxT,CAAA,EAAAyT,CAAA,IAAAD,CAAA,CAAAxT,CAAA,IAAAyT,CAAA,CAAArZ,KAAA,KAAAsD,CAAA,wBAAAwS,MAAA,GAAAA,MAAA,OAAAyD,CAAA,GAAAjW,CAAA,CAAAkW,QAAA,kBAAAC,CAAA,GAAAnW,CAAA,CAAAoW,aAAA,uBAAAC,CAAA,GAAArW,CAAA,CAAAsW,WAAA,8BAAAC,OAAAT,CAAA,EAAAxT,CAAA,EAAAyT,CAAA,WAAA3R,MAAA,CAAAC,cAAA,CAAAyR,CAAA,EAAAxT,CAAA,IAAA5F,KAAA,EAAAqZ,CAAA,EAAA7R,UAAA,MAAAI,YAAA,MAAAC,QAAA,SAAAuR,CAAA,CAAAxT,CAAA,WAAAiU,MAAA,mBAAAT,CAAA,IAAAS,MAAA,YAAAA,OAAAT,CAAA,EAAAxT,CAAA,EAAAyT,CAAA,WAAAD,CAAA,CAAAxT,CAAA,IAAAyT,CAAA,gBAAAS,KAAAV,CAAA,EAAAxT,CAAA,EAAAyT,CAAA,EAAAnU,CAAA,QAAA5B,CAAA,GAAAsC,CAAA,IAAAA,CAAA,CAAAjD,SAAA,YAAAoX,SAAA,GAAAnU,CAAA,GAAAmU,SAAA,EAAAR,CAAA,GAAA7R,MAAA,CAAAsS,MAAA,CAAA1W,CAAA,CAAAX,SAAA,GAAA8W,CAAA,OAAAQ,OAAA,CAAA/U,CAAA,gBAAAoU,CAAA,CAAAC,CAAA,eAAAvZ,KAAA,EAAAka,gBAAA,CAAAd,CAAA,EAAAC,CAAA,EAAAI,CAAA,MAAAF,CAAA,aAAAY,SAAAf,CAAA,EAAAxT,CAAA,EAAAyT,CAAA,mBAAAe,IAAA,YAAAC,GAAA,EAAAjB,CAAA,CAAAxW,IAAA,CAAAgD,CAAA,EAAAyT,CAAA,cAAAD,CAAA,aAAAgB,IAAA,WAAAC,GAAA,EAAAjB,CAAA,QAAAxT,CAAA,CAAAkU,IAAA,GAAAA,IAAA,MAAAQ,CAAA,qBAAAC,CAAA,qBAAA1U,CAAA,gBAAAZ,CAAA,gBAAAuV,CAAA,gBAAAT,UAAA,cAAAU,kBAAA,cAAAC,2BAAA,SAAAC,CAAA,OAAAd,MAAA,CAAAc,CAAA,EAAApB,CAAA,qCAAAqB,CAAA,GAAAlT,MAAA,CAAAmT,cAAA,EAAAC,CAAA,GAAAF,CAAA,IAAAA,CAAA,CAAAA,CAAA,CAAA7V,MAAA,QAAA+V,CAAA,IAAAA,CAAA,KAAAzB,CAAA,IAAAnU,CAAA,CAAAtC,IAAA,CAAAkY,CAAA,EAAAvB,CAAA,MAAAoB,CAAA,GAAAG,CAAA,OAAAC,CAAA,GAAAL,0BAAA,CAAA/X,SAAA,GAAAoX,SAAA,CAAApX,SAAA,GAAA+E,MAAA,CAAAsS,MAAA,CAAAW,CAAA,YAAAK,sBAAA5B,CAAA,gCAAApa,OAAA,WAAA4G,CAAA,IAAAiU,MAAA,CAAAT,CAAA,EAAAxT,CAAA,YAAAwT,CAAA,gBAAA6B,OAAA,CAAArV,CAAA,EAAAwT,CAAA,sBAAA8B,cAAA9B,CAAA,EAAAxT,CAAA,aAAAuV,OAAA9B,CAAA,EAAAC,CAAA,EAAAhW,CAAA,EAAAiW,CAAA,QAAAE,CAAA,GAAAU,QAAA,CAAAf,CAAA,CAAAC,CAAA,GAAAD,CAAA,EAAAE,CAAA,mBAAAG,CAAA,CAAAW,IAAA,QAAAT,CAAA,GAAAF,CAAA,CAAAY,GAAA,EAAAC,CAAA,GAAAX,CAAA,CAAA3Z,KAAA,SAAAsa,CAAA,gBAAA/P,YAAA,CAAA+P,CAAA,KAAApV,CAAA,CAAAtC,IAAA,CAAA0X,CAAA,eAAA1U,CAAA,CAAAwV,OAAA,CAAAd,CAAA,CAAAe,OAAA,EAAAC,IAAA,WAAAlC,CAAA,IAAA+B,MAAA,SAAA/B,CAAA,EAAA9V,CAAA,EAAAiW,CAAA,gBAAAH,CAAA,IAAA+B,MAAA,UAAA/B,CAAA,EAAA9V,CAAA,EAAAiW,CAAA,QAAA3T,CAAA,CAAAwV,OAAA,CAAAd,CAAA,EAAAgB,IAAA,WAAAlC,CAAA,IAAAO,CAAA,CAAA3Z,KAAA,GAAAoZ,CAAA,EAAA9V,CAAA,CAAAqW,CAAA,gBAAAP,CAAA,WAAA+B,MAAA,UAAA/B,CAAA,EAAA9V,CAAA,EAAAiW,CAAA,SAAAA,CAAA,CAAAE,CAAA,CAAAY,GAAA,SAAAhB,CAAA,EAAAC,CAAA,oBAAAtZ,KAAA,WAAAA,MAAAoZ,CAAA,EAAAlU,CAAA,aAAAqW,2BAAA,eAAA3V,CAAA,WAAAA,CAAA,EAAAyT,CAAA,IAAA8B,MAAA,CAAA/B,CAAA,EAAAlU,CAAA,EAAAU,CAAA,EAAAyT,CAAA,gBAAAA,CAAA,GAAAA,CAAA,GAAAA,CAAA,CAAAiC,IAAA,CAAAC,0BAAA,EAAAA,0BAAA,IAAAA,0BAAA,qBAAArB,iBAAAtU,CAAA,EAAAyT,CAAA,EAAAnU,CAAA,QAAAoU,CAAA,GAAAgB,CAAA,mBAAAhX,CAAA,EAAAiW,CAAA,QAAAD,CAAA,KAAAzT,CAAA,QAAA8C,KAAA,sCAAA2Q,CAAA,KAAArU,CAAA,oBAAA3B,CAAA,QAAAiW,CAAA,WAAAvZ,KAAA,EAAAoZ,CAAA,EAAAjU,IAAA,eAAAD,CAAA,CAAAsW,MAAA,GAAAlY,CAAA,EAAA4B,CAAA,CAAAmV,GAAA,GAAAd,CAAA,UAAAE,CAAA,GAAAvU,CAAA,CAAAuW,QAAA,MAAAhC,CAAA,QAAAE,CAAA,GAAA+B,mBAAA,CAAAjC,CAAA,EAAAvU,CAAA,OAAAyU,CAAA,QAAAA,CAAA,KAAAa,CAAA,mBAAAb,CAAA,qBAAAzU,CAAA,CAAAsW,MAAA,EAAAtW,CAAA,CAAAyW,IAAA,GAAAzW,CAAA,CAAA0W,KAAA,GAAA1W,CAAA,CAAAmV,GAAA,sBAAAnV,CAAA,CAAAsW,MAAA,QAAAlC,CAAA,KAAAgB,CAAA,QAAAhB,CAAA,GAAArU,CAAA,EAAAC,CAAA,CAAAmV,GAAA,EAAAnV,CAAA,CAAA2W,iBAAA,CAAA3W,CAAA,CAAAmV,GAAA,uBAAAnV,CAAA,CAAAsW,MAAA,IAAAtW,CAAA,CAAA4W,MAAA,WAAA5W,CAAA,CAAAmV,GAAA,GAAAf,CAAA,GAAAzT,CAAA,MAAA8U,CAAA,GAAAR,QAAA,CAAAvU,CAAA,EAAAyT,CAAA,EAAAnU,CAAA,oBAAAyV,CAAA,CAAAP,IAAA,QAAAd,CAAA,GAAApU,CAAA,CAAAC,IAAA,GAAAF,CAAA,GAAAsV,CAAA,EAAAI,CAAA,CAAAN,GAAA,KAAAG,CAAA,qBAAAxa,KAAA,EAAA2a,CAAA,CAAAN,GAAA,EAAAlV,IAAA,EAAAD,CAAA,CAAAC,IAAA,kBAAAwV,CAAA,CAAAP,IAAA,KAAAd,CAAA,GAAArU,CAAA,EAAAC,CAAA,CAAAsW,MAAA,YAAAtW,CAAA,CAAAmV,GAAA,GAAAM,CAAA,CAAAN,GAAA,mBAAAqB,oBAAA9V,CAAA,EAAAyT,CAAA,QAAAnU,CAAA,GAAAmU,CAAA,CAAAmC,MAAA,EAAAlC,CAAA,GAAA1T,CAAA,CAAA4T,QAAA,CAAAtU,CAAA,OAAAoU,CAAA,KAAAF,CAAA,SAAAC,CAAA,CAAAoC,QAAA,qBAAAvW,CAAA,IAAAU,CAAA,CAAA4T,QAAA,eAAAH,CAAA,CAAAmC,MAAA,aAAAnC,CAAA,CAAAgB,GAAA,GAAAjB,CAAA,EAAAsC,mBAAA,CAAA9V,CAAA,EAAAyT,CAAA,eAAAA,CAAA,CAAAmC,MAAA,kBAAAtW,CAAA,KAAAmU,CAAA,CAAAmC,MAAA,YAAAnC,CAAA,CAAAgB,GAAA,OAAA0B,SAAA,uCAAA7W,CAAA,iBAAAsV,CAAA,MAAAlX,CAAA,GAAA6W,QAAA,CAAAb,CAAA,EAAA1T,CAAA,CAAA4T,QAAA,EAAAH,CAAA,CAAAgB,GAAA,mBAAA/W,CAAA,CAAA8W,IAAA,SAAAf,CAAA,CAAAmC,MAAA,YAAAnC,CAAA,CAAAgB,GAAA,GAAA/W,CAAA,CAAA+W,GAAA,EAAAhB,CAAA,CAAAoC,QAAA,SAAAjB,CAAA,MAAAjB,CAAA,GAAAjW,CAAA,CAAA+W,GAAA,SAAAd,CAAA,GAAAA,CAAA,CAAApU,IAAA,IAAAkU,CAAA,CAAAzT,CAAA,CAAAoW,UAAA,IAAAzC,CAAA,CAAAvZ,KAAA,EAAAqZ,CAAA,CAAA4C,IAAA,GAAArW,CAAA,CAAAsW,OAAA,eAAA7C,CAAA,CAAAmC,MAAA,KAAAnC,CAAA,CAAAmC,MAAA,WAAAnC,CAAA,CAAAgB,GAAA,GAAAjB,CAAA,GAAAC,CAAA,CAAAoC,QAAA,SAAAjB,CAAA,IAAAjB,CAAA,IAAAF,CAAA,CAAAmC,MAAA,YAAAnC,CAAA,CAAAgB,GAAA,OAAA0B,SAAA,sCAAA1C,CAAA,CAAAoC,QAAA,SAAAjB,CAAA,cAAA2B,aAAA/C,CAAA,QAAAxT,CAAA,KAAAwW,MAAA,EAAAhD,CAAA,YAAAA,CAAA,KAAAxT,CAAA,CAAAyW,QAAA,GAAAjD,CAAA,WAAAA,CAAA,KAAAxT,CAAA,CAAA0W,UAAA,GAAAlD,CAAA,KAAAxT,CAAA,CAAA2W,QAAA,GAAAnD,CAAA,WAAAoD,UAAA,CAAArY,IAAA,CAAAyB,CAAA,cAAA6W,cAAArD,CAAA,QAAAxT,CAAA,GAAAwT,CAAA,CAAAsD,UAAA,QAAA9W,CAAA,CAAAwU,IAAA,oBAAAxU,CAAA,CAAAyU,GAAA,EAAAjB,CAAA,CAAAsD,UAAA,GAAA9W,CAAA,aAAAqU,QAAAb,CAAA,SAAAoD,UAAA,MAAAJ,MAAA,aAAAhD,CAAA,CAAApa,OAAA,CAAAmd,YAAA,cAAAQ,KAAA,iBAAA5X,OAAAa,CAAA,QAAAA,CAAA,WAAAA,CAAA,QAAAyT,CAAA,GAAAzT,CAAA,CAAA2T,CAAA,OAAAF,CAAA,SAAAA,CAAA,CAAAzW,IAAA,CAAAgD,CAAA,4BAAAA,CAAA,CAAAqW,IAAA,SAAArW,CAAA,OAAA0Q,KAAA,CAAA1Q,CAAA,CAAAnD,MAAA,SAAA6W,CAAA,OAAAhW,CAAA,YAAA2Y,KAAA,aAAA3C,CAAA,GAAA1T,CAAA,CAAAnD,MAAA,OAAAyC,CAAA,CAAAtC,IAAA,CAAAgD,CAAA,EAAA0T,CAAA,UAAA2C,IAAA,CAAAjc,KAAA,GAAA4F,CAAA,CAAA0T,CAAA,GAAA2C,IAAA,CAAA9W,IAAA,OAAA8W,IAAA,SAAAA,IAAA,CAAAjc,KAAA,GAAAoZ,CAAA,EAAA6C,IAAA,CAAA9W,IAAA,OAAA8W,IAAA,YAAA3Y,CAAA,CAAA2Y,IAAA,GAAA3Y,CAAA,gBAAAyY,SAAA,CAAAxR,YAAA,CAAA3E,CAAA,kCAAA6U,iBAAA,CAAA9X,SAAA,GAAA+X,0BAAA,EAAApB,CAAA,CAAAyB,CAAA,mBAAA/a,KAAA,EAAA0a,0BAAA,EAAA9S,YAAA,SAAA0R,CAAA,CAAAoB,0BAAA,mBAAA1a,KAAA,EAAAya,iBAAA,EAAA7S,YAAA,SAAA6S,iBAAA,CAAAmC,WAAA,GAAA/C,MAAA,CAAAa,0BAAA,EAAAf,CAAA,wBAAA/T,CAAA,CAAAiX,mBAAA,aAAAzD,CAAA,QAAAxT,CAAA,wBAAAwT,CAAA,IAAAA,CAAA,CAAA0D,WAAA,WAAAlX,CAAA,KAAAA,CAAA,KAAA6U,iBAAA,6BAAA7U,CAAA,CAAAgX,WAAA,IAAAhX,CAAA,CAAA1B,IAAA,OAAA0B,CAAA,CAAAmX,IAAA,aAAA3D,CAAA,WAAA1R,MAAA,CAAAsV,cAAA,GAAAtV,MAAA,CAAAsV,cAAA,CAAA5D,CAAA,EAAAsB,0BAAA,KAAAtB,CAAA,CAAA6D,SAAA,GAAAvC,0BAAA,EAAAb,MAAA,CAAAT,CAAA,EAAAO,CAAA,yBAAAP,CAAA,CAAAzW,SAAA,GAAA+E,MAAA,CAAAsS,MAAA,CAAAe,CAAA,GAAA3B,CAAA,KAAAxT,CAAA,CAAAsX,KAAA,aAAA9D,CAAA,aAAAiC,OAAA,EAAAjC,CAAA,OAAA4B,qBAAA,CAAAE,aAAA,CAAAvY,SAAA,GAAAkX,MAAA,CAAAqB,aAAA,CAAAvY,SAAA,EAAA8W,CAAA,iCAAA7T,CAAA,CAAAsV,aAAA,GAAAA,aAAA,EAAAtV,CAAA,CAAAuX,KAAA,aAAA/D,CAAA,EAAAC,CAAA,EAAAnU,CAAA,EAAAoU,CAAA,EAAAhW,CAAA,eAAAA,CAAA,KAAAA,CAAA,GAAA8Z,OAAA,OAAA7D,CAAA,OAAA2B,aAAA,CAAApB,IAAA,CAAAV,CAAA,EAAAC,CAAA,EAAAnU,CAAA,EAAAoU,CAAA,GAAAhW,CAAA,UAAAsC,CAAA,CAAAiX,mBAAA,CAAAxD,CAAA,IAAAE,CAAA,GAAAA,CAAA,CAAA0C,IAAA,GAAAX,IAAA,WAAAlC,CAAA,WAAAA,CAAA,CAAAjU,IAAA,GAAAiU,CAAA,CAAApZ,KAAA,GAAAuZ,CAAA,CAAA0C,IAAA,WAAAjB,qBAAA,CAAAD,CAAA,GAAAlB,MAAA,CAAAkB,CAAA,EAAApB,CAAA,gBAAAE,MAAA,CAAAkB,CAAA,EAAAxB,CAAA,iCAAAM,MAAA,CAAAkB,CAAA,6DAAAnV,CAAA,CAAAiM,IAAA,aAAAuH,CAAA,QAAAxT,CAAA,GAAA8B,MAAA,CAAA0R,CAAA,GAAAC,CAAA,gBAAAnU,CAAA,IAAAU,CAAA,EAAAyT,CAAA,CAAAlV,IAAA,CAAAe,CAAA,UAAAmU,CAAA,CAAAxE,OAAA,aAAAoH,KAAA,WAAA5C,CAAA,CAAA5W,MAAA,SAAA2W,CAAA,GAAAC,CAAA,CAAAgE,GAAA,QAAAjE,CAAA,IAAAxT,CAAA,SAAAqW,IAAA,CAAAjc,KAAA,GAAAoZ,CAAA,EAAA6C,IAAA,CAAA9W,IAAA,OAAA8W,IAAA,WAAAA,IAAA,CAAA9W,IAAA,OAAA8W,IAAA,QAAArW,CAAA,CAAAb,MAAA,GAAAA,MAAA,EAAAkV,OAAA,CAAAtX,SAAA,KAAAma,WAAA,EAAA7C,OAAA,EAAA0C,KAAA,WAAAA,MAAA/W,CAAA,aAAA0X,IAAA,WAAArB,IAAA,WAAAN,IAAA,QAAAC,KAAA,GAAAxC,CAAA,OAAAjU,IAAA,YAAAsW,QAAA,cAAAD,MAAA,gBAAAnB,GAAA,GAAAjB,CAAA,OAAAoD,UAAA,CAAAxd,OAAA,CAAAyd,aAAA,IAAA7W,CAAA,WAAAyT,CAAA,kBAAAA,CAAA,CAAAkE,MAAA,OAAArY,CAAA,CAAAtC,IAAA,OAAAyW,CAAA,MAAA/C,KAAA,EAAA+C,CAAA,CAAA5D,KAAA,cAAA4D,CAAA,IAAAD,CAAA,MAAAoE,IAAA,WAAAA,KAAA,SAAArY,IAAA,WAAAiU,CAAA,QAAAoD,UAAA,IAAAE,UAAA,kBAAAtD,CAAA,CAAAgB,IAAA,QAAAhB,CAAA,CAAAiB,GAAA,cAAAoD,IAAA,KAAA5B,iBAAA,WAAAA,kBAAAjW,CAAA,aAAAT,IAAA,QAAAS,CAAA,MAAAyT,CAAA,kBAAAqE,OAAAxY,CAAA,EAAAoU,CAAA,WAAAC,CAAA,CAAAa,IAAA,YAAAb,CAAA,CAAAc,GAAA,GAAAzU,CAAA,EAAAyT,CAAA,CAAA4C,IAAA,GAAA/W,CAAA,EAAAoU,CAAA,KAAAD,CAAA,CAAAmC,MAAA,WAAAnC,CAAA,CAAAgB,GAAA,GAAAjB,CAAA,KAAAE,CAAA,aAAAA,CAAA,QAAAkD,UAAA,CAAA/Z,MAAA,MAAA6W,CAAA,SAAAA,CAAA,QAAAhW,CAAA,QAAAkZ,UAAA,CAAAlD,CAAA,GAAAC,CAAA,GAAAjW,CAAA,CAAAoZ,UAAA,iBAAApZ,CAAA,CAAA8Y,MAAA,SAAAsB,MAAA,aAAApa,CAAA,CAAA8Y,MAAA,SAAAkB,IAAA,QAAA7D,CAAA,GAAAvU,CAAA,CAAAtC,IAAA,CAAAU,CAAA,eAAAqW,CAAA,GAAAzU,CAAA,CAAAtC,IAAA,CAAAU,CAAA,qBAAAmW,CAAA,IAAAE,CAAA,aAAA2D,IAAA,GAAAha,CAAA,CAAA+Y,QAAA,SAAAqB,MAAA,CAAApa,CAAA,CAAA+Y,QAAA,gBAAAiB,IAAA,GAAAha,CAAA,CAAAgZ,UAAA,SAAAoB,MAAA,CAAApa,CAAA,CAAAgZ,UAAA,cAAA7C,CAAA,aAAA6D,IAAA,GAAAha,CAAA,CAAA+Y,QAAA,SAAAqB,MAAA,CAAApa,CAAA,CAAA+Y,QAAA,qBAAA1C,CAAA,QAAAhR,KAAA,qDAAA2U,IAAA,GAAAha,CAAA,CAAAgZ,UAAA,SAAAoB,MAAA,CAAApa,CAAA,CAAAgZ,UAAA,YAAAR,MAAA,WAAAA,OAAA1C,CAAA,EAAAxT,CAAA,aAAAyT,CAAA,QAAAmD,UAAA,CAAA/Z,MAAA,MAAA4W,CAAA,SAAAA,CAAA,QAAAC,CAAA,QAAAkD,UAAA,CAAAnD,CAAA,OAAAC,CAAA,CAAA8C,MAAA,SAAAkB,IAAA,IAAApY,CAAA,CAAAtC,IAAA,CAAA0W,CAAA,wBAAAgE,IAAA,GAAAhE,CAAA,CAAAgD,UAAA,QAAAhZ,CAAA,GAAAgW,CAAA,aAAAhW,CAAA,iBAAA8V,CAAA,mBAAAA,CAAA,KAAA9V,CAAA,CAAA8Y,MAAA,IAAAxW,CAAA,IAAAA,CAAA,IAAAtC,CAAA,CAAAgZ,UAAA,KAAAhZ,CAAA,cAAAiW,CAAA,GAAAjW,CAAA,GAAAA,CAAA,CAAAoZ,UAAA,cAAAnD,CAAA,CAAAa,IAAA,GAAAhB,CAAA,EAAAG,CAAA,CAAAc,GAAA,GAAAzU,CAAA,EAAAtC,CAAA,SAAAkY,MAAA,gBAAAS,IAAA,GAAA3Y,CAAA,CAAAgZ,UAAA,EAAA9B,CAAA,SAAAmD,QAAA,CAAApE,CAAA,MAAAoE,QAAA,WAAAA,SAAAvE,CAAA,EAAAxT,CAAA,oBAAAwT,CAAA,CAAAgB,IAAA,QAAAhB,CAAA,CAAAiB,GAAA,qBAAAjB,CAAA,CAAAgB,IAAA,mBAAAhB,CAAA,CAAAgB,IAAA,QAAA6B,IAAA,GAAA7C,CAAA,CAAAiB,GAAA,gBAAAjB,CAAA,CAAAgB,IAAA,SAAAqD,IAAA,QAAApD,GAAA,GAAAjB,CAAA,CAAAiB,GAAA,OAAAmB,MAAA,kBAAAS,IAAA,yBAAA7C,CAAA,CAAAgB,IAAA,IAAAxU,CAAA,UAAAqW,IAAA,GAAArW,CAAA,GAAA4U,CAAA,KAAAoD,MAAA,WAAAA,OAAAxE,CAAA,aAAAxT,CAAA,QAAA4W,UAAA,CAAA/Z,MAAA,MAAAmD,CAAA,SAAAA,CAAA,QAAAyT,CAAA,QAAAmD,UAAA,CAAA5W,CAAA,OAAAyT,CAAA,CAAAiD,UAAA,KAAAlD,CAAA,cAAAuE,QAAA,CAAAtE,CAAA,CAAAqD,UAAA,EAAArD,CAAA,CAAAkD,QAAA,GAAAE,aAAA,CAAApD,CAAA,GAAAmB,CAAA,yBAAAqD,OAAAzE,CAAA,aAAAxT,CAAA,QAAA4W,UAAA,CAAA/Z,MAAA,MAAAmD,CAAA,SAAAA,CAAA,QAAAyT,CAAA,QAAAmD,UAAA,CAAA5W,CAAA,OAAAyT,CAAA,CAAA+C,MAAA,KAAAhD,CAAA,QAAAlU,CAAA,GAAAmU,CAAA,CAAAqD,UAAA,kBAAAxX,CAAA,CAAAkV,IAAA,QAAAd,CAAA,GAAApU,CAAA,CAAAmV,GAAA,EAAAoC,aAAA,CAAApD,CAAA,YAAAC,CAAA,YAAA3Q,KAAA,8BAAAmV,aAAA,WAAAA,cAAAlY,CAAA,EAAAyT,CAAA,EAAAnU,CAAA,gBAAAuW,QAAA,KAAAjC,QAAA,EAAAzU,MAAA,CAAAa,CAAA,GAAAoW,UAAA,EAAA3C,CAAA,EAAA6C,OAAA,EAAAhX,CAAA,oBAAAsW,MAAA,UAAAnB,GAAA,GAAAjB,CAAA,GAAAoB,CAAA,OAAA5U,CAAA;AAAA,SAAAmY,sBAAAA,CAAAnY,CAAA,EAAAyT,CAAA,aAAAD,CAAA,MAAAA,CAAA,GAAAC,CAAA,CAAA5W,MAAA,EAAA2W,CAAA,UAAAE,CAAA,GAAAD,CAAA,CAAAD,CAAA,GAAAE,CAAA,CAAA9R,UAAA,GAAA8R,CAAA,CAAA9R,UAAA,QAAA8R,CAAA,CAAA1R,YAAA,kBAAA0R,CAAA,KAAAA,CAAA,CAAAzR,QAAA,QAAAH,MAAA,CAAAC,cAAA,CAAA/B,CAAA,EAAAoY,mBAAA,CAAA1E,CAAA,CAAA9N,GAAA,GAAA8N,CAAA;AAAA,SAAA1K,iBAAAA,CAAAhJ,CAAA,EAAAyT,CAAA,EAAAD,CAAA,WAAAC,CAAA,IAAA0E,sBAAA,CAAAnY,CAAA,CAAAjD,SAAA,EAAA0W,CAAA,GAAAD,CAAA,IAAA2E,sBAAA,CAAAnY,CAAA,EAAAwT,CAAA,GAAA1R,MAAA,CAAAC,cAAA,CAAA/B,CAAA,iBAAAiC,QAAA,SAAAjC,CAAA;AAAA,SAAAoY,mBAAAA,CAAA5E,CAAA,QAAA9V,CAAA,GAAA2a,iBAAA,CAAA7E,CAAA,gCAAA7O,YAAA,CAAAjH,CAAA,IAAAA,CAAA,GAAAA,CAAA;AAAA,SAAA2a,iBAAAA,CAAA7E,CAAA,EAAAC,CAAA,oBAAA9O,YAAA,CAAA6O,CAAA,MAAAA,CAAA,SAAAA,CAAA,MAAAxT,CAAA,GAAAwT,CAAA,CAAAtD,MAAA,CAAAoI,WAAA,kBAAAtY,CAAA,QAAAtC,CAAA,GAAAsC,CAAA,CAAAhD,IAAA,CAAAwW,CAAA,EAAAC,CAAA,gCAAA9O,YAAA,CAAAjH,CAAA,UAAAA,CAAA,YAAAyY,SAAA,yEAAA1C,CAAA,GAAA9U,MAAA,GAAA8R,MAAA,EAAA+C,CAAA;AAAA,SAAAjL,oBAAAA,CAAAoL,CAAA,EAAArU,CAAA,UAAAqU,CAAA,YAAArU,CAAA,aAAA6W,SAAA;AAAA,SAAAxN,eAAAA,CAAA6K,CAAA,EAAAE,CAAA,EAAA1T,CAAA,WAAA0T,CAAA,GAAAtF,oBAAA,CAAAsF,CAAA,GAAA5F,+BAAA,CAAA0F,CAAA,EAAA+E,8BAAA,KAAA9L,OAAA,CAAAK,SAAA,CAAA4G,CAAA,EAAA1T,CAAA,QAAAoO,oBAAA,CAAAoF,CAAA,EAAA0D,WAAA,IAAAxD,CAAA,CAAAjN,KAAA,CAAA+M,CAAA,EAAAxT,CAAA;AAAA,SAAA8N,+BAAAA,CAAA0F,CAAA,EAAAxT,CAAA,QAAAA,CAAA,iBAAA2E,YAAA,CAAA3E,CAAA,0BAAAA,CAAA,UAAAA,CAAA,iBAAAA,CAAA,YAAAmW,SAAA,qEAAAqC,2BAAA,CAAAhF,CAAA;AAAA,SAAAgF,2BAAAA,CAAAxY,CAAA,mBAAAA,CAAA,YAAAyY,cAAA,sEAAAzY,CAAA;AAAA,SAAAuY,8BAAAA,CAAA,cAAA/E,CAAA,IAAAkF,OAAA,CAAA3b,SAAA,CAAA4b,OAAA,CAAA3b,IAAA,CAAAyP,OAAA,CAAAK,SAAA,CAAA4L,OAAA,iCAAAlF,CAAA,aAAA+E,8BAAA,YAAAA,0BAAA,aAAA/E,CAAA;AAAA,SAAApF,oBAAAA,CAAAoF,CAAA,WAAApF,oBAAA,GAAAtM,MAAA,CAAAsV,cAAA,GAAAtV,MAAA,CAAAmT,cAAA,CAAApP,IAAA,eAAA2N,CAAA,WAAAA,CAAA,CAAA6D,SAAA,IAAAvV,MAAA,CAAAmT,cAAA,CAAAzB,CAAA,MAAApF,oBAAA,CAAAoF,CAAA;AAAA,SAAAzK,cAAAA,CAAAyK,CAAA,EAAAxT,CAAA,6BAAAA,CAAA,aAAAA,CAAA,YAAAmW,SAAA,wDAAA3C,CAAA,CAAAzW,SAAA,GAAA+E,MAAA,CAAAsS,MAAA,CAAApU,CAAA,IAAAA,CAAA,CAAAjD,SAAA,IAAAma,WAAA,IAAA9c,KAAA,EAAAoZ,CAAA,EAAAvR,QAAA,MAAAD,YAAA,WAAAF,MAAA,CAAAC,cAAA,CAAAyR,CAAA,iBAAAvR,QAAA,SAAAjC,CAAA,IAAA4Y,oBAAA,CAAApF,CAAA,EAAAxT,CAAA;AAAA,SAAA4Y,oBAAAA,CAAApF,CAAA,EAAAxT,CAAA,WAAA4Y,oBAAA,GAAA9W,MAAA,CAAAsV,cAAA,GAAAtV,MAAA,CAAAsV,cAAA,CAAAvR,IAAA,eAAA2N,CAAA,EAAAxT,CAAA,WAAAwT,CAAA,CAAA6D,SAAA,GAAArX,CAAA,EAAAwT,CAAA,KAAAoF,oBAAA,CAAApF,CAAA,EAAAxT,CAAA;AAAA,SAAA6Y,mBAAAvZ,CAAA,EAAAkU,CAAA,EAAAxT,CAAA,EAAAyT,CAAA,EAAAC,CAAA,EAAAC,CAAA,EAAAE,CAAA,cAAAnW,CAAA,GAAA4B,CAAA,CAAAqU,CAAA,EAAAE,CAAA,GAAAE,CAAA,GAAArW,CAAA,CAAAtD,KAAA,WAAAkF,CAAA,gBAAAU,CAAA,CAAAV,CAAA,KAAA5B,CAAA,CAAA6B,IAAA,GAAAiU,CAAA,CAAAO,CAAA,IAAAyD,OAAA,CAAAhC,OAAA,CAAAzB,CAAA,EAAA2B,IAAA,CAAAjC,CAAA,EAAAC,CAAA;AAAA,SAAAoF,kBAAAxZ,CAAA,6BAAAkU,CAAA,SAAAxT,CAAA,GAAA6B,SAAA,aAAA2V,OAAA,WAAA/D,CAAA,EAAAC,CAAA,QAAAC,CAAA,GAAArU,CAAA,CAAAmH,KAAA,CAAA+M,CAAA,EAAAxT,CAAA,YAAA+Y,MAAAzZ,CAAA,IAAAuZ,kBAAA,CAAAlF,CAAA,EAAAF,CAAA,EAAAC,CAAA,EAAAqF,KAAA,EAAAC,MAAA,UAAA1Z,CAAA,cAAA0Z,OAAA1Z,CAAA,IAAAuZ,kBAAA,CAAAlF,CAAA,EAAAF,CAAA,EAAAC,CAAA,EAAAqF,KAAA,EAAAC,MAAA,WAAA1Z,CAAA,KAAAyZ,KAAA;AACA;AACA,6BAAe,eAASlR,QAAQ,EAAEoR,OAAO,EAAE;EAEvC;EAAA,SACeC,+BAA+BA,CAAAC,EAAA,EAAAC,GAAA,EAAAC,GAAA;IAAA,OAAAC,gCAAA,CAAA7S,KAAA,OAAA5E,SAAA;EAAA;EAAA,SAAAyX,iCAAA;IAAAA,gCAAA,GAAAR,iBAAA,eAAAvF,mBAAA,GAAA4D,IAAA,CAA9C,SAAAoC,QAA+CC,QAAQ,EAAEpV,QAAQ,EAAEqV,gBAAgB;MAAA,IAAAC,eAAA,EAAAC,KAAA,EAAAC,OAAA;MAAA,OAAArG,mBAAA,GAAAW,IAAA,UAAA2F,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAApC,IAAA,GAAAoC,QAAA,CAAAzD,IAAA;UAAA;YACzEqD,eAAe,GAAG3hB,QAAQ,CAACgiB,UAAU,CAACP,QAAQ,CAACQ,OAAO,EAAE,IAAI,CAAC;YAC7DL,KAAK,GAAGD,eAAe,CAAC3N,aAAa,CAAC,OAAO,CAAC;YACpD,IAAI4N,KAAK,EAAED,eAAe,CAAC5Z,WAAW,CAAC6Z,KAAK,CAAC;YACvCC,OAAO,GAAGF,eAAe,CAAC3N,aAAa,CAAC,QAAQ,CAAC;YACvD,IAAI6N,OAAO,EAAEF,eAAe,CAAC5Z,WAAW,CAAC8Z,OAAO,CAAC;YAEjDK,cAAc,CAAChG,MAAM,CACjB7P,QAAQ,yBAAA8V,qBAAA;cAEJ,SAAAC,OAAA,EAAc;gBAAA5R,oBAAA,OAAA4R,MAAA;gBAAA,OAAAxR,eAAA,OAAAwR,MAAA,GACJT,eAAe,EAAEE,OAAO,EAAED,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAE/a,WAAW,EAAE6a,gBAAgB;cACxE;cAAC1Q,cAAA,CAAAoR,MAAA,EAAAD,qBAAA;cAAA,OAAAlR,iBAAA,CAAAmR,MAAA;YAAA,EAHStS,QAAQ,CAACuS,qBAAqB,CAKhD,CAAC;UAAC;UAAA;YAAA,OAAAN,QAAA,CAAAlC,IAAA;QAAA;MAAA,GAAA2B,OAAA;IAAA,CACL;IAAA,OAAAD,gCAAA,CAAA7S,KAAA,OAAA5E,SAAA;EAAA;EAED,SAASwY,KAAKA,CAAA,EAAG;IACb,IAAIZ,gBAAgB;IACpB,IAAMa,WAAW,GAAGviB,QAAQ,CAACgU,aAAa,uBAAAxX,MAAA,CAAsB0kB,OAAO,QAAI,CAAC;IAC5E,IAAIqB,WAAW,EAAE;MACbb,gBAAgB,GAAG,IAAIc,aAAa,CAAC,CAAC;MACtCd,gBAAgB,CAACe,WAAW,CAACF,WAAW,CAAC1b,WAAW,CAAC;IACzD;IACA9B,KAAK,CAACC,SAAS,CAAC3D,OAAO,CAAC4D,IAAI,CAACjF,QAAQ,CAAC0iB,gBAAgB,mBAAAlmB,MAAA,CAAkB0kB,OAAO,QAAI,CAAC,EAAE,UAAAO,QAAQ,EAAI;MAC9FN,+BAA+B,CAACM,QAAQ,EAAEA,QAAQ,CAAChS,YAAY,CAAC,KAAK,CAAC,EAAEiS,gBAAgB,CAAC;IAC7F,CAAC,CAAC;IACF,IAAI,OAAOpX,UAAU,IAAA9N,MAAA,CAAI0kB,OAAO,cAAW,KAAK,UAAU,EAAE;MACxD,IAAMyB,qBAAqB,GAAGrY,UAAU,IAAA9N,MAAA,CAAI0kB,OAAO,cAAW;MAC9DyB,qBAAqB,CAAC1d,IAAI,CAAC6K,QAAQ,CAAC;IACxC;EACJ;EACAwS,KAAK,CAAC,CAAC;AACX;;;ACvCA;AACO,SAASpU,0BAA0BA,CAAC1D,SAAS,EAAE;EAClD,IAAIoY,UAAU,GAAGpY,SAAS;EAC1B,IAAIA,SAAS,KAAK,MAAM,EAAEoY,UAAU,GAAG,IAAI,CAAC,KACvC,IAAIpY,SAAS,KAAK,OAAO,EAAEoY,UAAU,GAAG,KAAK,CAAC,KAC9C,IAAI,CAACjK,KAAK,CAACD,MAAM,CAAClO,SAAS,CAAC,CAAC,EAAEoY,UAAU,GAAGlK,MAAM,CAAClO,SAAS,CAAC;EAClE,OAAOoY,UAAU;AACrB;;AAEA;AACO,SAASC,kBAAkBA,CAACC,QAAQ,EAAE;EACzC,IAAIlW,iBAAA,CAAOkW,QAAQ,MAAK,QAAQ,IAAIA,QAAQ,CAAC3D,WAAW,CAAC5Y,IAAI,KAAK,MAAM,EAAE,MAAMyE,KAAK,CAAC,6CAA6C,CAAC;EACpI,OAAO8X,QAAQ,CAACxZ,QAAQ,CAACwB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAIgY,QAAQ,CAACnc,SAAS,CAACmE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;AACxF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACb0D;AACT;AACM;;AAEvD;AACO,SAASiY,kBAAkBA,CAACC,WAAW,EAAEC,mBAAmB,EAAE;EACjE,IAAMC,MAAM,GAAAtW,yBAAA,CAAUoW,WAAW;EACjC,IAAIE,MAAM,KAAK,QAAQ,EAAE;IACrB,OAAOD,mBAAmB,KAAKD,WAAW;EAC9C,CAAC,MACI;IACD,IAAIA,WAAW,KAAK,QAAQ,EAAE,OAAO,IAAI;IACzC,IAAItiB,qBAAqB,CAAC+J,QAAQ,CAACuY,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE;MAChD,IAAMG,WAAW,GAAG,IAAIC,QAAQ,WAAA5mB,MAAA,CAAWymB,mBAAmB,EAAAzmB,MAAA,CAAGwmB,WAAW,CAAE,CAAC;MAC/E,OAAOG,WAAW,CAAC,CAAC;IACxB,CAAC,MACI;MACD,OAAOF,mBAAmB,KAAKD,WAAW;IAC9C;EACJ;AACJ;AAEO,SAASK,0BAA0BA,CAACC,oBAAoB,EAAE;EAAA,IAAAC,mBAAA,oBAAAtT,OAAA;EAAA,IAAAuT,UAAA,oBAAAvT,OAAA;EAAA,IAAAC,WAAA,oBAAAD,OAAA;EAAA,IACvDwT,kBAAkB,0BAAAC,qBAAA;IAAA,SAAAD,mBAAA;MAAA,IAAA1f,KAAA;MAAAyM,iCAAA,OAAAiT,kBAAA;MAAA,SAAAhT,IAAA,GAAA3G,SAAA,CAAAhF,MAAA,EAAA4L,IAAA,OAAA3L,KAAA,CAAA0L,IAAA,GAAAE,IAAA,MAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA;QAAAD,IAAA,CAAAC,IAAA,IAAA7G,SAAA,CAAA6G,IAAA;MAAA;MAAA5M,KAAA,GAAA6M,4BAAA,OAAA6S,kBAAA,KAAAjnB,MAAA,CAAAkU,IAAA;MAEpBK,4CAAA,CAAAhN,KAAA,EAAAwf,mBAAmB;MACnBxS,4CAAA,CAAAhN,KAAA,EAAAyf,UAAU;MACVzS,4CAAA,CAAAhN,KAAA,EAAAmM,WAAW,EAAG,KAAK;MAAA,OAAAnM,KAAA;IAAA;IAAAiN,2BAAA,CAAAyS,kBAAA,EAAAC,qBAAA;IAAA,OAAAzS,8BAAA,CAAAwS,kBAAA;MAAA5V,GAAA;MAAAxL,KAAA,EAEnB,SAAAyD,OAAA,EAA4B;QAAA,IAAAkM,MAAA;QAAA,IAArB2R,aAAa,GAAA7Z,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAC,KAAK;QACtB,IAAIwH,UAAU;QACd,IAAIJ,uCAAA,CAAKqS,mBAAmB,EAAxB,IAAuB,CAAC,CAACzY,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;UAC7CwG,UAAU,GAAG,IAAI,CAACI,IAAI,CAACjC,YAAY,CAACyB,uCAAA,CAAKqS,mBAAmB,EAAxB,IAAuB,CAAC,CAACtY,SAAS,CAAC,CAAC,CAAC,CAAC;QAC9E,CAAC,MACI;UACDqG,UAAU,GAAG,IAAI,CAACnG,QAAQ,CAAC+F,uCAAA,CAAKqS,mBAAmB,EAAxB,IAAuB,CAAC,CAAC;QACxD;QAEA,IAAIjS,UAAU,KAAK5L,SAAS,EAAE;UAC1B,MAAMsF,KAAK,oBAAAxO,MAAA,CAAoB0U,uCAAA,CAAKqS,mBAAmB,EAAxB,IAAuB,CAAC,6DAA0D,IAAI,CAAC;QAC1H;QACA,IAAMK,gBAAgB,GAAG,EAAE;QAE3B1S,uCAAA,CAAKsS,UAAU,EAAf,IAAc,CAAC,CAACniB,OAAO,CAAC,UAACmN,QAAQ,EAAEwU,WAAW,EAAI;UAC9C,IAAID,kBAAkB,CAACC,WAAW,EAAE1R,UAAU,CAAC,EAAE;YAC7CsS,gBAAgB,CAACpd,IAAI,CAAAkI,KAAA,CAArBkV,gBAAgB,EAAAhb,oCAAA,CAAS4F,QAAQ,EAAC;UACtC;QACJ,CAAC,CAAC;QAEF,IAAImV,aAAa,EAAE;UACf,IAAI,CAAClV,SAAS,GAAG,EAAE;UACnB,IAAI,CAAClL,MAAM,CAAAmL,KAAA,CAAX,IAAI,EAAWkV,gBAAgB,CAAC;QACpC,CAAC,MACI,IAAIA,gBAAgB,CAAC9e,MAAM,EAAE;UAC9BtD,sBAAsB,CAAC,IAAI,EAAE,YAAK;YAC9BwQ,MAAI,CAACvD,SAAS,GAAG,EAAE;YACnBuD,MAAI,CAACzO,MAAM,CAAAmL,KAAA,CAAXsD,MAAI,EAAW4R,gBAAgB,CAAC;UACpC,CAAC,CAAC;QACN;MACJ;IAAC;MAAA/V,GAAA;MAAAxL,KAAA,EACD,SAAA0P,kBAAA,EAAoB;QAChB,IAAI,CAACL,IAAI,GAAG,IAAI,CAACO,WAAW,CAAC,CAAC,CAACP,IAAI;QACnC,IAAI,CAAC,IAAI,CAACA,IAAI,EAAE;UACZ,MAAM1G,KAAK,CAAC,qHAAqH,CAAC;QACtI;QACA,IAAIkG,uCAAA,CAAKhB,WAAW,EAAhB,IAAe,CAAC,EAAE;QACtB,IAAM2T,uBAAuB,GAAG,IAAI,CAACpU,YAAY,CAAC,YAAY,CAAC;QAC/D,IAAI,CAACoU,uBAAuB,EAAE;UAC1B,MAAM7Y,KAAK,CAAC,sEAAsE,CAAC;QACvF;QACA,IAAI,CAAC,IAAI,CAACnG,QAAQ,IAAI,CAAC,IAAI,CAACA,QAAQ,CAACC,MAAM,EAAE;UACzC,MAAMkG,KAAK,CAAC,yCAAyC,CAAC;QAC1D;QAEA,IAAMuE,aAAa,GAAGsU,uBAAuB;QAC7C/R,uCAAA,CAAKyR,mBAAmB,EAAxB,IAAI,EAAuBhU,aAAJ,CAAC;QAExB,IAAMuU,iBAAiB,GAAG5S,uCAAA,CAAKqS,mBAAmB,EAAxB,IAAuB,CAAC,CAACzY,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;QACrE,IAAIwG,UAAU,EAAElF,WAAW;QAC3B,IAAI,CAAC0X,iBAAiB,EAAE;UAAA,IAAA5Y,cAAA,GACQ,IAAI,CAACC,QAAQ,CAACoE,aAAa,EAAE,IAAI,CAAC;UAAA,IAAAnE,eAAA,GAAAnC,gCAAA,CAAAiC,cAAA;UAA7DoG,UAAU,GAAAlG,eAAA;UAAEgB,WAAW,GAAAhB,eAAA;UACxB,IAAI,OAAOkG,UAAU,KAAK,WAAW,EAAE;YACnC,MAAMtG,KAAK,mBAAAxO,MAAA,CAAmB+S,aAAa,yCAAsC,CAAC;UACtF;QACJ;QACA,IAAMwU,SAAS,GAAG,IAAI3jB,GAAG,CAAC,CAAC;QAC3B2jB,SAAS,CAAC9iB,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC;QAC3B,IAAM4D,QAAQ,GAAA+D,oCAAA,CAAO,IAAI,CAAC/D,QAAQ,CAAC;QAEnCA,QAAQ,CAACxD,OAAO,CAAC,UAAA2iB,gBAAgB,EAAG;UAChC,IAAMC,GAAG,GAAGD,gBAAgB,CAACvU,YAAY,CAAC,KAAK,CAAC;UAChD,IAAIwU,GAAG,EAAE;YACL,IAAMC,aAAa,GAAGhW,0BAA0B,CAAC+V,GAAG,CAAC;YACrD,IAAI,CAACF,SAAS,CAAChiB,GAAG,CAACmiB,aAAa,CAAC,EAAEH,SAAS,CAAC9iB,GAAG,CAACijB,aAAa,EAAE,EAAE,CAAC;YACnEH,SAAS,CAAC7hB,GAAG,CAACgiB,aAAa,CAAC,CAAC1d,IAAI,CAACwd,gBAAgB,CAAC;UACvD,CAAC,MACI;YACDD,SAAS,CAAC7hB,GAAG,CAAC,QAAQ,CAAC,CAACsE,IAAI,CAACwd,gBAAgB,CAAC;UAClD;QACJ,CAAC,CAAC;QACFlS,uCAAA,CAAK0R,UAAU,EAAf,IAAI,EAAcO,SAAJ,CAAC;QAEf,IAAI,CAACD,iBAAiB,EAAE;UACpB1X,WAAW,CAACX,aAAa,CAACmP,iCAAiC,CAACrL,aAAa,EAAE,IAAI,CAAC;QACpF;QACA,IAAI,CAACzJ,MAAM,CAAC,IAAI,CAAC;QACjBgM,uCAAA,CAAK5B,WAAW,EAAhB,IAAI,EAAe,IAAJ,CAAC;MACpB;IAAC;EAAA,EApF4BoT,oBAAoB;EAuFrD,OAAOG,kBAAkB;AAC7B;;;;;;;;;;;;;;;;;;;;;;;;;AC/G+D;AACsE;AACpD;AACpC;AACM;AAC+B;AAE3E,SAASU,6BAA6BA,CAAA,EAAoB;EAAA,IAAnBrU,QAAQ,GAAAhG,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAGiG,MAAM;EAC3D,IAAMqU,mBAAmB,GAAGvoB,0CAA0C,CAACuO,WAAW,EAAE0F,QAAQ,CAAC;EAAC,IAAAI,WAAA,oBAAAD,OAAA;EAAA,IAAAoU,QAAA,oBAAApU,OAAA;EAAA,IAAAqU,aAAA,oBAAArU,OAAA;EAAA,IAAAsU,gBAAA,oBAAAtU,OAAA;EAAA,IAAAuU,WAAA,oBAAAvU,OAAA;EAAA,IAAAwU,iBAAA,oBAAAxU,OAAA;EAAA,IAAAyU,gBAAA,oBAAAzU,OAAA;EAAA,IAAA0U,aAAA,oBAAA1U,OAAA;EAAA,IAAA2U,4BAAA,oBAAAvU,OAAA;EAAA,IACxFgS,qBAAqB,0BAAAwC,oBAAA;IA0BvB,SAAAxC,sBAAA,EAAmE;MAAA,IAAAte,KAAA;MAAA,IAAvD0d,QAAQ,GAAA3X,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAC,IAAI;MAAA,IAAEgb,aAAa,GAAAhb,SAAA,CAAAhF,MAAA,OAAAgF,SAAA,MAAApE,SAAA;MAAA,IAAEkc,KAAK,GAAA9X,SAAA,CAAAhF,MAAA,OAAAgF,SAAA,MAAApE,SAAA;MAAA,IAAEgc,gBAAgB,GAAA5X,SAAA,CAAAhF,MAAA,OAAAgF,SAAA,MAAApE,SAAA;MAAA8K,oCAAA,OAAA6R,qBAAA;MAC7Dte,KAAA,GAAA6M,+BAAA,OAAAyR,qBAAA;MAAQxR,gDAAA,CAAA9M,KAAA,EAAA6gB,4BAAA;MA1BZ;MAAA9T,oCAAA,CAAA/M,KAAA,UACO,IAAI;MAEXgN,+CAAA,CAAAhN,KAAA,EAAAmM,WAAW,EAAG,KAAK;MAEnB;MACAa,+CAAA,CAAAhN,KAAA,EAAAsgB,QAAQ;MACR;MACAtT,+CAAA,CAAAhN,KAAA,EAAAugB,aAAa;MAEb;MACAvT,+CAAA,CAAAhN,KAAA,EAAAwgB,gBAAgB;MAChBxT,+CAAA,CAAAhN,KAAA,EAAAygB,WAAW;MACXzT,+CAAA,CAAAhN,KAAA,EAAA0gB,iBAAiB;MACjB;MACA;MACA;MACA;MAAA3T,oCAAA,CAAA/M,KAAA;MAGA;MACAgN,+CAAA,CAAAhN,KAAA,EAAA2gB,gBAAgB,EAAG,EAAE;MACrB;MACA3T,+CAAA,CAAAhN,KAAA,EAAA4gB,aAAa;MAIT,IAAMI,kBAAkB,GAAGhhB,KAAA,CAAKlD,OAAO,KAAK,qBAAqB;MACjE,IAAIkkB,kBAAkB,EAAE,OAAAhP,+CAAA,CAAAhS,KAAA;MAExB,IAAI+gB,aAAa,EAAE;QACf,IAAME,gBAAgB,GAAG,IAAI5B,QAAQ,CAAC0B,aAAa,CAACje,WAAW,CAAC;QAChE,IAAMgb,OAAO,GAAGmD,gBAAgB,CAAC,CAAC;QAClC9R,sCAAA,CAAA0R,4BAAA,EAAA7gB,KAAA,EAAKkhB,WAAU,CAAC,CAAAhgB,IAAA,CAAAlB,KAAA,EAAC8d,OAAO;MAC5B;MAEA,IAAID,KAAK,EAAE;QACP,IAAMsD,UAAU,GAAG,IAAI1C,aAAa,CAAC,CAAC;QACtC0C,UAAU,CAACzC,WAAW,CAACb,KAAK,CAAC;QAC7B9P,0CAAA,CAAK0S,WAAW,EAAAzgB,KAAA,EAAGmhB,UAAJ,CAAC;MACpB;MACA,IAAIxD,gBAAgB,EAAE;QAClB5P,0CAAA,CAAK2S,iBAAiB,EAAA1gB,KAAA,EAAG2d,gBAAJ,CAAC;MAC1B;MAEA5P,0CAAA,CAAKyS,gBAAgB,EAAAxgB,KAAA,EACjB,CAAA0d,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAE0D,SAAS,CAAC,IAAI,CAAC,KACzBplB,oBAAoB,CAAColB,SAAS,CAAC,CAFf,CAAC;;MAIrB;MACA;MACAphB,KAAA,CAAK4N,GAAG,GAAG,CAAC,CAAC;MAAC,OAAA5N,KAAA;IAClB;IAACiN,8BAAA,CAAAqR,qBAAA,EAAAwC,oBAAA;IAAA,OAAA5T,iCAAA,CAAAoR,qBAAA;MAAAxU,GAAA;MAAAxL,KAAA,EAsBD,SAAAmK,gBAAgB4Y,SAAS,EAAE;QACvB,IAAI,IAAI,CAAC5X,YAAY,EAAE;UACnBzD,MAAM,CAACsb,MAAM,CAAC,IAAI,CAAC7X,YAAY,EAAE4X,SAAS,CAAC;QAC/C,CAAC,MACI;UACD,IAAI,CAAC5X,YAAY,GAAG4X,SAAS;QACjC;MACJ;IAAC;MAAAvX,GAAA;MAAAxL,KAAA,EAiGD,SAAAkP,qBAAA,EAAuB;QACnB2B,sCAAA,CAAA0R,4BAAA,MAAI,EAACU,aAAY,CAAC,CAAArgB,IAAA,CAAlB,IAAI;QACJ,IAAI,CAACjB,KAAK,GAAG0B,SAAS;MAC1B;IAAC;MAAAmI,GAAA;MAAAxL,KAAA,EAED,SAAA0P,kBAAA,EAAoB;QAAA,IAAAC,MAAA;QAChB,IAAId,0CAAA,CAAKhB,WAAW,EAAhB,IAAe,CAAC,EAAE;QACtB;QACA;QACA;QACA;QACA,IAAI,CAACwB,IAAI,GAAG,IAAI,CAACO,WAAW,CAAC,CAAC,CAACP,IAAI;QACnCwB,sCAAA,CAAA0R,4BAAA,MAAI,EAACW,+BAA8B,CAAC,CAAAtgB,IAAA,CAApC,IAAI;QACJiO,sCAAA,CAAA0R,4BAAA,MAAI,EAACY,eAAc,CAAC,CAAAvgB,IAAA,CAApB,IAAI;QAEJ,IAAMuN,cAAc,GAAG,IAAI,CAACC,iBAAiB,CAAC,CAAC;QAAC,IAAAvL,SAAA,GAAAC,+CAAA,CACzBqL,cAAc;UAAAnL,KAAA;QAAA;UAArC,KAAAH,SAAA,CAAAI,CAAA,MAAAD,KAAA,GAAAH,SAAA,CAAAK,CAAA,IAAAC,IAAA,GAAuC;YAAA,IAA5B+C,QAAQ,GAAAlD,KAAA,CAAAhF,KAAA;YACf,IAAMmI,SAAS,GAAG,IAAI,CAACiF,YAAY,CAAClF,QAAQ,CAAC;YAC7C;YACA,IAAI,CAACmI,mBAAmB,CAACnI,QAAQ,EAAEC,SAAS,CAAC;UACjD;QAAC,SAAAxC,GAAA;UAAAd,SAAA,CAAAe,CAAA,CAAAD,GAAA;QAAA;UAAAd,SAAA,CAAAgB,CAAA;QAAA;QAEDnH,eAAe,CAAC,IAAI,EAAE;UAAA,OAAKmS,sCAAA,CAAA0R,4BAAA,EAAA5S,MAAI,EAACyT,WAAU,CAAC,CAAAxgB,IAAA,CAAhB+M,MAAI;QAAA,CAAc,CAAC;QAC9C,IAAId,0CAAA,CAAKoT,aAAa,EAAlB,IAAiB,CAAC,EAAEpT,0CAAA,CAAKoT,aAAa,EAAlB,IAAiB,CAAC,CAACrf,IAAI,CAAC,IAAI,EAAE6K,QAAQ,CAAC1T,0BAA0B,CAAC,CAAC,CAAC,CAAC;QAC7F,IAAI8U,0CAAA,CAAKmT,QAAQ,EAAb,IAAY,CAAC,EAAEqB,cAAc,CAAC;UAAA,OAAKxU,0CAAA,CAAKmT,QAAQ,EAAbrS,MAAY,CAAC,CAAC/M,IAAI,CAAC+M,MAAI,EAAElC,QAAQ,CAAC1T,0BAA0B,CAAC,CAAC,CAAC,CAAC;QAAA,EAAC;QACxG0V,0CAAA,CAAK5B,WAAW,EAAhB,IAAI,EAAe,IAAJ,CAAC;MACpB;IAAC;EAAA,EA7M+BkU,mBAAmB;EAAA,SAAAa,YAuDvCpD,OAAO,EAAE;IAAA,IAAApH,MAAA;IACjB,IAAIoH,OAAO,CAAChQ,MAAM,EAAE;MAChB,IAAI,CAACA,MAAM,GAAGgQ,OAAO,CAAChQ,MAAM;MAC5B,IAAI,IAAI,CAACkB,WAAW,EAAE;QAClBhS,eAAe,CAAC,IAAI,EAAE;UAAA,OAAKmS,sCAAA,CAAA0R,4BAAA,EAAAnK,MAAI,EAACgL,WAAU,CAAC,CAAAxgB,IAAA,CAAhBwV,MAAI;QAAA,CAAc,CAAC;MAClD;IACJ;IACA,IAAIoH,OAAO,CAAC7d,KAAK,EAAE;MACf,IAAI,CAACwI,eAAe,CAACqV,OAAO,CAAC7d,KAAK,CAAC;MACnC;MACA,IAAI,IAAI,CAAC+O,WAAW,EAAEG,sCAAA,CAAA0R,4BAAA,MAAI,EAACW,+BAA8B,CAAC,CAAAtgB,IAAA,CAApC,IAAI;IAC9B;IACA,IAAI4c,OAAO,CAAC8D,OAAO,EAAE;MACjB7T,0CAAA,CAAKuS,QAAQ,EAAb,IAAI,EAAYxC,OAAO,CAAC8D,OAAZ,CAAC;IACjB;IACA,IAAI9D,OAAO,CAAC+D,YAAY,EAAE;MACtB9T,0CAAA,CAAKwS,aAAa,EAAlB,IAAI,EAAiBzC,OAAO,CAAC+D,YAAZ,CAAC;IACtB;EACJ;EAAC,SAAAL,gCAAA,EAWiC;IAC9B,IAAI,CAAC,IAAI,CAAC/X,YAAY,EAAE;IACxB,IAAMA,YAAY,GAAG,IAAI,CAACA,YAAY;IACtC,IAAIA,YAAY,CAAC/B,aAAa,EAAE;MAC5B,IAAI,CAACzH,KAAK,GAAGwJ,YAAY,CAAC/B,aAAa,CAACzH,KAAK;IACjD,CAAC,MACI;MACD,IAAI,CAACA,KAAK,GAAG,IAAImR,iBAAY,CAAC3H,YAAY,EAAE9H,SAAS,EAAEA,SAAS,EAAE,KAAK,EAAEoK,QAAQ,CAAC,CAAC9L,KAAK;IAC5F;IACA,OAAO,IAAI,CAACwJ,YAAY;EAC5B;EAAC,SAAAgY,gBAAA,EAEiB;IACd,IAAI1V,QAAQ,CAAC+D,aAAa,CAACC,SAAS,EAAE;MAClC,IAAMC,UAAU,GAAG,IAAI,CAAC8R,YAAY,CAAC;QAAEC,IAAI,EAAE;MAAO,CAAC,CAAC;MACtD,IAAI,CAAC/R,UAAU,CAACgS,kBAAkB,GAAG,EAAE;MACvC,IAAI7U,0CAAA,CAAKuT,iBAAiB,EAAtB,IAAqB,CAAC,EAAE,IAAI,CAAC1Q,UAAU,CAACgS,kBAAkB,CAACvf,IAAI,CAAC0K,0CAAA,CAAKuT,iBAAiB,EAAtB,IAAqB,CAAC,CAAC;MAC3F,IAAIvT,0CAAA,CAAKsT,WAAW,EAAhB,IAAe,CAAC,EAAE,IAAI,CAACzQ,UAAU,CAACgS,kBAAkB,CAACvf,IAAI,CAAC0K,0CAAA,CAAKsT,WAAW,EAAhB,IAAe,CAAC,CAAC;MAC/EzQ,UAAU,CAACrL,WAAW,CAACwI,0CAAA,CAAKqT,gBAAgB,EAArB,IAAoB,CAAC,CAAC;IACjD,CAAC,MACI;MACD,IAAMyB,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,CAAC;MACvCD,QAAQ,CAACtd,WAAW,CAACwI,0CAAA,CAAKqT,gBAAgB,EAArB,IAAoB,CAAC,CAAC;MAC3C,IAAI,CAAC7b,WAAW,CAACsd,QAAQ,CAAC;IAC9B;EACJ;EAAC,SAAAV,cAAA,EAEe;IAAA,IAAAY,MAAA;IACZ,IAAI,CAAChV,0CAAA,CAAKwT,gBAAgB,EAArB,IAAoB,CAAC,CAAC5f,MAAM,EAAE;IACnC,IAAMkK,WAAW,GAAG,IAAI;IACxBkC,0CAAA,CAAKwT,gBAAgB,EAArB,IAAoB,CAAC,CAACrjB,OAAO,CAAC,UAAA8kB,SAAS,EAAG;MACtCnX,WAAW,CAACyC,mBAAmB,CAAC0U,SAAS,EAAEjV,0CAAA,CAAKyT,aAAa,EAAlBuB,MAAiB,CAAC,EAAE,KAAK,CAAC;IACzE,CAAC,CAAC;EAEN;EAAC,SAAAT,YAAA,EACa;IAAA,IAAAW,MAAA;MAAAC,sBAAA;IACV,IAAI,CAAC,IAAI,CAACxU,MAAM,EAAE;IAClB,IAAMyU,aAAa,GAAGvc,MAAM,CAACmK,IAAI,CAAC,IAAI,CAACrC,MAAM,CAAC;IAC9C,IAAM0U,YAAY,GAAG,CAAC,CAAC;IACvB,IAAMC,YAAY,GAAG,CAAC,CAAC;IACvBF,aAAa,CAACjlB,OAAO,CAAC,UAAAsS,OAAO,EAAG;MAC5B,IAAMtR,KAAK,GAAG+jB,MAAI,CAACvU,MAAM,CAAC8B,OAAO,CAAC;MAClC,IAAI,OAAOtR,KAAK,KAAK,UAAU,EAAE;QAC7BkkB,YAAY,CAAC5S,OAAO,CAAC,GAAGtR,KAAK;MACjC,CAAC,MACI,IAAIuK,4BAAA,CAAOvK,KAAK,MAAK,QAAQ,EAAE;QAChC,IAAMokB,WAAU,GAAG1c,MAAM,CAACmK,IAAI,CAAC7R,KAAK,CAAC;QACrCokB,WAAU,CAACplB,OAAO,CAAC,UAAA8kB,SAAS,EAAG;UAC3B,IAAIA,SAAS,KAAK,OAAO,EAAE;YACvBI,YAAY,CAAC5S,OAAO,CAAC,GAAGtR,KAAK,CAAC8jB,SAAS,CAAC;UAC5C,CAAC,MACI;YACD,IAAI,CAACK,YAAY,CAACL,SAAS,CAAC,EAAEK,YAAY,CAACL,SAAS,CAAC,GAAG,CAAC,CAAC;YAC1DK,YAAY,CAACL,SAAS,CAAC,CAACxS,OAAO,CAAC,GAAGtR,KAAK,CAAC8jB,SAAS,CAAC;UACvD;QACJ,CAAC,CAAC;MACN;IACJ,CAAC,CAAC;IACF,IAAM5S,WAAW,GAAGzD,QAAQ,CAAC1T,0BAA0B,CAAC,CAAC,CAAC;IAC1D0V,0CAAA,CAAK6S,aAAa,EAAlB,IAAI,EAAiB,UAAS+B,KAAK,EAAE;MAAA,IAAAC,MAAA;MACjC,IAAMC,KAAK,GAAGC,WAAW,CAACC,GAAG,CAAC,CAAC;MAC/B,IAAMC,YAAY,GAAGL,KAAK,CAACM,YAAY,CAAC,CAAC;MACzC,IAAIzS,MAAM;MACV,IAAIwS,YAAY,EAAE;QACdxS,MAAM,GAAGwS,YAAY,CAACE,IAAI,CAAC,UAAAtqB,OAAO;UAAA,OAAIA,OAAO,CAAC2J,YAAY,IAAI3J,OAAO,CAAC2J,YAAY,CAAC,KAAK,CAAC,IAAK3J,OAAO,CAAC8S,YAAY,CAAC,KAAK,CAAC,IAAIkX,MAAI,CAAC9U,MAAO;QAAA,EAAC;MAC9I,CAAC,MACI;QACD0C,MAAM,GAAImS,KAAK,CAACnS,MAAM,CAACjO,YAAY,IAAIogB,KAAK,CAACnS,MAAM,CAACjO,YAAY,CAAC,KAAK,CAAC,IAAKogB,KAAK,CAACnS,MAAM,CAAC9E,YAAY,CAAC,KAAK,CAAC,IAAI,IAAI,CAACoC,MAAO,GAAI6U,KAAK,CAACnS,MAAM,GAAG,IAAI;MACvJ;MACA,IAAIA,MAAM,EAAE;QACR,IAAM5C,GAAG,GAAG4C,MAAM,CAAC9E,YAAY,CAAC,KAAK,CAAC;QACtC,IAAM0W,SAAS,GAAGO,KAAK,CAACjK,IAAI;QAC5B,IAAI0J,SAAS,KAAK,OAAO,EAAE;UACvB,IAAMe,UAAU,GAAG,OAAO,IAAI,CAACrV,MAAM,CAACF,GAAG,CAAC,KAAK,UAAU,GAAG,IAAI,CAACE,MAAM,CAACF,GAAG,CAAC,GAAG,IAAI;UACnFuV,UAAU,aAAVA,UAAU,eAAVA,UAAU,CAAEjiB,IAAI,CAACsP,MAAM,EAAEmS,KAAK,EAAEA,KAAK,CAACnS,MAAM,EAAEhB,WAAW,CAAC;QAC9D,CAAC,MACI;UAAA,IAAA4T,qBAAA;UACD,CAAAA,qBAAA,OAAI,CAACtV,MAAM,CAACF,GAAG,CAAC,CAACwU,SAAS,CAAC,cAAAgB,qBAAA,eAA3BA,qBAAA,CAA6BliB,IAAI,CAACsP,MAAM,EAAEmS,KAAK,EAAEA,KAAK,CAACnS,MAAM,EAAEhB,WAAW,CAAC;QAC/E;MACJ;MAEAjP,OAAO,CAACC,GAAG,UAAA/H,MAAA,CAAWkqB,KAAK,CAACjK,IAAI,YAAAjgB,MAAA,CAAUqqB,WAAW,CAACC,GAAG,CAAC,CAAC,GAAGF,KAAK,CAAG,CAAC;IAC3E,CAvBiB,CAAC;IAyBlB,IAAM5X,WAAW,GAAG,IAAI;IACxB,IAAIjF,MAAM,CAACmK,IAAI,CAACqS,YAAY,CAAC,CAACzhB,MAAM,EAAE;MAClCkK,WAAW,CAACU,gBAAgB,CAAC,OAAO,EAAEwB,0CAAA,CAAKyT,aAAa,EAAlB,IAAiB,CAAC,CAAC;MACzDzT,0CAAA,CAAKwT,gBAAgB,EAArB,IAAoB,CAAC,CAACle,IAAI,CAAC,OAAO,CAAC;IACvC;IACA,IAAMigB,UAAU,GAAG1c,MAAM,CAACmK,IAAI,CAACsS,YAAY,CAAC;IAC5C,SAAAY,EAAA,MAAAC,YAAA,GAAwBZ,UAAU,EAAAW,EAAA,GAAAC,YAAA,CAAAviB,MAAA,EAAAsiB,EAAA;MAA7B,IAAMjB,SAAS,GAAAkB,YAAA,CAAAD,EAAA;MAChBpY,WAAW,CAACU,gBAAgB,CAACyW,SAAS,EAAEjV,0CAAA,CAAKyT,aAAa,EAAlB,IAAiB,CAAC,CAAC;IAAC;IAChE,CAAA0B,sBAAA,GAAAnV,0CAAA,CAAKwT,gBAAgB,EAArB,IAAoB,CAAC,EAACle,IAAI,CAAAkI,KAAA,CAAA2X,sBAAA,EAAII,UAAU,CAAC;EAC7C;EA+BJ,OAAOpE,qBAAqB;AAChC;;;;;;;;;;;;;;;AC1NkF;AACrC;AAC8D;AAC/D;AACY;AACf;AACW;AACiB;AACM;AAE3E,IAAMkF,mBAAmB,GAAGvnB,QAAQ,CAACwnB,aAAa,CAAClhB,YAAY,CAAC,qBAAqB,CAAC;AACtF,IAAMmhB,UAAU,GAAG1X,MAAM,CAACoF,YAAY;AACtC7K,UAAU,CAACod,aAAa,GAAG,UAASxG,OAAO,EAAE;EAEzC,IAAIpR,QAAQ,GAAI,YAAW;IAAA,IAAA6X,OAAA;IAAE,OAAO;MAAE5X,MAAM,EAANA,MAAM;MAAE/P,QAAQ,GAAA2nB,OAAA,GAAE5X,MAAM,cAAA4X,OAAA,uBAANA,OAAA,CAAQ3nB;IAAS,CAAC;EAAA,CAAC,CAAE+P,MAAM,CAAC;EAEpF,IAAM6X,MAAM,GAAG;IACX9T,SAAS,EAAE,IAAI;IAAE;IACjByT,mBAAmB,EAAEA;EACzB,CAAC;EAED,IAAIK,MAAM,CAACL,mBAAmB,EAAE;IAC5Bxd,MAAM,CAACC,cAAc,CAACM,UAAU,EAAE,YAAY,EAAE;MAC5CjI,KAAK,EAAE,CAAC,CAAC;MACT6H,QAAQ,EAAE;IACd,CAAC,CAAC;IACFH,MAAM,CAACC,cAAc,CAACM,UAAU,CAACud,UAAU,EAAE3G,OAAO,EAAE;MAClD7e,KAAK,EAAEyN,QAAQ;MACf5F,QAAQ,EAAE;IACd,CAAC,CAAC;EAEN;EAEA4F,QAAQ,CAAC+D,aAAa,GAAG9J,MAAM,CAAC+d,IAAI,CAACF,MAAM,CAAC;;EAE5C;EACA,IAAMpiB,cAAc,GAAGuE,MAAM,CAAC/E,SAAS,CAACQ,cAAc;EACtDiE,iBAAiB,CAACM,MAAM,CAAC/E,SAAS,EAAE,gBAAgB,EAAEQ,cAAc,CAAC;EAErEsK,QAAQ,CAAC1T,0BAA0B,CAAC,GAAG,YAAW;IAC9C,OAAO,CAAC,CAAC;EACb,CAAC;EACD;EACA0T,QAAQ,CAACiY,cAAc,GAAG,YAA4B;IAAA,IAAnBva,YAAY,GAAA1D,SAAA,CAAAhF,MAAA,QAAAgF,SAAA,QAAApE,SAAA,GAAAoE,SAAA,MAAG,CAAC,CAAC;IAChD,IAAMyJ,WAAW,GAAI,IAAI4B,iBAAY,CAAC3H,YAAY,EAAE9H,SAAS,EAAEA,SAAS,EAAE,IAAI,EAAEoK,QAAQ,CAAC,CAAC9L,KAAK;IAC/F,IAAMgkB,kBAAkB,GAAG7rB,qBAAqB;IAChD4N,MAAM,CAACC,cAAc,CAAC8F,QAAQ,EAAEkY,kBAAkB,EAAE;MAChD3lB,KAAK,EAAEkR,WAAW;MAClBrJ,QAAQ,EAAEpK,UAAU,GAAG,IAAI,GAAG,KAAK;MACnCmK,YAAY,EAAE;IAClB,CAAC,CAAC;IACFF,MAAM,CAACC,cAAc,CAAC8F,QAAQ,EAAE1T,0BAA0B,EAAE;MACxDiG,KAAK,EAAE,SAAAA,MAAA,EAAW;QACd,OAAOyN,QAAQ,CAACkY,kBAAkB,CAAC;MACvC;IACJ,CAAC,CAAC;EACN,CAAC;EAGD,IAAMC,6BAA6B,GAAG,CAAC,CAAC;EACxCxrB,yBAAyB,CAAC4E,OAAO,CAAC,UAAA6mB,iBAAiB;IAAA,OAC/CD,6BAA6B,CAACC,iBAAiB,CAACvrB,OAAO,CAAC,GAAGd,0CAA0C,CAACqsB,iBAAiB,SAAM,EAAEpY,QAAQ,EAAE,IAAI,CAAC;EAAA,CAClJ,CAAC;EAEDA,QAAQ,CAACuS,qBAAqB,GAAG8B,6BAA6B,CAACrU,QAAQ,CAAC;;EAExE;EACArT,yBAAyB,CAAC4E,OAAO,CAAC,UAAA8mB,cAAc,EAAI;IAChDjG,cAAc,CAAChG,MAAM,aAAA1f,MAAA,CACL2rB,cAAc,CAACxrB,OAAO;IAClC;IACAsrB,6BAA6B,CAACE,cAAc,CAACxrB,OAAO,CAAC,EACrD;MAAE,WAASwrB,cAAc,CAACxrB;IAAQ,CAAC,CAAC;EACxC,CACJ,CAAC;EAED,IAAMyrB,oBAAoB,GAAGvsB,0CAA0C,CAACwsB,kBAAkB,EAAEvY,QAAQ,CAAC;EACrG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAACzO,OAAO,CAAC,UAAAinB,IAAI,EAAG;IAChDpG,cAAc,CAAChG,MAAM,aAAA1f,MAAA,CAAa8rB,IAAI,0BAAAC,qBAAA;MAAA,SAAAnG,OAAA;QAAA5R,mBAAA,OAAA4R,MAAA;QAAA,OAAAxR,cAAA,OAAAwR,MAAA,EAAAtY,SAAA;MAAA;MAAAkH,aAAA,CAAAoR,MAAA,EAAAmG,qBAAA;MAAA,OAAAtX,gBAAA,CAAAmR,MAAA;IAAA,EACpBgG,oBAAoB,GAClC;MAAE,WAASE;IAAI,CACnB,CAAC;EAEL,CAAC,CAAC;EACF,IAAME,+BAA+B,GAAG3sB,0CAA0C,CAACuO,WAAW,EAAE0F,QAAQ,CAAC;EACzG,IAAM2Y,uBAAuB,GAAGpF,0BAA0B,CAACmF,+BAA+B,CAAC;EAC3FtG,cAAc,CAAChG,MAAM,CAAC,oBAAoB,EAAEuM,uBAAuB,CAAC;EAEpE,OAAO,YAAW;IACdnB,KAAW,CAACxX,QAAQ,EAAEoR,OAAO,CAAC;EAClC,CAAC,CAACpT,IAAI,CAACgC,QAAQ,CAAC;AACpB,CAAC,C","sources":["webpack://jssprout/webpack/universalModuleDefinition","webpack://jssprout/./src/core/consts.js","webpack://jssprout/./src/core/DOM_utils.js","webpack://jssprout/./src/core/paint_utils.js","webpack://jssprout/./src/core/node_actions.js","webpack://jssprout/./src/core/prop_utils.js","webpack://jssprout/./src/core/state_utils.js","webpack://jssprout/./src/core/commands.js","webpack://jssprout/./src/core/ReactiveElement.js","webpack://jssprout/./src/core/debug_utils.js","webpack://jssprout/./src/core/StatefulArray.js","webpack://jssprout/./src/core/proxy_handlers.js","webpack://jssprout/./src/core/StateManager.js","webpack://jssprout/./src/build/index.js","webpack://jssprout/./src/core/attr_utils.js","webpack://jssprout/./src/core/ConditionalElement.js","webpack://jssprout/./src/core/ReactiveCustomElement.js","webpack://jssprout/./src/core/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sprout_core\"] = factory();\n\telse\n\t\troot[\"sprout_core\"] = factory();\n})(self, () => {\nreturn ","import { extendElementClassWithReactiveElementClass } from \"./ReactiveElement.js\";\n\nexport const BOOLEAN_ATTRIBUTES = [\n    'hidden',\n    'checked'\n]\n\nexport const SUPPORTED_ATTRIBUTES_FOR_BINDING = [\n    'hidden',\n    'value',\n    'checked'\n]\n\n// Some elements like inputs has certain properties that can be used in _bind command, like: 'value', or 'checked\nexport const SUPPORTED_PROPERTIES_FOR_BINDING = [\n    'value',\n    'checked'\n]\nexport const SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING = [\n    null, // If no type is specified - defaults to 'text' - \n    // getAttribute('type') returns null\n    'text', \n    'color', \n    'date', \n    'datetime-local', \n    'email', \n    'month', \n    'number', \n    'password',\n    'range',\n    'search',\n    'tel',\n    'time',\n    'url',\n    'week'\n];\n\n// These are \"built-in\" state props that are automatically added to state objects,\n// and should not be included in the normal state change/check flow\nexport const BUILT_IN_STATE_PROPS = [\n    '_global',\n    '_gettingDependenciesFor',\n    '_localStateManager',\n    '_stateManager',\n    '_binding',\n    '_populate'\n]\n\nexport const GLOBAL_STATE_VAR_NAME = \"SproutGlobalState\";\nexport const GLOBAL_STATE_FUNCTION_NAME = \"getGlobalState\";\n\nexport const ERROR_MESSAGES = {\n    NO_DEPENDENCIES_ARRAY_IN_SET_HOOK(stateProp) {\n        return `State set hook, must include a dependencies array! None was found for ${stateProp}`;\n    }\n}\n\nexport const HTML_ELEMENTS_CLASSES_MAP = [\n    { class: HTMLAnchorElement, element: \"a\" },\n    { class: HTMLAreaElement, element: \"area\" },\n    { class: HTMLAudioElement, element: \"audio\" },\n    // { class: HTMLBaseElement, element: \"base\" },\n    { class: HTMLBodyElement, element: \"body\" },\n    { class: HTMLBRElement, element: \"br\" },\n    { class: HTMLButtonElement, element: \"button\" },\n    { class: HTMLCanvasElement, element: \"canvas\" },\n    { class: HTMLDataElement, element: \"data\" },\n    { class: HTMLDataListElement, element: \"datalist\" },\n    { class: HTMLDetailsElement, element: \"details\" },\n    { class: HTMLDialogElement, element: \"dialog\" },\n    { class: HTMLDivElement, element: \"div\" },\n    { class: HTMLDListElement, element: \"dl\" },\n    { class: HTMLEmbedElement, element: \"embed\" },\n    { class: HTMLFieldSetElement, element: \"fieldset\" },\n    { class: HTMLFormElement, element: \"form\" },\n    /*\n    { class: HTMLHeadingElement, element: \"h1\" },\n    { class: HTMLHeadingElement, element: \"h2\" },\n    { class: HTMLHeadingElement, element: \"h3\" },\n    { class: HTMLHeadingElement, element: \"h4\" },\n    { class: HTMLHeadingElement, element: \"h5\" },\n    { class: HTMLHeadingElement, element: \"h6\" },\n     */\n    { class: HTMLHRElement, element: \"hr\" },\n    { class: HTMLHtmlElement, element: \"html\" },\n    { class: HTMLIFrameElement, element: \"iframe\" },\n    { class: HTMLImageElement, element: \"img\" },\n    { class: HTMLInputElement, element: \"input\" },\n    { class: HTMLLabelElement, element: \"label\" },\n    { class: HTMLLegendElement, element: \"legend\" },\n    { class: HTMLLIElement, element: \"li\" },\n    { class: HTMLLinkElement, element: \"link\" },\n    { class: HTMLMapElement, element: \"map\" },\n    { class: HTMLMetaElement, element: \"meta\" },\n    { class: HTMLMeterElement, element: \"meter\" },\n    { class: HTMLObjectElement, element: \"object\" },\n    { class: HTMLOListElement, element: \"ol\" },\n    { class: HTMLOptGroupElement, element: \"optgroup\" },\n    { class: HTMLOptionElement, element: \"option\" },\n    // { class: HTMLOutputElement, element: \"output\" },\n    { class: HTMLParagraphElement, element: \"p\" },\n    // { class: HTMLParamElement, element: \"param\" },\n    { class: HTMLPictureElement, element: \"picture\" },\n    { class: HTMLPreElement, element: \"pre\" },\n    { class: HTMLProgressElement, element: \"progress\" },\n    { class: HTMLQuoteElement, element: \"blockquote\" },\n    { class: HTMLQuoteElement, element: \"q\" },\n    // { class: HTMLScriptElement, element: \"script\" },\n    { class: HTMLSelectElement, element: \"select\" },\n    { class: HTMLSourceElement, element: \"source\" },\n    { class: HTMLSpanElement, element: \"span\" },\n    // { class: HTMLStyleElement, element: \"style\" },\n    { class: HTMLTableElement, element: \"table\" },\n    { class: HTMLTableCellElement, element: \"td\" },\n    { class: HTMLTableCellElement, element: \"th\" },\n    { class: HTMLTableRowElement, element: \"tr\" },\n    { class: HTMLTableSectionElement, element: \"thead\" },\n    { class: HTMLTableSectionElement, element: \"tbody\" },\n    { class: HTMLTableSectionElement, element: \"tfoot\" },\n    { class: HTMLTextAreaElement, element: \"textarea\" },\n    { class: HTMLTimeElement, element: \"time\" },\n    { class: HTMLTitleElement, element: \"title\" },\n    { class: HTMLTrackElement, element: \"track\" },\n    { class: HTMLUListElement, element: \"ul\" },\n    { class: HTMLVideoElement, element: \"video\" },\n    { class: HTMLSlotElement, element: \"slot\" },\n    // We can't use HTMLElement more than once, so we will use a class extending it\n    // { class: class extends HTMLElement{}, element: \"code\" }\n];\n\n// For development purposes only,\n// turn this on to see exactly which functions in each entity are called and when.\nexport const DEBUG_MODE = false;\n\nexport const DEFAULT_TEMPLATE_DOM = document.createElement('div');\n\nexport const NODES_STATE = {\n    // This is a global object that maps abstract \"DOM actions\" to nodes (the nodes can be elements, text nodes, attribute nodes)\n    // It is resolved to actual DOM API functions on RequestAnimationFrame calls, and then is RESET.\n    // it is a \"singleton\" object\n    nodeActionsMap: new Map(),\n    // Maps events binding functions to (custom) elements\n    eventBindingFunctions: new Map(),\n    conditionalRenders: new Map(),\n    // Save requestAnimationFrame Id, to cancel if the rAF wasn't called yet on the same frame, so DOM operations will be batched to a single frame,\n    // preventing several rAFs running for the same frame\n    paintRafId: null,\n    // Similar as above but for event bindings\n    eventBindRafId: null,\n    // Same for conditional renders\n    conditionalRenderRafId: null,\n}\n\nexport const CONDITIONAL_OPERATORS = [\n    '=',\n    '==',\n    '!=',\n    '!==',\n    '<',\n    '<=',\n    '>',\n    '>='\n];\n\nexport const MAX_OPERATIONS_PER_ANIMATION_FRAME = 100;\n","export function isElementAList(element) {\n  return element.tagName === \"OL\" || element.tagName === \"UL\";\n}\n\n","import { doUpdateDOM } from \"./node_actions\";\nimport { NODES_STATE, MAX_OPERATIONS_PER_ANIMATION_FRAME } from \"./consts\";\n\nlet { \n    paintRafId,\n    eventBindingFunctions, \n    eventBindRafId, \n    conditionalRenderRafId,\n    conditionalRenders,\n    nodeActionsMap\n} = NODES_STATE; \n\nexport function queueBindEvents(element, bindFunction) {\n    eventBindingFunctions.set(element, bindFunction);\n    if (eventBindingFunctions.size > MAX_OPERATIONS_PER_ANIMATION_FRAME) return;\n    if (eventBindRafId) cancelAnimationFrame(eventBindRafId);\n    eventBindRafId = requestAnimationFrame(()=> {\n        eventBindRafId = null;\n        eventBindingFunctions.forEach(bindFn=> bindFn());\n        eventBindingFunctions = new Map();\n    });\n}\n\nexport function queuePaint() {\n    if (nodeActionsMap.size > MAX_OPERATIONS_PER_ANIMATION_FRAME) return;\n    if (paintRafId) cancelAnimationFrame(paintRafId);\n    paintRafId = requestAnimationFrame(()=> {\n        doUpdateDOM();\n        paintRafId = null;\n    });\n}\nexport function queueConditionalRender(element, renderFunction) {\n    conditionalRenders.set(element, renderFunction);\n    if (conditionalRenders.size > MAX_OPERATIONS_PER_ANIMATION_FRAME) return;\n    if (conditionalRenderRafId) cancelAnimationFrame(conditionalRenderRafId);\n    conditionalRenderRafId = requestAnimationFrame(()=> {\n        conditionalRenderRafId = null;\n        conditionalRenders.forEach(renderFn=> renderFn());\n        conditionalRenders = new Map();\n    })\n}","import { stateToElement, resolveStateMapToDocumentFragment } from \"./state_utils.js\";\nimport { isElementAList } from \"./DOM_utils.js\";\nimport { queueConditionalRender, queuePaint } from \"./paint_utils.js\";\nimport { NODES_STATE } from \"./consts.js\";\n\n// Also, if doesn't exist - create it\nfunction getNodeActionsForNode(node) {\n    const { nodeActionsMap } = NODES_STATE;\n    if (!nodeActionsMap.has(node)) nodeActionsMap.set(node, getNewNodeActionsObject());\n    const nodeActions = nodeActionsMap.get(node);\n    return nodeActions;\n}\n\nexport function setStateNodeAction(node, nodeActionsObject, value) {\n    if (node.nodeType === Node.ATTRIBUTE_NODE)\n        nodeActionsObject[\"setAttribute\"] = value; \n    else if (node.nodeType === Node.TEXT_NODE)\n        nodeActionsObject[\"textContent\"] = value;\n}\n\nexport function addRemoveAction(nodeActions, elementToRemove, stateIdentifier) {\n    if (!nodeActions.remove.has(stateIdentifier)) {\n        nodeActions.remove.set(stateIdentifier, new Set())\n    }\n    nodeActions.remove.get(stateIdentifier).add(elementToRemove);\n}\nexport function addReplaceAction(nodeActions, oldElement, newElement) {\n    nodeActions.replace.set(oldElement, newElement);\n}\nexport function addSwitchAction(nodeActions, newElement) {\n    nodeActions.switch = newElement;\n}\n// stateIdentifier can be a State object (for state maps),\n// or a State property (for conditionally rendered elements)\nexport function addAppendAction(nodeActions, nodeToAppend, stateIdentifier) {\n    if (!nodeActions.append.has(stateIdentifier)) {\n        nodeActions.append.set(stateIdentifier, new Set());\n    }\n    nodeActions.append.get(stateIdentifier).add(nodeToAppend);\n}\nexport function addStateAttributeToNode(attributeNode, value) {\n    const nodeActions = getNodeActionsForNode(attributeNode);\n    setStateNodeAction(attributeNode, nodeActions, value);\n}\nexport function addAppendActionToNode(node, nodeToAppend, stateIdentifier) {\n    const nodeActions = getNodeActionsForNode(node);\n    addAppendAction(nodeActions, nodeToAppend, stateIdentifier);\n}\n\n// This is an object used to represent pending node actions,\n// that are batched and executed in reflows (requestAnimationFrame)\nexport function getNewNodeActionsObject() {\n    return ({\n        // Nodes to append to the end of node's children, \n        // keys are state objects, or state props (string) \n        // to prevent duplicate pending\n        append: new Map(),\n        // Replace each key node on Map, with value node\n        replace: new Map(),\n        // Insert value node after key node in parent node's children\n        after: new Map(),\n        // Remove these nodes from the DOM\n        // keys are state objects, or state props (string) \n        // to prevent duplicate pending\n        remove: new Map(),\n        switch: null,\n        get hasPendingActions() {\n            return (\n                this.switch !== null ||\n                this.append.size || \n                this.replace.size || \n                this.after.size || \n                this.remove.size\n            );\n        }\n    });\n}\n\n\n// This *updates*/*\"fills\"* the nodeActionsMap!\nexport function generateStateNodeActions(stateManager, stateProp) {\n    const { nodeActionsMap } = NODES_STATE;\n    const value = stateManager.state[stateProp];\n    const stateNodes = stateManager.stateNodes[stateProp];\n    // This is a map, where keys are \"parent elements\" containing \n    // custom element instanced created from a state array (\"state map\").\n    // The values are the custom element name. \n    // The actual array of state objects is in state[stateProp]\n    const stateMapElements = stateManager.stateArrayMaps[stateProp];\n    const conditionallyRenderingElements = stateManager.conditionallyRenderingElements[stateProp];\n\n    // Note, since the value change is handled by a custom setter - that setter checks if the set value is the same - \n    // if it is - it won't call handleStateChange, and it won't reach here.\n    if (stateNodes) {\n        stateNodes.forEach(node=> {\n            if (!nodeActionsMap.has(node)) nodeActionsMap.set(node, {});\n            const nodeActionsObject = nodeActionsMap.get(node);\n            setStateNodeAction(node, nodeActionsObject, value);\n        });\n    }\n\n    if (stateMapElements) {\n        // An array of state objects\n        const stateMapArray = value;\n        console.log (`Has ${stateMapElements.size} stateMapElements`);\n        stateMapElements.forEach((customElementName, parentElement)=> {\n            //const newMappedElement = parentElement.cloneNode(true);\n            const stateMapNodeActions = getNewNodeActionsObject();\n            let currentStateMapArrayIndex = -1;\n            const isParentAList = isElementAList(parentElement);\n            // Compares state map arrays to actual DOM elements (by comparing state objects)\n            if (parentElement.children.length) {\n                Array.prototype.forEach.call(parentElement.children, (childElement, currentIndex)=> {\n                    let customElement = childElement;\n                    // State map elements inside Lists are wrapped with a <li>\n                    if (isParentAList) customElement = childElement.firstElementChild;\n                    let stateItem = stateMapArray[currentIndex]; \n                    if (stateItem?.hasOwnProperty('state')) stateItem = stateItem.state;\n                    if (!stateItem) {\n                        addRemoveAction(stateMapNodeActions, childElement);\n                        // newMappedElement.removeChild(newMappedElement.children[currentIndex]);\n                    }\n                    else if (customElement.state !== stateItem) {\n                        const replaceWithChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                        // newMappedElement.replaceChild(replaceWithChild, newMappedElement.children[currentIndex]);\n                        addReplaceAction(stateMapNodeActions, childElement, replaceWithChild);\n                    }\n                    currentStateMapArrayIndex = currentIndex;\n                });\n            }\n\n            // If there are more state objects in the stateMapArray - append equivalent child elements \n            currentStateMapArrayIndex++;\n            for (let i = currentStateMapArrayIndex, len=stateMapArray.length; i<len; i++) {\n                const stateItem = stateMapArray[i];\n                // New state item === new child element to append\n                if (stateItem) {\n                    const newChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                    // newMappedElement.appendChild(newChild);\n                    addAppendAction(stateMapNodeActions, newChild, stateItem);\n                }\n            }\n\n            // addSwitchAction(stateMapNodeActions, newMappedElement);\n            if (stateMapNodeActions.hasPendingActions) {\n                nodeActionsMap.set(parentElement, stateMapNodeActions);\n            }\n        });\n    }\n\n    if (conditionallyRenderingElements) {\n        // Should be slot element\n        conditionallyRenderingElements.forEach(element=> {\n            queueConditionalRender(this, ()=> element.render());\n        });\n    }\n\n    if (nodeActionsMap.size) queuePaint();\n}\n\nfunction resolveNodeActionsMapToDOMActions() {\n    const batchActions = [];\n    const attributeActions = [];\n    const elementActions = [];\n\n    const { nodeActionsMap } = NODES_STATE;\n\n    nodeActionsMap.forEach((nodeActions, node)=> {\n        // Attribute change\n        if (nodeActions.hasOwnProperty(\"setAttribute\")) {\n            const value = nodeActions.setAttribute;\n            if (typeof value === \"boolean\") {\n                if (!node.hasOwnProperty(\"originalOwnerElement\")) {\n                    console.error(\"originalOwnerElement not found on boolean attribute node! Should never happen!\");\n                }\n                if (value === false) {\n                    // Remove attribute if it exists, otherwise - do nothing\n                    if (node.originalOwnerElement.hasAttribute(node.name)) {\n                        attributeActions.push(()=> {\n                            node.originalOwnerElement.removeAttributeNode(node);\n                        });\n                    }\n                }\n                // state changed to true\n                else {\n                    if (!node.originalOwnerElement.hasAttribute(node.name)) {\n                        attributeActions.push(()=> {\n                            node.originalOwnerElement.setAttributeNode(node);\n                        });\n                    }\n                }\n            }\n            else {\n                if (typeof value === \"string\" && node.nodeValue !== value) {\n                    attributeActions.push (()=> node.nodeValue = value);\n                }\n            }\n        }\n\n        // Text change\n        else if (nodeActions.hasOwnProperty(\"textContent\")) {\n            const value = String(nodeActions.textContent);\n            if (node.nodeValue === value) return;\n            elementActions.push (()=> node.nodeValue = value);\n        }\n\n        // DOM change\n        else if (nodeActions.switch) {\n            elementActions.push(()=> node.replaceWith(nodeActions.switch));\n        }\n        else {\n            nodeActions.replace.forEach((newNode, oldNode)=> {\n                elementActions.push(()=> \n                    //oldNode.replaceWith(newNode));\n                    node.replaceChild(newNode, oldNode));\n            });\n            for (const removes of nodeActions.remove.values()) {\n                for (const nodeToRemove of removes) {\n                    if (nodeToRemove.parentNode && nodeToRemove.parentNode === node) {\n                        elementActions.push(()=> node.removeChild(nodeToRemove));\n                    }\n                }\n            }\n            for (const appends of nodeActions.append.values()) {\n                for (const newChildElement of appends) {\n                    elementActions.push(()=> node.appendChild(newChildElement));\n                }\n            }\n        }\n    });\n\n    return [...attributeActions, ...elementActions];\n}\n\n// For debugging purposes\nexport function logNodeActions() {\n    const { nodeActionsMap } = NODES_STATE;\n    [...nodeActionsMap.entries()]\n    .map(([node, actions])=> {\n\n        switch (node.nodeType) {\n            case Node.ELEMENT_NODE: {\n                console.log (\"Actions for\", node);\n                const appendElements = [...actions.append.values()];\n                if (appendElements.length) {\n                    console.log(\"Append\", appendElements);\n                }\n                const replaceElements = [...actions.replace.entries()];\n                if (replaceElements.length) {\n                    console.log(\"Append\", replaceElements);\n                }\n                if (actions.remove.size) {\n                    console.log (\"Remove\", actions.remove);\n                }\n                break;\n            }\n\n            case Node.ATTRIBUTE_NODE: {\n                console.log (\"Set Attribute\", node.nodeName, \"on\", node.originalOwnerElement, \"to\", actions.setAttribute);\n                break;\n            }\n\n            case Node.TEXT_NODE: {\n                console.log (\"Set text content for\", node.parentNode, \"to\", actions.textContent);\n                break;\n            }\n        }\n    });\n}\n// This function runs on requestAnimationFrame to run pending Node actions\nexport function doUpdateDOM() {\n    let { nodeActionsMap } = NODES_STATE;\n    if (nodeActionsMap.size) {\n        // logNodeActions();\n        const DOMActions = resolveNodeActionsMapToDOMActions(nodeActionsMap);\n        DOMActions.forEach(DOMAction=> DOMAction());\n        NODES_STATE.nodeActionsMap = new Map();\n    }\n}\n\n","\n// Sets an internal read-only \"hidden\" property on an object:\nexport function setHiddenProperty(obj, propName, propValue, enumerable=false) {\n    Object.defineProperty(obj, propName, {\n        value: propValue,\n        configurable: false,\n        writable: false,\n        enumerable,\n    });\n}","import { BOOLEAN_ATTRIBUTES, BUILT_IN_STATE_PROPS } from \"./consts.js\";\nimport { generateStateNodeActions } from './node_actions.js';\nimport { setHiddenProperty } from \"./prop_utils.js\";\n\nlet handleStatesRAFId = null;\n\nif (typeof HTMLElement === 'undefined') {\n    console.warn (\"HTMLElement was not found! This probably means you are running in a non-browser environment, and can lead to unexpected results\");\n}\nelse {\n    // Make sure \"setAttribute\" is not overridable\n    Object.defineProperty(globalThis, \"elementSetAttribute\", {\n        value: HTMLElement.prototype.setAttribute,\n        writable: false,\n        configurable: false\n    });\n}\n\n\nexport const setAttribute = function(attrName, attrValue) {\n    if (BOOLEAN_ATTRIBUTES.includes(attrName)) {\n        if (attrValue === \"false\") {\n            this.removeAttribute(attrName);\n        }\n        else {\n            elementSetAttribute.call(this, attrName, \"\");\n        }\n    }\n    else {\n        elementSetAttribute.call(this, attrName, attrValue);\n    }\n}\n\n// This creates the binding to state props on \"State attributes\".\n// This function is called when a custom element instance ic connected to the DOM\nexport const setStateAttribute = function(attrName, stateProp) {\n    let equalityValue = null;\n    if (stateProp.indexOf(':') !== -1) {\n        if (stateProp.indexOf('is_') === 0) {\n            const colonIndex = stateProp.indexOf(':');\n            if (colonIndex === -1) {\n                throw Error(\"When using conditional equality state attribute, you must include a colon character followed by an equality value!\");\n            }\n            equalityValue = stateProp.substring(colonIndex+1);\n            stateProp = stateProp.substring(3, colonIndex);\n        }\n    }\n    let [stateVal, theState] = this.getState(stateProp, true); \n\n    if (stateVal === undefined) {\n        console.warn(`State value for ${stateProp} is undefined. State values should never be undefined.`)\n        return;\n    }\n    if (!theState) {\n        console.warn (\"No State object with state prop: \" + stateProp);\n        return;\n    }\n    if (equalityValue) {\n        const conditionalStateProp = \"is_\"+stateProp+equalityValue;\n        const originalStateProp = stateProp;\n        Object.defineProperty(theState, conditionalStateProp, {\n            get() {\n                return this[originalStateProp] === equalityValue\n            },\n            enumerable: false\n        });\n        theState._stateManager.addStateDependency(stateProp, conditionalStateProp);\n        stateVal = theState[conditionalStateProp];\n        stateProp = conditionalStateProp;\n    }\n\n    const valueToSet = stateVal;\n    this.removeAttribute(attrName);\n    // Create an \"Attribute Node\"\n    const stateAttrNode = document.createAttribute(attrName);\n    stateAttrNode.nodeValue = valueToSet;\n    // Saves a readonly boolean that marks this as a \"state attribute node\"\n    setHiddenProperty(stateAttrNode, \"isStateAttribute\", true);\n    // Save ownerElement to a different property,\n    // so if the attribute is removed (in case of a boolean attribute),\n    // and later re-attached, we would know which element to add it back to.\n    setHiddenProperty(stateAttrNode, \"originalOwnerElement\", this);\n/*\n    Object.defineProperty(stateAttrNode, \"stateValue\", {\n        value: valueToSet,\n        writeable: true,\n        configurable: false,\n        enumerable: true\n    });\n*/\n    if (typeof valueToSet === \"boolean\") {\n        // A boolean attribute value should ALWAYS be an empty string,\n        // the value itself never changes, it is removed fron the element if false, \n        // and added if true\n        stateAttrNode.nodeValue = \"\";\n    }\n\n    // Adds the attribute to the element\n    if (valueToSet !== false) {\n        this.setAttributeNode(stateAttrNode);\n    }\n\n    theState._stateManager.addStateNode(stateProp, stateAttrNode, typeof valueToSet === \"boolean\");\n\n}\nexport const setStateText = function(stateProp) {\n    const [stateVal, theState] = this.getState(stateProp, true); \n\n    if (stateVal === undefined || stateVal === null) {\n        console.warn(`State value for ${stateProp} is undefined or null for _text command`);\n        return;\n    }\n    if (!theState) {\n        console.warn (\"No State object with state prop: \" + stateProp);\n        return;\n    }\n    const valueToSet = stateVal;\n    const textNode = document.createTextNode(valueToSet);\n    setHiddenProperty(textNode, \"isStateAttribute\", true);\n    this.appendChild(textNode);\n    theState._stateManager.addStateNode(stateProp, textNode);\n}\n\n// Convert a stateObject to a custom element, used in State Map Arrays\nexport function stateToElement(stateObject, elemName, wrapInElement) {\n    const customElementInstance = document.createElement(elemName);\n    customElementInstance.setInitialState(stateObject);\n    let returnElement;\n    if (wrapInElement) {\n        returnElement = document.createElement(wrapInElement);\n        returnElement.appendChild(customElementInstance);\n    }\n    else {\n        returnElement = customElementInstance;\n    }\n    return returnElement;\n}\n\nexport function mapStateArrayToElements(stateItems, elemName, wrapInElement) {\n    // Each state item should be a stateManager\n    return stateItems.map(stateItem => {\n        if (stateItem.hasOwnProperty('state')) stateItem = stateItem.state;\n        if (typeof stateItem !== 'object') {\n            console.warn(\"item in State array for _map is not an object: \", stateItem);\n            return {};\n        }\n        return stateToElement(stateItem, elemName, wrapInElement);\n    });\n}\n\n// Main function that handles all state changes in a state object\nexport function handleStateChange(stateManager, stateProp) {\n    console.log (\"handleStateChange:\", stateProp);\n    if (BUILT_IN_STATE_PROPS.includes(stateProp)) return;\n    // Populate the next Node Actions to perform\n    generateStateNodeActions(stateManager, stateProp);\n\n    const state = stateManager.state;\n    // Run on[stateProp]Change hooks\n    if (state.hasOwnProperty(`on_${stateProp}Change`)) {\n        if (typeof state[`on_${stateProp}Change`] === \"function\")\n            state[`on_${stateProp}Change`].call(state);\n    }\n\n    const stateDependencies = stateManager.stateDependencies[stateProp];\n    if (stateDependencies) {\n        stateDependencies.forEach(depStateProp=> {\n            // A \"Setter\" hook\n            if (depStateProp.indexOf('set_') === 0) {\n                const setStateProp = depStateProp.substring(4);\n                const func = state[depStateProp][0];\n                if (func && typeof func === \"function\") {\n                    state[setStateProp] = func.call(state);\n                    return;\n                }\n            }\n            generateStateNodeActions(stateManager, depStateProp);\n            if (state.hasOwnProperty(`on${depStateProp}Change`)) {\n                if (typeof state[`on${depStateProp}Change`] === \"function\")\n                    state[`on${depStateProp}Change`].call(state);\n            }\n        });\n    }\n\n    // Global state\n    if (!state._global) {\n        const globalStateDependencies = stateManager.globalStateDependencies[stateProp];\n        globalStateDependencies?.forEach((depStateProps, depStateManager)=> {\n            const depState = depStateManager.state;\n            depStateProps.forEach(depStateProp=> {\n                // A \"Setter\" hook\n                if (depStateProp.indexOf('set_') === 0) {\n                    const setStateProp = depStateProp.substring(4);\n                    const func = state[depStateProp][0];\n                    if (func && typeof func === \"function\") {\n                        depState[setStateProp] = func.call(depState);\n                        return;\n                    }\n                }\n                generateStateNodeActions(depStateManager, depStateProp);\n                if (state.hasOwnProperty(`on${depStateProp}Change`)) {\n                    if (typeof state[`on${depStateProp}Change`] === \"function\")\n                        depState[`on${depStateProp}Change`].call(depState);\n                }\n            });\n        });\n    }\n}\n\nexport function populateStateFromInitialState(state, initialState) {\n    state._populate = true;\n    const descriptors = Object.getOwnPropertyDescriptors(initialState);\n    let descrp;\n    for (let key in descriptors) {\n        if (BUILT_IN_STATE_PROPS.includes(key)) {\n            delete descriptors[key];\n            continue;\n        }\n        descrp = descriptors[key];\n        if (descrp.hasOwnProperty('get') && typeof descrp.get === \"function\") {\n            descrp.get.bind(state);\n        }\n        if (descrp.hasOwnProperty('value')) {\n            const value = descrp.value;\n            if (typeof value === \"function\") {\n                descrp.value.bind(state);\n            }\n            else if (Array.isArray(value) && key.indexOf(\"set_\") === 0) {\n                const func = value?.[0];\n                if (func && typeof func === \"function\") {\n                    func.bind(state);\n                }\n            }\n        }\n    }\n\n    // If state set hooks should run on initialization - \n    // they should run by the proxy handler for \"defineProperty\"\n    Object.defineProperties(state, descriptors);\n    delete state._populate;\n}\n\n/* Experimental rendering of state maps using DocumentFragment. Not stable */\n/* \nexport function resolveStateMapToDocumentFragment({ customElementName, parentElement}, stateMapArray) {\n    const resolvedDocumentFragment = new DocumentFragment();\n    // const stateMapNodeActions = getNewNodeActionsObject();\n    let currentStateMapArrayIndex = -1;\n    const isParentAList = isElementAList(parentElement);\n    // Compares state map arrays to actual DOM elements (by comparing state objects)\n    if (parentElement.children.length) {\n        Array.prototype.forEach.call(parentElement.children, (childElement, currentIndex)=> {\n            let customElementChild = childElement;\n            // State map elements inside Lists are wrapped with a <li>\n            if (isParentAList) customElementChild = childElement.firstElementChild;\n            let stateItem = stateMapArray[currentIndex]; \n            if (stateItem?.hasOwnProperty('state')) stateItem = stateItem.state;\n            if (stateItem && customElementChild.state !== stateItem) {\n                const newCustomElementChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                resolvedDocumentFragment.appendChild(newCustomElementChild);\n            }\n            else {\n                resolvedDocumentFragment.append(childElement)\n            }\n            currentStateMapArrayIndex = currentIndex;\n        });\n    }\n\n    // If there are more state objects in the stateMapArray - append equivalent child elements \n    currentStateMapArrayIndex++;\n    for (let i = currentStateMapArrayIndex, len=stateMapArray.length; i<len; i++) {\n        const stateItem = stateMapArray[i];\n        // New state item === new child element to append\n        if (stateItem) {\n            // Make sure we don't already have a pending append action for the same state object\n            const newChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n            resolvedDocumentFragment.appendChild(newChild);\n        }\n    }\n\n    return resolvedDocumentFragment;\n    if (resolvedDocumentFragment.children.length) {\n        parentElement.innerHTML = '';\n        //addReplaceAction(stateMapNodeActions, childElement, replaceWithChild);\n        //nodeActionsMap.set(parentElement, stateMapNodeActions);\n    }    \n}\n*/\n\n","import { mapStateArrayToElements } from \"./state_utils.js\";\nimport { SUPPORTED_ATTRIBUTES_FOR_BINDING, SUPPORTED_PROPERTIES_FOR_BINDING, SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING } from \"./consts.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { isElementAList } from \"./DOM_utils.js\";\nimport { attributeValueToTypedValue } from \"./attr_utils.js\";\n\nfunction mapStateToElements(stateItemsPropertyName, customElementName, parentElement) {\n    const [stateItemsArray, theState] = parentElement.getState(stateItemsPropertyName, true);\n    if (!stateItemsArray || !Array.isArray(stateItemsArray)) {\n        console.warn (\"state value for _map is not an array, in state property: \" + stateItemsPropertyName);\n        return null;\n    }\n    const wrapInElement = isElementAList(parentElement) ? \"li\" : undefined;\n    const elements = mapStateArrayToElements(stateItemsArray, customElementName, wrapInElement);\n    parentElement.innerHTML = \"\";\n    if (elements.length) {\n        parentElement.append(...elements);\n    }\n    return theState;\n}\n\n// Functions that run and handles \"Command\" attributes. Note, they should always be called\n// with the \"this\" context set to the custom element the command is defined on\nexport const COMMANDS = {\n    map: function(commandValue) {\n        // The command value (\"argument\") is \"<stateProp>:<custom element name>\"\n        const [stateItemsPropertyName, customElementName] = commandValue.split(':');\n        const thiselement = this;\n        const theState = mapStateToElements(stateItemsPropertyName, customElementName, thiselement);\n        if (!theState) {\n            console.warn (`Mapping ${stateItemsPropertyName} to ${customElementName} failed!`);\n            return;\n        }\n        theState._stateManager.addStateMap(stateItemsPropertyName, customElementName, thiselement);\n    },\n    text: function(commandValue) {\n        const stateProp = commandValue;\n        this.initialSetText(stateProp);\n        // DO NOT CALL .normalize()! It might change the Text Nodes!\n    },\n    bind: function(commandValue) {\n        const [attributeName, statePropName] = commandValue.split(':');\n        if (!attributeName || !statePropName) {\n            console.warn (\"Incorrect usage of _bind command! Please pass <attribute-name>:<state-prop-name>\");\n            return;\n        }\n        if (!attributeName in SUPPORTED_ATTRIBUTES_FOR_BINDING) {\n            console.warn (`Attribute ${attributeName} is not supported for _bind command!`);\n            return;\n        }\n        this.bindAttributeToState(attributeName, statePropName);\n\n        if (SUPPORTED_PROPERTIES_FOR_BINDING.includes(attributeName)) {\n            if (attributeName === \"value\" && this.tagName === \"INPUT\" && SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING.includes(this.getAttribute('type'))) {\n                this.addEventListener(\"input\", \n                    ()=> this.updateStateFromProperty(\"value\")\n                );\n            }\n            else if (attributeName === \"checked\" && this.tagName === \"INPUT\" && this.getAttribute('type') === \"checkbox\") {\n                this.addEventListener(\"change\", \n                    ()=> this.updateStateFromProperty(\"checked\")\n                );\n            }\n        }\n   },\n}","import { COMMANDS as COMMAND_ATTRIBUTES } from \"./commands.js\";\nimport { BOOLEAN_ATTRIBUTES, SUPPORTED_ATTRIBUTES_FOR_BINDING, GLOBAL_STATE_FUNCTION_NAME, DEFAULT_TEMPLATE_DOM } from \"./consts.js\";\nimport { setAttribute, setStateAttribute, setStateText } from \"./state_utils.js\";\n\nexport function extendElementClassWithReactiveElementClass(elementClass, appScope = window) {\n    class ReactiveElement extends elementClass {\n        // Should contain the \"root\" DOM element containing this element\n        host = null\n\n        // For input elements - to force bubble-up of change events\n        #changeEventHandler\n\n        #wasMounted = false\n\n        // Used for the _bind command, which allows \"reverse-binding\" attribute values to state props,\n        // keys are attribute names, values are state prop names\n        #boundAttributesToState = {}\n\n        static observedAttributes = [\"ref\"]\n                                    .concat(SUPPORTED_ATTRIBUTES_FOR_BINDING)\n                                    .concat(Object.keys(COMMAND_ATTRIBUTES).map(command => ('_' + command.toLowerCase())));\n\n\n        bindAttributeToState(attrName, statePropName) {\n            this.#boundAttributesToState[attrName] = statePropName;\n        }\n        unbindAttributeToState(attrName) {\n            delete this.#boundAttributesToState[attrName];\n        }\n        \n        // For input elements\n        updateStateFromProperty(propertyName) {\n            let newValue = this[propertyName];\n            const stateProp = this.#boundAttributesToState[propertyName];\n            const [stateValue, theState] = this.getState(stateProp, true);\n            if (stateValue !== newValue) theState[stateProp] = newValue;\n\n        }\n\n        #updateStateFromAttribute(attributeName) {\n            let newValue = this.getAttribute(attributeName);\n            if (BOOLEAN_ATTRIBUTES.includes(attributeName)) {\n                if (newValue === null) newValue = false;\n                else newValue = true;\n            }\n            const stateProp = this.#boundAttributesToState[attributeName];\n            const [stateValue, theState] = this.getState(stateProp, true);\n            if (stateValue !== newValue) theState[stateProp] = newValue;\n        }\n\n        disconnectedCallback() {\n            if (this.#changeEventHandler) this.removeEventListener('change', this.#changeEventHandler);\n            const host = this.host ?? this;\n            if (host.ref) {\n                const thisRefName = this.getAttribute('ref');\n                if (thisRefName) { \n                    delete host.ref[thisRefName];\n                    delete host.events[thisRefName];\n                }\n            }\n            this.#boundAttributesToState = {};\n        }\n\n        connectedCallback() {\n            if (this.#wasMounted) return;\n            // IMPORTANT: THIS *CAN* be NULL, DO NOT CHANGE IT!\n            // It is part of the way a check is made to see if an element is part of ShadowDOM!\n            // host will be null if the element is part of the DOM === the \"root\" custom element will have null in .host\n            // THIS SHOULD BE THE FIRST THING THAT HAPPENS!\n            this.host = this.getRootNode().host;\n\n\n            // Keep it here and not in bindEvents! \n            if (this?.tagName === \"INPUT\") {\n                this.#changeEventHandler = function() {\n                    const changeEvent = new Event('inputChange', { bubbles: true, composed: true });\n                    this.dispatchEvent(changeEvent);\n                }\n                // Change events does not automatically bubbles, we need to listen and bubble up a new event\n                this.addEventListener('change', this.#changeEventHandler, false);\n            }\n\n            const commands = [];\n            const attributeNames = this.getAttributeNames();\n            for (const attrName of attributeNames) {\n                const attrValue = this.getAttribute(attrName);\n                // This also resolves \"State attributes\"\n                this.initialSetAttribute(attrName, attrValue);\n\n                // Save \"Command attributes\"\n                if (attrName.indexOf('_') === 0) {\n                    const command = attrName.substring(1);\n                    commands.push({ command, args: attrValue });\n                }\n            } \n            commands.forEach(({ command, args})=> {\n                COMMAND_ATTRIBUTES[command]?.call(this, args);\n            });\n            this.#wasMounted = true;\n        }\n\n        attributeChangedCallback(attributeName, oldValue, newValue) { \n            if (oldValue === newValue) return;\n            if (!this.isConnected) return;\n\n            if (attributeName === \"ref\") {\n                const host = this.isNativeElement ? this.host : this;\n                const refValue = newValue;\n                host.ref[refValue] = this;\n            }\n\n            if (attributeName in this.#boundAttributesToState) {\n                this.#updateStateFromAttribute(attributeName);\n            }\n        }\n\n        // Gets state value of stateProp,\n        // tries to resolve from local state(s) first,\n        // and then from global. If the second argument is true, returns both the state value and the state objec\n        getState(stateProp, returnStateObject=false) {\n            let theState;\n            // If this is a reactive element inside a reactive web component - the host should be the containing web component - \n            // we should reference its state, if host is null - it is most likely the host web component\n            let thisInstance = this.isNativeElement && this.host ? this.host : this;\n            // if (!thisInstance) return returnStateObject ? [undefined, undefined] : undefined;\n            let stateVal;\n            if (thisInstance && thisInstance.state) {\n                stateVal = thisInstance.state?.[stateProp];\n            }\n\n            let globalState = false;\n            while (stateVal === undefined && typeof thisInstance.host !== 'undefined' && thisInstance.host !== null) {\n                thisInstance = thisInstance.host;\n                stateVal = thisInstance.state?.[stateProp];\n            }\n\n            if (stateVal !== undefined) theState = thisInstance.state;\n            else {\n                globalState = appScope[GLOBAL_STATE_FUNCTION_NAME]();\n                stateVal = globalState?.[stateProp];\n                if (stateVal !== undefined) theState = globalState;\n            } \n            if (returnStateObject) {\n                return [stateVal, theState];\n            }\n            return stateVal;\n        }\n        \n        findElement(refName) {\n            const host = this.host || this;\n            // if Shadow DOM is used, the \"root\" element is shadowRoot, otherwise it is the \n            // web component itself\n            let root = host;\n            if (appScope.SPROUT_CONFIG.useShadow) {\n                root = host.shadowRoot;\n            }\n            return host.ref.hasOwnProperty(refName) ? host.ref[refName] : root.querySelector(`[ref=\"${refName}\"]`);\n        }\n\n        // The \"initialSetX\" functions are called:\n        // 1. When a custom element instance is first created (before it's connected) - \n        // state attribute values are set to their state prop names (e.g: '$name').\n        // 2. When a custom element instance becomes connected (added to the DOM) - state attribute values are actually resolved to the\n        // value of their respective state prop values, and binding between them occurs.\n        initialSetText(stateProp) {\n            setStateText.call(this, stateProp);\n        }\n        initialSetAttribute(attributeName, attributeValue) {\n            attributeValue = String(attributeValue);\n            let valueToSet = attributeValue;\n            /*\n            // \"Property Attribute\"\n            if (attributeValue.indexOf('@') === 0 && this.host && this.isConnected) {\n                valueToSet = this.host.getAttribute(attributeValue.substring(1));\n            } \n            */\n            \n            // \"State attribute\"\n            if (attributeValue.indexOf('$') === 0 && this.isConnected)  {\n                let stateProp = attributeValue.substring(1);\n                setStateAttribute.call(this, attributeName, stateProp);\n            }\n            // normal attribute\n            else {\n                setAttribute.call(this, attributeName, valueToSet);\n            }\n        }\n    }\n\n    /*\n    if (DEBUG_MODE) {\n        const descriptors = Object.getOwnPropertyDescriptors(ReactiveElement.prototype);\n        for (const key in descriptors) {\n            const descrp = descriptors[key];\n            Object.defineProperty(ReactiveElement.prototype, key, {\n                writable: descrp.writable,\n                configurable: descrp.configurable,\n                enumerable: descrp.enumerable,\n                value: ()=> {\n                    `Calling ${key} on ReactiveElement for ${elementClass.toString()}`;\n                    descrp.value();\n                }\n            });\n        }\n    }\n    */\n\n    return ReactiveElement;\n}\n","function debugGetProxyHandler(scopeName, originalObject) {\n    return {\n        get(target, property, receiver) {\n            if (typeof property === \"symbol\") return Reflect.get(...arguments);\n            console.debug (`Property ${property} called on ${scopeName}`);\n            if (property === \"prototype\") {\n                // return Object.getPrototypeOf(originalObject.prototype);\n                return originalObject.prototype;\n            }\n            if (typeof target[property] === \"function\") {\n                return new Proxy(target[property], debugApplyProxyHandler(property, `${scopeName}.${property}`));\n            }\n            else if (typeof target[property] === \"object\") {\n                if (!target[property].hasOwnProperty(\"_stateManager\")) {\n                    return new Proxy(target[property], debugGetProxyHandler(`${scopeName}.${property}`));\n                }\n            }\n            return Reflect.get(...arguments);\n        }\n    }\n}\n\nfunction debugApplyProxyHandler(funcName, scopeName) {\n    return {\n        construct(target, args, newTarget) {\n            console.debug(`Constructing ${funcName}`);\n            return Reflect.construct(target, args, newTarget);\n        },\n        apply(target, thisArg, argumentsList) {\n            console.debug(`Function: ${funcName} with arguments: ${argumentsList} called on ${scopeName}`);\n            return Reflect.apply(...arguments);\n        },\n    }\n}\nexport function putObjectInDebugMode(obj, name) {\n    return new Proxy(obj, debugGetProxyHandler(name, obj));\n}","import StateManager from \"./StateManager.js\";\nimport { StatefulArrayHandler } from \"./proxy_handlers.js\";\nimport { handleStateChange } from \"./state_utils.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\n\nclass StatefulArray extends Array {\n\n    // This will define which \"constructor\" JS calls whenever it needs to construct a new array while calling some Array native functions\n    static get [Symbol.species]() {\n        return Array;\n    }\n\n    // If any of these are \"set\" - handle state change in the value\n    dependencyProps = new Map();\n\n    // We set the $$operation property on functions that manipulates the array in a way that can change its length,\n    // to prevent redundant calls for handleStateChange.\n    // The call will be made when the \"length\" property of the array will be changed\n    splice(...args) {\n        this.$$operation = \"splice\";\n        const result = super.splice(...args);\n        delete this.$$operation;\n        return result;\n    }\n    shift(...args) {\n        this.$$operation = \"shift\";\n        const result = super.shift(...args);\n        delete this.$$operation;\n        return result;\n    }\n    unshift(...args) {\n        this.$$operation = \"splice\";\n        const result = super.unshift(...args);\n        delete this.$$operation;\n        return result;\n    }\n\n    sort(...args) {\n        this.$$operation = \"sort\";\n        const result = super.sort(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    reverse(...args) {\n        this.$$operation = \"reverse\";\n        const result = super.reverse(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    fill(...args) {\n        this.$$operation = \"fill\";\n        const result = super.fill(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n    \n    copyWithin(...args) {\n        this.$$operation = \"copyWithin\";\n        const result = super.sort(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    slice(...args) {\n        this.$$operation = \"slice\";\n        const result = super.slice(...args);\n        delete this.$$operation;\n        return result;\n    }\n\n    /*\n    clone() {\n        this.$$operation = \"clone\";\n        const result = this.map(item=> item);\n        delete this.$$operation;\n        return result;\n    }\n    */\n    toArray() {\n        this.$$operation = \"toArray\";\n        /*\n        const result = [];\n        for (let i = 0, len=this.length; i<len; i++) {\n            result.push(Object.assign({}, this[i]));\n        }\n        */\n        const result = this.rawArray;\n        delete this.$$operation;\n        return result;\n    }\n    // noConvertToStateItems can be used in internal methods where a normal array is returned and you just want to recreate a StatefulArray,\n    // with the same state items\n\n    // NOTE: original Array constructor can get a series of arguments to build an array from, OR a single number,\n    // to create an array with that number as a length\n    constructor(initialArray, parentStateObject, arrayStateProp, noConvertToStateItems=false, appScope = window) {\n        if (!Array.isArray(initialArray)) {\n            throw Error(\"Argument for StateFulArray constructor must be an array!\");\n        }\n\n        const rawArray = initialArray;\n        let statefulArray;\n        if (!noConvertToStateItems) {\n            statefulArray = rawArray.map((item, index)=> {\n                if (item?.hasOwnProperty('state')) return item;\n                if (Array.isArray(item)) return item; // return new StatefulArray(item, this[index].state, index, false, appScope); \n                if (typeof item === 'object') return new StateManager(item, arrayStateProp, parentStateObject._stateManager, false, appScope);\n                return item;\n            });\n        }\n        super(...statefulArray);\n\n        this.parentStateObject = parentStateObject;\n        this.arrayStateProp = arrayStateProp;\n        this.rawArray = rawArray;\n\n        statefulArray = new Proxy(this, StatefulArrayHandler(parentStateObject?._stateManager, arrayStateProp, appScope));\n        return statefulArray;\n    }\n}\n\nif (DEBUG_MODE) {\n    StatefulArray = putObjectInDebugMode(StatefulArray, \"StatefulArray\");\n}\n\nexport default StatefulArray;","import StateManager from \"./StateManager.js\";\nimport { handleStateChange } from \"./state_utils.js\";\nimport StatefulArray from \"./StatefulArray.js\";\nimport { BUILT_IN_STATE_PROPS, ERROR_MESSAGES } from \"./consts.js\";\n\nexport const StatefulArrayHandler = function(parentStateManager, arrayStateProp, appScope = window) {\n    return {\n        set(targetArray, property, value) {\n            // A change in array length triggers state change in the array state prop\n            if (property === \"length\") {\n                const setResult = Reflect.set(targetArray, property, value);\n                parentStateManager.setDirtyProp(arrayStateProp);\n                // queueMicrotask(()=> handleStateChange(parentStateManager, arrayStateProp));\n                return setResult;\n            }\n\n            // Return if the value is the same\n            if (targetArray[property] === value) return true;\n\n            const index = Number(property);\n            if (!isNaN(index)) { // Check if the property is a numeric index\n                // If we set it to a new object, convert it to a state object\n                if (typeof value === 'object' && (!value.hasOwnProperty('_stateManager') && !value.hasOwnProperty('state'))) {\n                    value = new StateManager(value, arrayStateProp, parentStateManager, false, appScope);\n                }\n                // Make sure state values are always state manager values\n                // Sometimes they can be state objects (because of the custom get handler in the Proxy)\n                if (value.hasOwnProperty('_stateManager')) {\n                    value = value._stateManager;\n                }\n                // This means the object actions are part of a native array function ('splice' etc.), and that we should NOT\n                // mark $$mapAction on values\n                if (!targetArray.hasOwnProperty('$$operation')) {\n                    let doStateChangeHandle = false;\n                    if (index < targetArray.length) {\n                        doStateChangeHandle = true;\n                    }\n                    const setResult = Reflect.set(targetArray, property, value);\n                    // Only handle state change if this is a change for an existing array item,\n                    // if it's a new item, it will already be handled on the \"length\" property set\n                    // Without this check we will have a redundant state check\n                    if (doStateChangeHandle) {\n                        parentStateManager.setDirtyProp(arrayStateProp);\n                        //queueMicrotask(()=> handleStateChange(parentStateManager, arrayStateProp));\n                    }\n                    return setResult;\n                }\n            }\n            return Reflect.set(targetArray, property, value);\n        },\n        \n        get(targetArray, property, receiver) {\n            // if (typeof property === 'symbol') return Reflect.get(...arguments);\n            // if (property === 'hasOwnProperty') return Reflect.get(...arguments);\n            const index = Number(property);\n            if (!isNaN(index)) {\n                if (!targetArray[index]) return undefined;\n                if (targetArray[index].hasOwnProperty('state')) return targetArray[index].state;\n                // Could be another array\n                return targetArray[index];\n            }\n\n            /*\n            // If this property is set on the array, it means the get is part of a \"dependency check\"\n            if (targetArray.hasOwnProperty(\"_gettingDependenciesFor\")) {\n                targetArray.dependencyProps.set(property, targetArray._gettingDependenciesFor);\n                delete targetArray._gettingDependenciesFor;\n            }\n            */\n            \n            return Reflect.get(...arguments);\n        }\n    }\n}\n\nexport const StateObjectValueHandler = function(rootStateObj, objPropertyName, appScope = window) {\n    return {\n        defineProperty(targetObj, property, descriptor) {\n            if (typeof descriptor?.value !== \"undefined\") {\n                const value = descriptor.value;\n                // Could already be a StatefulArray (needs to find better way to detect this)\n                if (Array.isArray(value)) {\n                    if (!value?.[0]?._stateManager) {\n                        descriptor.value = new StatefulArray(descriptor.value, rootStateObj, objPropertyName, false, appScope);\n                    }\n                }\n                else if (typeof value === \"object\") {\n                    descriptor.value = new Proxy(descriptor.value, StateObjectValueHandler(rootStateObj, objPropertyName, appScope))\n\n                }\n            }\n            else if (typeof descriptor?.get === \"function\") {\n                descriptor.get.call(targetObj);\n            }\n            // Don't use \"arguments\" here - they are not linked to argument changes in 'strict'\n            const definePropertyResult = Reflect.defineProperty(targetObj, property, descriptor);\n            const stateManager = rootStateObj._stateManager;\n            stateManager.setDirtyProp(objPropertyName);\n            // queueMicrotask(()=> handleStateChange(stateManager, objPropertyName));\n            return definePropertyResult;\n        },\n    }\n}\nexport const StateHandler = function(stateObj, appScope = window) {\n    return {\n        defineProperty(targetState, stateProp, descriptor) {\n            if (BUILT_IN_STATE_PROPS.includes(stateProp) || targetState?._binding) {\n                return Reflect.defineProperty(...arguments);\n            }\n            const origTargetState = targetState;\n            const dependencies = new Set();\n            // Will be the actual prop name if this is a state hook setter\n            let setStateProp;\n            targetState = new Proxy(targetState, {\n                get(target, property, receiver) {\n                    if (property === \"_global\") {\n                        target._global._gettingDependenciesFor = stateProp;\n                        target._global._localStateManager = target._stateManager;\n\n                    }\n                    if (BUILT_IN_STATE_PROPS.includes(property)) {\n                        return Reflect.get(...arguments);\n                    }\n                    if (Array.isArray(target[property])) {\n                        target[property]._gettingDependenciesFor = stateProp;\n                    }\n                    dependencies.add(property);\n                    return Reflect.get(...arguments);\n                }\n            });\n            if (typeof descriptor?.value !== \"undefined\") {\n                const value = descriptor.value;\n                // Could already be a StatefulArray (needs to find better way to detect this)\n                if (Array.isArray(value)) {\n                    // Setter Hook\n                    if (stateProp.indexOf('set_') === 0) {\n                        const deps = value?.[1];\n                        if (!deps) throw Error(ERROR_MESSAGES.NO_DEPENDENCIES_ARRAY_IN_SET_HOOK(stateProp));\n                        // Second item should be an array of dependencies\n                        value?.[1].forEach(depProp=> {\n                            dependencies.add(depProp);\n                        });\n                        // Third item can be a boolean stating if to run the setter on initialization\n                        if (value?.[2] === true) {\n                            setStateProp = stateProp.substring(4);\n                            const func = value?.[0];\n                            if (func && typeof func === \"function\") {\n                                stateObj[setStateProp] = func.call(stateObj);\n                            }\n                        }\n                        else {\n                            if (value?.[3]) {\n                                stateObj[setStateProp] = value[3]\n                            }\n                        }\n                    }\n                    else if (!value?.[0]?._stateManager) {\n                        descriptor.value = new StatefulArray(descriptor.value, stateObj, stateProp, false, appScope);\n                    }\n                }\n                else if (typeof value === 'object') {\n                    descriptor.value = new Proxy(descriptor.value, StateObjectValueHandler(stateObj, stateProp, appScope));\n                }\n            }\n            else if (typeof descriptor?.get === \"function\") {\n                descriptor.get.call(targetState);\n            }\n\n            if (dependencies.size) {\n                dependencies.forEach(dep=> stateObj._stateManager.addStateDependency(dep, stateProp));\n            }\n\n            // Don't use \"arguments\" here - they are not linked to argument changes in 'strict'\n            const definePropertyResult = Reflect.defineProperty(origTargetState, stateProp, descriptor);\n            const stateManager = stateObj._stateManager;\n            if (setStateProp) stateProp = setStateProp;\n            if (!origTargetState.hasOwnProperty(\"_populate\"))\n                stateManager.setDirtyProp(stateProp);\n                // queueMicrotask(()=> handleStateChange(stateManager, stateProp));\n            return definePropertyResult;\n        },\n        get(targetState, property, receiver) {\n            if (property === 'hasOwnProperty') return Reflect.get(...arguments);\n            // Global state access\n            if (!targetState.hasOwnProperty('_global')) {\n                if (targetState.hasOwnProperty(\"_gettingDependenciesFor\")) {\n                    targetState._stateManager.addGlobalStateDependency(property, targetState._gettingDependenciesFor, targetState._localStateManager);\n                    delete targetState._gettingDependenciesFor;\n                    delete targetState._localStateManager;\n                    return Reflect.get(...arguments);\n                }\n            }\n            // property can be a Symbol on rare occasions, then indexOf will be undefined (that's the reason for the question mark)\n            // This handles using the negate operator on state properties\n            if (typeof property?.indexOf === 'function' && property?.indexOf('!') === 0) {\n                const originalProperty = property.substring(1);\n                if (targetState.hasOwnProperty(originalProperty)) {\n                    return !targetState[originalProperty];\n                }\n            }\n            return Reflect.get(...arguments);\n        }\n    }\n};\n","import { handleStateChange, populateStateFromInitialState } from \"./state_utils.js\";\nimport { StateHandler } from \"./proxy_handlers.js\";\nimport { GLOBAL_STATE_FUNCTION_NAME } from \"./consts.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\nimport { setHiddenProperty } from \"./prop_utils.js\";\n\n// This class actually handles \"State\". It returns a proxied \"state\" object,\n// while handling all state changes and triggers behind the scenes\nclass StateManager {\n\n    // The privateState is used to actually contain values to read from,\n    // as custom getters and setters are defined\n    privateState = {}\n    // This represents the \"publicly\" exposed state object\n    state = {};\n\n    // Saves \"map\" connections between a state array value and a custom element name,\n    // this will enable creating/removing new custom elements when items of a state array change\n    stateArrayMaps = {};\n    // conditionallyRenderingElements = {};\n    // A map that maps state props to \"dependencies\", each time a stateProp which is a key here,\n    // is changed, a state change is triggered for its dependencies as well\n    stateDependencies = {};\n    conditionallyRenderingElements = {};\n\n    // Maps state props to state nodes,\n    // Keys are state props, and values are sets of Nodes\n    stateNodes = {}\n\n    // These are used when the state object is part of Stateful Array\n    parentStateProp\n    parentStateManager\n    // parentStatePropName is used if the state object is e.g. an item of an array on a state object,\n    // or a value in an object on a state object - any change on the child state object should trigger state\n    // changes on the parentStateProp\n    // host is the host element that the state is attached to\n    \n    dirtyProps = new Set();\n\n    #handleStateChangeRAF_ID = null;\n    setDirtyProp(prop) {\n        this.dirtyProps.add(prop);\n        if (this.#handleStateChangeRAF_ID) {\n            cancelAnimationFrame(this.#handleStateChangeRAF_ID);\n            // clearTimeout(this.#handleStateChangeRAF_ID);\n\n        }\n        this.#handleStateChangeRAF_ID = requestAnimationFrame(()=> {\n            this.#handleStateChangeRAF_ID = null;\n            if (this.dirtyProps.size > 0) {\n                this.handleStateChanges();\n            }\n        });\n    }\n\n    handleStateChanges() {\n        console.log (\"Handling state changes for\", this);\n        const stateProps = [...this.dirtyProps];\n        this.dirtyProps.clear();\n        stateProps.forEach(prop=> {\n            handleStateChange(this, prop);\n        });\n    }\n    constructor(initialState, parentStateProp, parentStateManager, isGlobal = false, appScope=window) {\n        this.parentStateProp = parentStateProp;\n        this.parentStateManager = parentStateManager;\n\n        // Saves the actual state manager instance to a readonly _stateManager\n        setHiddenProperty(this.state, \"_stateManager\", this, true);\n        \n        // Initialize a proxy on the \"public state\"\n        this.state = new Proxy(this.state, StateHandler(this.state, appScope));\n        if (!isGlobal) setHiddenProperty(this.state, \"_global\", appScope[GLOBAL_STATE_FUNCTION_NAME](), true);\n        else {\n            // This maps depencdies between \"local\" state properties to global state changes\n            // The difference between the normal dependencies object, is that each depenency\n            // also includes a state object (which is the state context of the property),\n            // in other words, if a local state \"relies\" on a global state change - we save this\n            // mapping here.\n            // The keys are global state properties, where each value is a Map,\n            // in the map, the keys are local state manager objects, and the values are sets with\n            // local property names\n            this.globalStateDependencies = {};\n            this.addGlobalStateDependency = (stateProp, depStateProp, stateManager)=> {\n                if (!this.globalStateDependencies.hasOwnProperty(stateProp)) {\n                    this.globalStateDependencies[stateProp] = new Map();\n                }\n                if (!this.globalStateDependencies[stateProp].has(stateManager)) {\n                    this.globalStateDependencies[stateProp].set(stateManager, new Set());\n                }\n                this.globalStateDependencies[stateProp].get(stateManager).add(depStateProp);\n            }\n        }\n        if (initialState) {\n            populateStateFromInitialState(this.state, initialState);\n        }\n    }\n\n    addStateDependency(stateProp, depStateProp) {\n        if (!this.stateDependencies.hasOwnProperty(stateProp)) {\n            this.stateDependencies[stateProp] = new Set();\n        }\n        this.stateDependencies[stateProp].add(depStateProp);\n    }\n\n    addStateMap(stateProp, customElementName, parentElement) {\n        if (!this.stateArrayMaps.hasOwnProperty(stateProp)) {\n            this.stateArrayMaps[stateProp] = new Map();\n        }\n        this.stateArrayMaps[stateProp].set(parentElement, customElementName);\n    }\n\n\n    addConditionallyRenderingElements(stateProp, element) {\n        if (!this.conditionallyRenderingElements.hasOwnProperty(stateProp)){\n            this.conditionallyRenderingElements[stateProp] = new Set();\n        }\n        element.originalParentElement = element.parentElement || element.host?.shadowRoot;\n        this.conditionallyRenderingElements[stateProp].add(element);\n    }\n    \n   \n    // Node here is either an Attribute Node or a Text Node\n    addStateNode(stateProp, stateNode, isBooleanStateProp=false) {\n        if (!this.stateNodes.hasOwnProperty(stateProp)) {\n            this.stateNodes[stateProp] = new Set();\n            this.setAndBindStateProperty(stateProp, isBooleanStateProp);\n        }\n        this.stateNodes[stateProp].add(stateNode);\n    }\n    setAndBindStateProperty(stateProp) {\n        let stateObj = this.state;\n        let originalStateProp = stateProp;\n        const isNegationProp = stateProp.indexOf('!') === 0;\n        if (isNegationProp) {\n            originalStateProp = stateProp.substring(1);\n        }\n        let descriptor = Object.getOwnPropertyDescriptor(stateObj, originalStateProp);\n        if (!descriptor) {\n            stateObj = stateObj._global;\n            descriptor = Object.getOwnPropertyDescriptor(stateObj, originalStateProp);\n            if (!descriptor) {\n                throw Error(`Could not bind state prop ${stateProp}. State prop ${originalStateProp} not defined!`);\n            }\n        }\n\n        stateObj._binding = true;\n\n        // Some state props can be getters (which usually references other state values)\n        // These should be treated differently: should not be saved in privateState, and should not have a setter defined\n        const isValueProp = descriptor.hasOwnProperty('value');\n        const stateManager = stateObj._stateManager;\n\n        if (isNegationProp) {\n            const negateStateProp = stateProp;\n            if (isValueProp) {\n                if (!stateManager.privateState.hasOwnProperty(negateStateProp)) {\n                    Object.defineProperty(stateObj, negateStateProp, {\n                        get() {\n                            return !stateManager.privateState[originalStateProp];\n                        },\n                        set() {\n                            throw Error(\"Cannot directly set a negation State property!\");\n                        },\n                        enumerable: true,\n                    });\n                    stateManager.addStateDependency(originalStateProp, negateStateProp);\n                }\n            }\n            else {\n                if (!stateManager.state.hasOwnProperty(negateStateProp)) {\n                    Object.defineProperty(stateObj, negateStateProp, {\n                        get() {\n                            return !stateManager.state[originalStateProp];\n                        },\n                        set() {\n                            throw Error(\"Cannot directly set a negation State property!\");\n                        },\n                        enumerable: true,\n                    });\n                    stateManager.addStateDependency(originalStateProp, negateStateProp);\n                }\n            }\n        }\n        else {\n            if (isValueProp) {\n                if (!stateManager.privateState.hasOwnProperty(stateProp)) {\n                    stateManager.privateState[stateProp] = stateObj[stateProp];\n                }\n                Object.defineProperty(stateObj, stateProp, {\n                    set(value) {\n                        const currentVal = stateManager.privateState[stateProp];\n                        if (value === currentVal) return;\n                        // Sets value to \"private state\"\n                        stateManager.privateState[stateProp] = value;\n                        handleStateChange(stateManager, stateProp);\n                        // If this is an item in a Stateful Array, also trigger a state change for the state prop that contains the array\n                        if (stateManager.parentStateManager) {\n                            handleStateChange(stateManager.parentStateManager, stateManager.parentStateProp);\n                        }\n                    },\n                    get() {\n                        // Value is always retrieved from the \"private\" state\n                        return stateManager.privateState[stateProp];\n                    }\n                });\n            }\n            // If is a getter then - it can't be set, and the getter will return the value.\n        }\n        delete this.state._binding;\n    }\n}    \n\nif (DEBUG_MODE) {\n    StateManager = putObjectInDebugMode(StateManager, 'StateManager');\n}\n\nexport default StateManager;\n","\n\n// This is the script that takes Template elements from the page and defines Reactive Custom Elements\nexport default function(appScope, appName) {\n\n    // Create custom elements from templates\n    async function defineCustomElementFromTemplate(template, elemName, globalStylesheet) {\n        const templateContent = document.importNode(template.content, true);\n        const style = templateContent.querySelector('style');\n        if (style) templateContent.removeChild(style);\n        const runtime = templateContent.querySelector('script');\n        if (runtime) templateContent.removeChild(runtime);\n\n        customElements.define(\n            elemName, \n            class extends appScope.ReactiveCustomElement {\n                constructor() {\n                    super(templateContent, runtime, style?.textContent, globalStylesheet);\n                }\n            }\n        );\n    }\n\n    function build() {\n        let globalStylesheet;\n        const globalStyle = document.querySelector(`head > style[app=\"${appName}\"]`);\n        if (globalStyle) {\n            globalStylesheet = new CSSStyleSheet();\n            globalStylesheet.replaceSync(globalStyle.textContent);\n        }\n        Array.prototype.forEach.call(document.querySelectorAll(`template[app=\"${appName}\"]`), template => {\n            defineCustomElementFromTemplate(template, template.getAttribute('for'), globalStylesheet);\n        });\n        if (typeof globalThis[`${appName}_runtime`] === 'function') {\n            const globalRuntimeFunction = globalThis[`${appName}_runtime`];\n            globalRuntimeFunction.call(appScope);\n        }\n    }\n    build();\n}","// Convert attribute values to \"typed\" values\nexport function attributeValueToTypedValue(attrValue) {\n    let typedValue = attrValue;\n    if (attrValue === \"true\") typedValue = true;\n    else if (attrValue === \"false\") typedValue = false;\n    else if (!isNaN(Number(attrValue))) typedValue = Number(attrValue);\n    return typedValue; \n}\n\n// Check if attribute node is a \"Command\" or a \"State Attribute\" \nexport function isSpecialAttribute(attrNode) {\n    if (typeof attrNode !== \"object\" && attrNode.constructor.name !== \"Attr\") throw Error(\"Passed non Attribute to isSpecialAttribute!\");\n    return attrNode.nodeName.indexOf('_') === 0 || attrNode.nodeValue.indexOf('$') === 0;\n}","import { attributeValueToTypedValue } from \"./attr_utils\";\nimport { CONDITIONAL_OPERATORS } from \"./consts\";\nimport { queueConditionalRender } from \"./paint_utils\";\n\n// returns a Boolean according to the conditional equality of conditional to conditionStateValue\nexport function resolveConditional(conditional, conditionStateValue) {\n    const typeOf = typeof conditional;\n    if (typeOf !== 'string') {\n        return conditionStateValue === conditional;\n    }\n    else {\n        if (conditional === \"always\") return true;\n        if (CONDITIONAL_OPERATORS.includes(conditional[0])) {\n            const conditionFn = new Function(`return ${conditionStateValue}${conditional}`);\n            return conditionFn();\n        }\n        else {\n            return conditionStateValue === conditional;\n        }\n    }\n}\n\nexport function getConditionalElementClass(ReactiveElementClass) {\n    class ConditionalElement extends ReactiveElementClass {\n\n        #conditionStateProp\n        #renderMap\n        #wasMounted = false\n\n        render(isFirstRender=false) {\n            let stateValue;\n            if (this.#conditionStateProp.indexOf('@') === 0) {\n                stateValue = this.host.getAttribute(this.#conditionStateProp.substring(1));\n            }\n            else {\n                stateValue = this.getState(this.#conditionStateProp);\n            }\n\n            if (stateValue === undefined) {\n                throw Error(`State value for ${this.#conditionStateProp} not found while rendering conditional-render element:`, this);\n            }\n            const elementsToRender = [];\n\n            this.#renderMap.forEach((elements, conditional)=> {\n                if (resolveConditional(conditional, stateValue)) {\n                    elementsToRender.push(...elements);\n                }\n            });\n\n            if (isFirstRender) {\n                this.innerHTML = \"\";\n                this.append(...elementsToRender);\n            }\n            else if (elementsToRender.length) {\n                queueConditionalRender(this, ()=> {\n                    this.innerHTML = \"\";\n                    this.append(...elementsToRender);\n                });\n            }\n        }\n        connectedCallback() {\n            this.host = this.getRootNode().host;\n            if (!this.host) {\n                throw Error(\"<conditional-render> must be used as part of a custom element template! Cannot be used outside of a custom element.\");\n            }\n            if (this.#wasMounted) return;\n            const conditionAttributeValue = this.getAttribute(\"_condition\");\n            if (!conditionAttributeValue) {\n                throw Error(\"conditional-render elements must have a _condition command attribute\");\n            }\n            if (!this.children || !this.children.length) {\n                throw Error(\"Conditional element must have children!\");\n            }\n\n            const statePropName = conditionAttributeValue;\n            this.#conditionStateProp = statePropName;\n\n            const isConditionStatic = this.#conditionStateProp.indexOf('@') === 0;\n            let stateValue, stateObject;\n            if (!isConditionStatic) {\n                [stateValue, stateObject] = this.getState(statePropName, true);\n                if (typeof stateValue === \"undefined\") {\n                    throw Error(`State property ${statePropName} not defined for _condition command!`);\n                }\n            }\n            const renderMap = new Map();\n            renderMap.set(\"always\", []);\n            const children = [...this.children];\n\n            children.forEach(conditionalChild=> {\n                const _if = conditionalChild.getAttribute('_if');\n                if (_if) {\n                    const expectedValue = attributeValueToTypedValue(_if);\n                    if (!renderMap.has(expectedValue)) renderMap.set(expectedValue, []);\n                    renderMap.get(expectedValue).push(conditionalChild);\n                }\n                else {\n                    renderMap.get(\"always\").push(conditionalChild);\n                }\n            });\n            this.#renderMap = renderMap;\n\n            if (!isConditionStatic) {\n                stateObject._stateManager.addConditionallyRenderingElements(statePropName, this);\n            }\n            this.render(true);\n            this.#wasMounted = true;\n        }\n    }\n\n    return ConditionalElement;\n}\n\n","import { COMMANDS as COMMAND_ATTRIBUTES } from \"./commands.js\";\nimport { BOOLEAN_ATTRIBUTES, SUPPORTED_ATTRIBUTES_FOR_BINDING, GLOBAL_STATE_FUNCTION_NAME, DEFAULT_TEMPLATE_DOM } from \"./consts.js\";\nimport { setAttribute, setStateAttribute, setStateText } from \"./state_utils.js\";\nimport StateManager from \"./StateManager.js\";\nimport { queueBindEvents } from \"./paint_utils.js\";\nimport { extendElementClassWithReactiveElementClass } from './ReactiveElement.js';\n\nexport function getReactiveCustomElementClass(appScope = window) {\n    const ReactiveHTMLElement = extendElementClassWithReactiveElementClass(HTMLElement, appScope);\n    class ReactiveCustomElement extends ReactiveHTMLElement {\n        // Should contain the \"root\" DOM element containing this element\n        host = null\n\n        #wasMounted = false\n\n        // Callback function for when the element is connected to a DOM tree on the page and rendered\n        #onMount\n        // Callback function for when the element is connected to a DOM tree on the page, just before render\n        #beforeRender\n\n        // Should only be used on non native custom elements\n        #templateContent\n        #stylesheet\n        #globalStylesheet\n        // This will be an object where keys are element \"ref\" names,\n        // and the value is either a \"click\" event handler (if it's a function),\n        // or an object with DOM event names as keys and event handlers as functions.\n        // Only relevant for non native custom elements - event bubbling from child elements will be used\n        events\n\n        // Name of events that are bound to the main event handler function\n        #boundEventNames = [];\n        // Main event handler function \n        #eventHandler\n\n        constructor(template=null, runtimeScript, style, globalStylesheet) {\n            super();\n            const isFrameworkElement = this.tagName === \"CONDITIONAL-ELEMENT\";\n            if (isFrameworkElement) return;\n\n            if (runtimeScript) {\n                const dynamicRuntimeFn = new Function(runtimeScript.textContent);\n                const runtime = dynamicRuntimeFn();\n                this.#setRuntime(runtime);\n            }\n\n            if (style) {\n                const stylesheet = new CSSStyleSheet();\n                stylesheet.replaceSync(style);\n                this.#stylesheet = stylesheet;\n            }\n            if (globalStylesheet) {\n                this.#globalStylesheet = globalStylesheet;\n            }\n\n            this.#templateContent = \n                template?.cloneNode(true) ||\n                DEFAULT_TEMPLATE_DOM.cloneNode();\n\n            // Maps \"ref names\" to actual elements in the component DOM tree,\n            // for fast access.\n            this.ref = {};\n        }\n\n        #setRuntime(runtime) {\n            if (runtime.events) {\n                this.events = runtime.events;\n                if (this.isConnected) {\n                    queueBindEvents(this, ()=> this.#bindEvents());\n                }\n            }\n            if (runtime.state) {\n                this.setInitialState(runtime.state);\n                // If this is not mounted yet, #setStateFromInitialState will be called from onConnected callback\n                if (this.isConnected) this.#setActiveStateFromInitialState();\n            }\n            if (runtime.onMount) {\n                this.#onMount = runtime.onMount;\n            }\n            if (runtime.beforeRender) {\n                this.#beforeRender = runtime.beforeRender;\n            }\n        }\n\n        setInitialState(initState) {\n            if (this.initialState) {\n                Object.assign(this.initialState, initState);\n            }\n            else {\n                this.initialState = initState;\n            }\n        }\n\n        #setActiveStateFromInitialState() {\n            if (!this.initialState) return;\n            const initialState = this.initialState;\n            if (initialState._stateManager) {\n                this.state = initialState._stateManager.state;\n            }\n            else {\n                this.state = new StateManager(initialState, undefined, undefined, false, appScope).state;\n            }\n            delete this.initialState;\n        }\n\n        #renderTemplate() {\n            if (appScope.SPROUT_CONFIG.useShadow) {\n                const shadowRoot = this.attachShadow({ mode: \"open\" });\n                this.shadowRoot.adoptedStyleSheets = [];\n                if (this.#globalStylesheet) this.shadowRoot.adoptedStyleSheets.push(this.#globalStylesheet);\n                if (this.#stylesheet) this.shadowRoot.adoptedStyleSheets.push(this.#stylesheet);\n                shadowRoot.appendChild(this.#templateContent);\n            }\n            else {\n                const fragment = new DocumentFragment();\n                fragment.appendChild(this.#templateContent);\n                this.appendChild(fragment);\n            }\n        }\n\n        #unbindEvents() {\n            if (!this.#boundEventNames.length) return;\n            const thiselement = this;\n            this.#boundEventNames.forEach(eventName=> {\n                thiselement.removeEventListener(eventName, this.#eventHandler, false);\n            });\n\n        }\n        #bindEvents() {\n            if (!this.events) return;\n            const eventRefNames = Object.keys(this.events);\n            const clickActions = {};\n            const otherActions = {};\n            eventRefNames.forEach(refName=> {\n                const value = this.events[refName];\n                if (typeof value === 'function') {\n                    clickActions[refName] = value;\n                }\n                else if (typeof value === 'object') {\n                    const eventNames = Object.keys(value);\n                    eventNames.forEach(eventName=> {\n                        if (eventName === 'click') {\n                            clickActions[refName] = value[eventName];\n                        }\n                        else {\n                            if (!otherActions[eventName]) otherActions[eventName] = {};\n                            otherActions[eventName][refName] = value[eventName];\n                        }\n                    });\n                }\n            });\n            const globalState = appScope[GLOBAL_STATE_FUNCTION_NAME]();\n            this.#eventHandler = function(event) {\n                const start = performance.now();\n                const elementsPath = event.composedPath();\n                let target;\n                if (elementsPath) {\n                    target = elementsPath.find(element => element.hasAttribute && element.hasAttribute('ref') && (element.getAttribute('ref') in this.events));\n                }\n                else {\n                    target = (event.target.hasAttribute && event.target.hasAttribute('ref') && (event.target.getAttribute('ref') in this.events)) ? event.target : null;\n                }\n                if (target) {\n                    const ref = target.getAttribute('ref');\n                    const eventName = event.type;\n                    if (eventName === \"click\") {\n                        const clickEvent = typeof this.events[ref] === \"function\" ? this.events[ref] : null;\n                        clickEvent?.call(target, event, event.target, globalState);\n                    }\n                    else {\n                        this.events[ref][eventName]?.call(target, event, event.target, globalState);\n                    }\n                }\n\n                console.log (`Event ${event.type} took ${ performance.now() - start }`);\n            }\n\n            const thiselement = this;\n            if (Object.keys(clickActions).length) {\n                thiselement.addEventListener('click', this.#eventHandler);\n                this.#boundEventNames.push('click');\n            }\n            const eventNames = Object.keys(otherActions);\n            for (const eventName of eventNames)\n                thiselement.addEventListener(eventName, this.#eventHandler);\n            this.#boundEventNames.push(...eventNames);\n        }\n\n        disconnectedCallback() {\n            this.#unbindEvents();\n            this.state = undefined;\n        }\n\n        connectedCallback() {\n            if (this.#wasMounted) return;\n            // IMPORTANT: THIS *CAN* be NULL, DO NOT CHANGE IT!\n            // It is part of the way a check is made to see if an element is part of ShadowDOM!\n            // host will be null if the element is part of the DOM === the \"root\" custom element will have null in .host\n            // THIS SHOULD BE THE FIRST THING THAT HAPPENS!\n            this.host = this.getRootNode().host;\n            this.#setActiveStateFromInitialState();\n            this.#renderTemplate();\n\n            const attributeNames = this.getAttributeNames();\n            for (const attrName of attributeNames) {\n                const attrValue = this.getAttribute(attrName);\n                // This also resolves \"State attributes\"\n                this.initialSetAttribute(attrName, attrValue);\n            }\n\n            queueBindEvents(this, ()=> this.#bindEvents());\n            if (this.#beforeRender) this.#beforeRender.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]());\n            if (this.#onMount) queueMicrotask(()=> this.#onMount.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]()));\n            this.#wasMounted = true;\n        }\n    }\n\n    return ReactiveCustomElement;\n}\n","import { extendElementClassWithReactiveElementClass } from \"./ReactiveElement.js\";\nimport StateManager from \"./StateManager.js\";\nimport { GLOBAL_STATE_VAR_NAME, GLOBAL_STATE_FUNCTION_NAME, HTML_ELEMENTS_CLASSES_MAP } from \"./consts.js\";\nimport SproutBuild from '../build/index.js';\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\nimport { setHiddenProperty } from \"./prop_utils.js\";\nimport { getConditionalElementClass } from \"./ConditionalElement.js\";\nimport { getReactiveCustomElementClass } from \"./ReactiveCustomElement.js\";\n\nconst allowAppScopeAccess = document.currentScript.hasAttribute(\"allowappscopeaccess\");\nconst stateClass = window.StateManager;\nglobalThis.SproutInitApp = function(appName) {\n    \n    let appScope = (function() { return { window, document: window?.document }})(window);\n\n    const config = {\n        useShadow: true, // Always use shadow DOM for now, may add configurability later\n        allowAppScopeAccess: allowAppScopeAccess\n    }\n\n    if (config.allowAppScopeAccess) {\n        Object.defineProperty(globalThis, \"sproutApps\", {\n            value: {},\n            writable: false\n        });\n        Object.defineProperty(globalThis.sproutApps, appName, {\n            value: appScope,\n            writable: false\n        });\n        \n    }\n\n    appScope.SPROUT_CONFIG = Object.seal(config);\n\n    // Prevent \"hasOwnProperty\" shenanigans\n    const hasOwnProperty = Object.prototype.hasOwnProperty;\n    setHiddenProperty(Object.prototype, \"hasOwnProperty\", hasOwnProperty);\n\n    appScope[GLOBAL_STATE_FUNCTION_NAME] = function() {\n        return {};\n    }\n    // If initialState is passed - also sets it to global state\n    appScope.setGlobalState = function(initialState = {}) {\n        const globalState =  new StateManager(initialState, undefined, undefined, true, appScope).state;\n        const globalStateVarName = GLOBAL_STATE_VAR_NAME;\n        Object.defineProperty(appScope, globalStateVarName, {\n            value: globalState,\n            writable: DEBUG_MODE ? true : false,\n            configurable: false\n        });\n        Object.defineProperty(appScope, GLOBAL_STATE_FUNCTION_NAME, {\n            value: function() {\n                return appScope[globalStateVarName];\n            },\n        });\n    };\n\n\n    const HTML_REACTIVE_ELEMENT_CLASSES = {};\n    HTML_ELEMENTS_CLASSES_MAP.forEach(elementDefinition=>\n        HTML_REACTIVE_ELEMENT_CLASSES[elementDefinition.element] = extendElementClassWithReactiveElementClass(elementDefinition.class, appScope, true)\n    );\n\n    appScope.ReactiveCustomElement = getReactiveCustomElementClass(appScope);\n\n    // Extend specific HTMLElement classes to enable reactivity (use it by adding an \"is\" attribute to an element)\n    HTML_ELEMENTS_CLASSES_MAP.forEach(itemDefinition => {\n        customElements.define(\n            `reactive-${itemDefinition.element}`, \n            // extendElementClassWithReactiveElementClass(itemDefinition.class, appScope, true),\n            HTML_REACTIVE_ELEMENT_CLASSES[itemDefinition.element],\n            { extends: itemDefinition.element });\n        }\n    );\n\n    const ReactiveHeadingClass = extendElementClassWithReactiveElementClass(HTMLHeadingElement, appScope);\n    [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"].forEach(hTag=> {\n        customElements.define(`reactive-${hTag}`,\n            class extends ReactiveHeadingClass {},\n            { extends: hTag}\n        );\n\n    });\n    const ReactiveConditionalElementClass = extendElementClassWithReactiveElementClass(HTMLElement, appScope);\n    const ConditionalElementClass = getConditionalElementClass(ReactiveConditionalElementClass); \n    customElements.define('conditional-render', ConditionalElementClass);\n\n    return function() {\n        SproutBuild(appScope, appName);\n    }.bind(appScope);\n}\n\n\n\n"],"names":["extendElementClassWithReactiveElementClass","BOOLEAN_ATTRIBUTES","SUPPORTED_ATTRIBUTES_FOR_BINDING","SUPPORTED_PROPERTIES_FOR_BINDING","SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING","BUILT_IN_STATE_PROPS","GLOBAL_STATE_VAR_NAME","GLOBAL_STATE_FUNCTION_NAME","ERROR_MESSAGES","NO_DEPENDENCIES_ARRAY_IN_SET_HOOK","stateProp","concat","HTML_ELEMENTS_CLASSES_MAP","HTMLAnchorElement","element","HTMLAreaElement","HTMLAudioElement","HTMLBodyElement","HTMLBRElement","HTMLButtonElement","HTMLCanvasElement","HTMLDataElement","HTMLDataListElement","HTMLDetailsElement","HTMLDialogElement","HTMLDivElement","HTMLDListElement","HTMLEmbedElement","HTMLFieldSetElement","HTMLFormElement","HTMLHRElement","HTMLHtmlElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLLabelElement","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLObjectElement","HTMLOListElement","HTMLOptGroupElement","HTMLOptionElement","HTMLParagraphElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSelectElement","HTMLSourceElement","HTMLSpanElement","HTMLTableElement","HTMLTableCellElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLVideoElement","HTMLSlotElement","DEBUG_MODE","DEFAULT_TEMPLATE_DOM","document","createElement","NODES_STATE","nodeActionsMap","Map","eventBindingFunctions","conditionalRenders","paintRafId","eventBindRafId","conditionalRenderRafId","CONDITIONAL_OPERATORS","MAX_OPERATIONS_PER_ANIMATION_FRAME","isElementAList","tagName","doUpdateDOM","queueBindEvents","bindFunction","set","size","cancelAnimationFrame","requestAnimationFrame","forEach","bindFn","queuePaint","queueConditionalRender","renderFunction","renderFn","stateToElement","resolveStateMapToDocumentFragment","getNodeActionsForNode","node","has","getNewNodeActionsObject","nodeActions","get","setStateNodeAction","nodeActionsObject","value","nodeType","Node","ATTRIBUTE_NODE","TEXT_NODE","addRemoveAction","elementToRemove","stateIdentifier","remove","Set","add","addReplaceAction","oldElement","newElement","replace","addSwitchAction","addAppendAction","nodeToAppend","append","addStateAttributeToNode","attributeNode","addAppendActionToNode","after","hasPendingActions","generateStateNodeActions","stateManager","_this","state","stateNodes","stateMapElements","stateArrayMaps","conditionallyRenderingElements","stateMapArray","console","log","customElementName","parentElement","stateMapNodeActions","currentStateMapArrayIndex","isParentAList","children","length","Array","prototype","call","childElement","currentIndex","_stateItem","customElement","firstElementChild","stateItem","hasOwnProperty","replaceWithChild","undefined","i","len","newChild","render","resolveNodeActionsMapToDOMActions","batchActions","attributeActions","elementActions","setAttribute","error","originalOwnerElement","hasAttribute","name","push","removeAttributeNode","setAttributeNode","nodeValue","String","textContent","replaceWith","newNode","oldNode","replaceChild","_iterator","_createForOfIteratorHelper","values","_step","s","n","done","removes","_iterator3","_step3","_loop","nodeToRemove","parentNode","removeChild","err","e","f","_iterator2","_step2","appends","_iterator4","_step4","_loop2","newChildElement","appendChild","logNodeActions","_toConsumableArray","entries","map","_ref","_ref2","_slicedToArray","actions","ELEMENT_NODE","appendElements","replaceElements","nodeName","DOMActions","DOMAction","setHiddenProperty","obj","propName","propValue","enumerable","arguments","Object","defineProperty","configurable","writable","handleStatesRAFId","HTMLElement","warn","globalThis","attrName","attrValue","includes","removeAttribute","elementSetAttribute","setStateAttribute","equalityValue","indexOf","colonIndex","Error","substring","_this$getState","getState","_this$getState2","stateVal","theState","conditionalStateProp","originalStateProp","_stateManager","addStateDependency","valueToSet","stateAttrNode","createAttribute","addStateNode","setStateText","_this$getState3","_this$getState4","textNode","createTextNode","stateObject","elemName","wrapInElement","customElementInstance","setInitialState","returnElement","mapStateArrayToElements","stateItems","_typeof","handleStateChange","stateDependencies","depStateProp","setStateProp","func","_global","globalStateDependencies","depStateProps","depStateManager","depState","populateStateFromInitialState","initialState","_populate","descriptors","getOwnPropertyDescriptors","descrp","key","bind","isArray","defineProperties","putObjectInDebugMode","attributeValueToTypedValue","mapStateToElements","stateItemsPropertyName","_parentElement$getSta","_parentElement$getSta2","stateItemsArray","elements","innerHTML","apply","COMMANDS","commandValue","_commandValue$split","split","_commandValue$split2","thiselement","addStateMap","text","initialSetText","_commandValue$split3","_commandValue$split4","attributeName","statePropName","bindAttributeToState","getAttribute","addEventListener","updateStateFromProperty","COMMAND_ATTRIBUTES","elementClass","appScope","window","_changeEventHandler","WeakMap","_wasMounted","_boundAttributesToState","_ReactiveElement_brand","WeakSet","ReactiveElement","_elementClass","_classCallCheck","_len","args","_key","_callSuper","_classPrivateMethodInitSpec","_defineProperty","_classPrivateFieldInitSpec","_inherits","_createClass","_classPrivateFieldGet","unbindAttributeToState","propertyName","newValue","stateValue","disconnectedCallback","_this$host","removeEventListener","host","ref","thisRefName","events","_classPrivateFieldSet","connectedCallback","_this2","getRootNode","changeEvent","Event","bubbles","composed","dispatchEvent","commands","attributeNames","getAttributeNames","initialSetAttribute","command","_COMMAND_ATTRIBUTES$c","attributeChangedCallback","oldValue","isConnected","isNativeElement","refValue","_assertClassBrand","_updateStateFromAttribute","returnStateObject","thisInstance","_thisInstance$state","globalState","_thisInstance$state2","_globalState","findElement","refName","root","SPROUT_CONFIG","useShadow","shadowRoot","querySelector","attributeValue","keys","toLowerCase","debugGetProxyHandler","scopeName","originalObject","target","property","receiver","Reflect","debug","Proxy","debugApplyProxyHandler","funcName","construct","newTarget","thisArg","argumentsList","StateManager","StatefulArrayHandler","StatefulArray","_Array","initialArray","parentStateObject","arrayStateProp","noConvertToStateItems","rawArray","statefulArray","item","index","_possibleConstructorReturn","splice","_get2","$$operation","result","_get","_getPrototypeOf","shift","_get3","_len2","_key2","unshift","_get4","_len3","_key3","sort","_get5","_len4","_key4","reverse","_get6","_len5","_key5","fill","_get7","_len6","_key6","copyWithin","_get8","_len7","_key7","slice","_get9","_len8","_key8","toArray","Symbol","species","_wrapNativeSuper","parentStateManager","targetArray","setResult","setDirtyProp","Number","isNaN","doStateChangeHandle","StateObjectValueHandler","rootStateObj","objPropertyName","targetObj","descriptor","_value$","definePropertyResult","StateHandler","stateObj","targetState","_targetState","_binding","origTargetState","dependencies","_gettingDependenciesFor","_localStateManager","_value$2","deps","depProp","dep","addGlobalStateDependency","originalProperty","_handleStateChangeRAF_ID","parentStateProp","isGlobal","prop","dirtyProps","handleStateChanges","_this3","stateProps","clear","addConditionallyRenderingElements","_element$host","originalParentElement","stateNode","isBooleanStateProp","setAndBindStateProperty","isNegationProp","getOwnPropertyDescriptor","isValueProp","negateStateProp","privateState","currentVal","_regeneratorRuntime","t","r","o","a","iterator","c","asyncIterator","u","toStringTag","define","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","h","l","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","displayName","isGeneratorFunction","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","pop","prev","charAt","stop","rval","handle","complete","finish","_catch","delegateYield","_defineProperties","_toPropertyKey","_toPrimitive","toPrimitive","_isNativeReflectConstruct","_assertThisInitialized","ReferenceError","Boolean","valueOf","_setPrototypeOf","asyncGeneratorStep","_asyncToGenerator","_next","_throw","appName","defineCustomElementFromTemplate","_x","_x2","_x3","_defineCustomElementFromTemplate","_callee","template","globalStylesheet","templateContent","style","runtime","_callee$","_context","importNode","content","customElements","_appScope$ReactiveCus","_class","ReactiveCustomElement","build","globalStyle","CSSStyleSheet","replaceSync","querySelectorAll","globalRuntimeFunction","typedValue","isSpecialAttribute","attrNode","resolveConditional","conditional","conditionStateValue","typeOf","conditionFn","Function","getConditionalElementClass","ReactiveElementClass","_conditionStateProp","_renderMap","ConditionalElement","_ReactiveElementClass","isFirstRender","elementsToRender","conditionAttributeValue","isConditionStatic","renderMap","conditionalChild","_if","expectedValue","getReactiveCustomElementClass","ReactiveHTMLElement","_onMount","_beforeRender","_templateContent","_stylesheet","_globalStylesheet","_boundEventNames","_eventHandler","_ReactiveCustomElement_brand","_ReactiveHTMLElement","runtimeScript","isFrameworkElement","dynamicRuntimeFn","_setRuntime","stylesheet","cloneNode","initState","assign","_unbindEvents","_setActiveStateFromInitialState","_renderTemplate","_bindEvents","queueMicrotask","onMount","beforeRender","attachShadow","mode","adoptedStyleSheets","fragment","DocumentFragment","_this4","eventName","_this5","_classPrivateFieldGet2","eventRefNames","clickActions","otherActions","eventNames","event","_this6","start","performance","now","elementsPath","composedPath","find","clickEvent","_this$events$ref$even","_i","_eventNames2","SproutBuild","allowAppScopeAccess","currentScript","stateClass","SproutInitApp","_window","config","sproutApps","seal","setGlobalState","globalStateVarName","HTML_REACTIVE_ELEMENT_CLASSES","elementDefinition","itemDefinition","ReactiveHeadingClass","HTMLHeadingElement","hTag","_ReactiveHeadingClass","ReactiveConditionalElementClass","ConditionalElementClass"],"sourceRoot":""}
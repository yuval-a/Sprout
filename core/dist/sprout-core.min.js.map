{"version":3,"file":"sprout-core.min.js","mappings":"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","sources":["webpack://jssprout/./src/core/consts.js","webpack://jssprout/./src/core/DOM_utils.js","webpack://jssprout/./src/core/paint_utils.js","webpack://jssprout/./src/core/node_actions.js","webpack://jssprout/./src/core/prop_utils.js","webpack://jssprout/./src/core/state_utils.js","webpack://jssprout/./src/core/commands.js","webpack://jssprout/./src/core/ReactiveElement.js","webpack://jssprout/./src/core/StatefulArray.js","webpack://jssprout/./src/core/proxy_handlers.js","webpack://jssprout/./src/core/StateManager.js","webpack://jssprout/./src/build/index.js","webpack://jssprout/./src/core/ConditionalElement.js","webpack://jssprout/./src/core/attr_utils.js","webpack://jssprout/./src/core/ReactiveCustomElement.js","webpack://jssprout/./src/core/index.js"],"sourcesContent":["import { extendElementClassWithReactiveElementClass } from \"./ReactiveElement.js\";\n\nexport const BOOLEAN_ATTRIBUTES = [\n    'hidden',\n    'checked'\n]\n\nexport const SUPPORTED_ATTRIBUTES_FOR_BINDING = [\n    'hidden',\n    'value',\n    'checked'\n]\n\n// Some elements like inputs has certain properties that can be used in _bind command, like: 'value', or 'checked\nexport const SUPPORTED_PROPERTIES_FOR_BINDING = [\n    'value',\n    'checked'\n]\nexport const SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING = [\n    null, // If no type is specified - defaults to 'text' - \n    // getAttribute('type') returns null\n    'text', \n    'color', \n    'date', \n    'datetime-local', \n    'email', \n    'month', \n    'number', \n    'password',\n    'range',\n    'search',\n    'tel',\n    'time',\n    'url',\n    'week'\n];\n\n// These are \"built-in\" state props that are automatically added to state objects,\n// and should not be included in the normal state change/check flow\nexport const BUILT_IN_STATE_PROPS = [\n    '_global',\n    '_gettingDependenciesFor',\n    '_localStateManager',\n    '_stateManager',\n    '_binding',\n    '_populate',\n    '_isActive'\n]\n\nexport const GLOBAL_STATE_VAR_NAME = \"SproutGlobalState\";\nexport const GLOBAL_STATE_FUNCTION_NAME = \"getGlobalState\";\n\nexport const ERROR_MESSAGES = {\n    NO_DEPENDENCIES_ARRAY_IN_SET_HOOK(stateProp) {\n        return `State set hook, must include a dependencies array! None was found for ${stateProp}`;\n    }\n}\n\nexport const HTML_ELEMENTS_CLASSES_MAP = [\n    { class: HTMLAnchorElement, element: \"a\" },\n    { class: HTMLAreaElement, element: \"area\" },\n    { class: HTMLAudioElement, element: \"audio\" },\n    // { class: HTMLBaseElement, element: \"base\" },\n    { class: HTMLBodyElement, element: \"body\" },\n    { class: HTMLBRElement, element: \"br\" },\n    { class: HTMLButtonElement, element: \"button\" },\n    { class: HTMLCanvasElement, element: \"canvas\" },\n    { class: HTMLDataElement, element: \"data\" },\n    { class: HTMLDataListElement, element: \"datalist\" },\n    { class: HTMLDetailsElement, element: \"details\" },\n    { class: HTMLDialogElement, element: \"dialog\" },\n    { class: HTMLDivElement, element: \"div\" },\n    { class: HTMLDListElement, element: \"dl\" },\n    { class: HTMLEmbedElement, element: \"embed\" },\n    { class: HTMLFieldSetElement, element: \"fieldset\" },\n    { class: HTMLFormElement, element: \"form\" },\n    /*\n    { class: HTMLHeadingElement, element: \"h1\" },\n    { class: HTMLHeadingElement, element: \"h2\" },\n    { class: HTMLHeadingElement, element: \"h3\" },\n    { class: HTMLHeadingElement, element: \"h4\" },\n    { class: HTMLHeadingElement, element: \"h5\" },\n    { class: HTMLHeadingElement, element: \"h6\" },\n     */\n    { class: HTMLHRElement, element: \"hr\" },\n    { class: HTMLHtmlElement, element: \"html\" },\n    { class: HTMLIFrameElement, element: \"iframe\" },\n    { class: HTMLImageElement, element: \"img\" },\n    { class: HTMLInputElement, element: \"input\" },\n    { class: HTMLLabelElement, element: \"label\" },\n    { class: HTMLLegendElement, element: \"legend\" },\n    { class: HTMLLIElement, element: \"li\" },\n    { class: HTMLLinkElement, element: \"link\" },\n    { class: HTMLMapElement, element: \"map\" },\n    { class: HTMLMetaElement, element: \"meta\" },\n    { class: HTMLMeterElement, element: \"meter\" },\n    { class: HTMLObjectElement, element: \"object\" },\n    { class: HTMLOListElement, element: \"ol\" },\n    { class: HTMLOptGroupElement, element: \"optgroup\" },\n    { class: HTMLOptionElement, element: \"option\" },\n    // { class: HTMLOutputElement, element: \"output\" },\n    { class: HTMLParagraphElement, element: \"p\" },\n    // { class: HTMLParamElement, element: \"param\" },\n    { class: HTMLPictureElement, element: \"picture\" },\n    { class: HTMLPreElement, element: \"pre\" },\n    { class: HTMLProgressElement, element: \"progress\" },\n    { class: HTMLQuoteElement, element: \"blockquote\" },\n    { class: HTMLQuoteElement, element: \"q\" },\n    // { class: HTMLScriptElement, element: \"script\" },\n    { class: HTMLSelectElement, element: \"select\" },\n    { class: HTMLSourceElement, element: \"source\" },\n    { class: HTMLSpanElement, element: \"span\" },\n    // { class: HTMLStyleElement, element: \"style\" },\n    { class: HTMLTableElement, element: \"table\" },\n    { class: HTMLTableCellElement, element: \"td\" },\n    { class: HTMLTableCellElement, element: \"th\" },\n    { class: HTMLTableRowElement, element: \"tr\" },\n    { class: HTMLTableSectionElement, element: \"thead\" },\n    { class: HTMLTableSectionElement, element: \"tbody\" },\n    { class: HTMLTableSectionElement, element: \"tfoot\" },\n    { class: HTMLTextAreaElement, element: \"textarea\" },\n    { class: HTMLTimeElement, element: \"time\" },\n    { class: HTMLTitleElement, element: \"title\" },\n    { class: HTMLTrackElement, element: \"track\" },\n    { class: HTMLUListElement, element: \"ul\" },\n    { class: HTMLVideoElement, element: \"video\" },\n    { class: HTMLSlotElement, element: \"slot\" },\n    // We can't use HTMLElement more than once, so we will use a class extending it\n    // { class: class extends HTMLElement{}, element: \"code\" }\n];\n\n// For development purposes only,\n// turn this on to see exactly which functions in each entity are called and when.\nexport const DEBUG_MODE = false;\n\nexport const DEFAULT_TEMPLATE_DOM = document.createElement('div');\n\nexport const NODES_STATE = {\n    // This is a global object that maps abstract \"DOM actions\" to nodes (the nodes can be elements, text nodes, attribute nodes)\n    // It is resolved to actual DOM API functions on RequestAnimationFrame calls, and then is RESET.\n    // it is a \"singleton\" object\n    nodeActionsMap: new Map(),\n    // Maps events binding functions to (custom) elements\n    eventBindingFunctions: new Map(),\n    conditionalRenders: new Map(),\n    // Save requestAnimationFrame Id, to cancel if the rAF wasn't called yet on the same frame, so DOM operations will be batched to a single frame,\n    // preventing several rAFs running for the same frame\n    paintRafId: null,\n    // Similar as above but for event bindings\n    eventBindRafId: null,\n    // Same for conditional renders\n    conditionalRenderRafId: null,\n    activateRafId: null,\n    elementActivateFunctions: new Map()\n}\n\nexport const CONDITIONAL_OPERATORS = [\n    '=',\n    '==',\n    '!=',\n    '!==',\n    '<',\n    '<=',\n    '>',\n    '>='\n];\n\nexport const MAX_OPERATIONS_PER_ANIMATION_FRAME = 100;\n","export function isElementAList(element) {\n  return element.tagName === \"OL\" || element.tagName === \"UL\";\n}\n\n","import { doUpdateDOM } from \"./node_actions\";\nimport { NODES_STATE, MAX_OPERATIONS_PER_ANIMATION_FRAME } from \"./consts\";\n\nlet { \n    paintRafId,\n    eventBindingFunctions, \n    eventBindRafId, \n    conditionalRenderRafId,\n    conditionalRenders,\n    nodeActionsMap,\n    activateRafId,\n    elementActivateFunctions\n} = NODES_STATE; \n\nexport function queueBindEvents(element, bindFunction) {\n    eventBindingFunctions.set(element, bindFunction);\n    if (eventBindingFunctions.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (eventBindRafId) cancelAnimationFrame(eventBindRafId);\n        eventBindRafId = null;\n    }\n    if (!eventBindRafId) {\n        eventBindRafId = requestAnimationFrame(()=> {\n            eventBindRafId = null;\n            eventBindingFunctions.forEach(bindFn=> bindFn());\n            eventBindingFunctions.clear();\n        });\n    }\n}\n\nexport function queueActivate(element, activateFn) {\n    elementActivateFunctions.set(element, activateFn);\n    if (elementActivateFunctions.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (activateRafId) cancelAnimationFrame(activateRafId);\n        activateRafId = null;\n    }\n    if (!activateRafId) {\n        activateRafId = requestAnimationFrame(()=> {\n            activateRafId = null;\n            elementActivateFunctions.forEach(activateFn=> activateFn());\n            elementActivateFunctions.clear();\n        });\n    }\n}\n\nexport function queuePaint() {\n    if (nodeActionsMap.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (paintRafId) cancelAnimationFrame(paintRafId);\n        paintRafId = null;\n    }\n    if (!paintRafId) {\n        paintRafId = requestAnimationFrame(()=> {\n            paintRafId = null;\n            doUpdateDOM();\n        });\n    }\n}\nexport function queueConditionalRender(element, renderFunction) {\n    conditionalRenders.set(element, renderFunction);\n    if (conditionalRenders.size < MAX_OPERATIONS_PER_ANIMATION_FRAME) {\n        if (conditionalRenderRafId) cancelAnimationFrame(conditionalRenderRafId);\n        conditionalRenderRafId = null;\n    }\n    if (!conditionalRenderRafId) {\n        conditionalRenderRafId = requestAnimationFrame(()=> {\n            conditionalRenderRafId = null;\n            conditionalRenders.forEach(renderFn=> renderFn());\n            conditionalRenders.clear();\n        });\n    }\n}","import { stateToElement, resolveStateMapToDocumentFragment } from \"./state_utils.js\";\nimport { isElementAList } from \"./DOM_utils.js\";\nimport { queueConditionalRender, queuePaint } from \"./paint_utils.js\";\nimport { NODES_STATE } from \"./consts.js\";\n\n// Also, if doesn't exist - create it\nfunction getNodeActionsForNode(node) {\n    const { nodeActionsMap } = NODES_STATE;\n    if (!nodeActionsMap.has(node)) nodeActionsMap.set(node, getNewNodeActionsObject());\n    const nodeActions = nodeActionsMap.get(node);\n    return nodeActions;\n}\n\nexport function setStateNodeAction(node, nodeActionsObject, value) {\n    if (node.nodeType === Node.ATTRIBUTE_NODE)\n        nodeActionsObject[\"setAttribute\"] = value; \n    else if (node.nodeType === Node.TEXT_NODE)\n        nodeActionsObject[\"textContent\"] = value;\n}\n\nexport function addRemoveAction(nodeActions, elementToRemove, stateIdentifier) {\n    if (!nodeActions.remove.has(stateIdentifier)) {\n        nodeActions.remove.set(stateIdentifier, new Set())\n    }\n    nodeActions.remove.get(stateIdentifier).add(elementToRemove);\n}\nexport function addReplaceAction(nodeActions, oldElement, newElement) {\n    nodeActions.replace.set(oldElement, newElement);\n}\nexport function addSwitchAction(nodeActions, newElement) {\n    nodeActions.switch = newElement;\n}\n// stateIdentifier can be a State object (for state maps),\n// or a State property (for conditionally rendered elements)\nexport function addAppendAction(nodeActions, nodeToAppend, stateIdentifier) {\n    if (!nodeActions.append.has(stateIdentifier)) {\n        nodeActions.append.set(stateIdentifier, new Set());\n    }\n    nodeActions.append.get(stateIdentifier).add(nodeToAppend);\n}\nexport function addStateAttributeToNode(attributeNode, value) {\n    const nodeActions = getNodeActionsForNode(attributeNode);\n    setStateNodeAction(attributeNode, nodeActions, value);\n}\nexport function addAppendActionToNode(node, nodeToAppend, stateIdentifier) {\n    const nodeActions = getNodeActionsForNode(node);\n    addAppendAction(nodeActions, nodeToAppend, stateIdentifier);\n}\n\n// This is an object used to represent pending node actions,\n// that are batched and executed in reflows (requestAnimationFrame)\nexport function getNewNodeActionsObject() {\n    return ({\n        // Nodes to append to the end of node's children, \n        // keys are state objects, or state props (string) \n        // to prevent duplicate pending\n        append: new Map(),\n        // Replace each key node on Map, with value node\n        replace: new Map(),\n        // Insert value node after key node in parent node's children\n        after: new Map(),\n        // Remove these nodes from the DOM\n        // keys are state objects, or state props (string) \n        // to prevent duplicate pending\n        remove: new Map(),\n        switch: null,\n        get hasPendingActions() {\n            return (\n                this.switch !== null ||\n                this.append.size || \n                this.replace.size || \n                this.after.size || \n                this.remove.size\n            );\n        }\n    });\n}\n\n\n// This *updates*/*\"fills\"* the nodeActionsMap!\nexport function generateStateNodeActions(stateManager, stateProp) {\n    const { nodeActionsMap } = NODES_STATE;\n    const value = stateManager.state[stateProp];\n    const stateNodes = stateManager.stateNodes[stateProp];\n    // This is a map, where keys are \"parent elements\" containing \n    // custom element instanced created from a state array (\"state map\").\n    // The values are the custom element name. \n    // The actual array of state objects is in state[stateProp]\n    const stateMapElements = stateManager.stateArrayMaps[stateProp];\n    const conditionallyRenderingElements = stateManager.conditionallyRenderingElements[stateProp];\n\n    // Note, since the value change is handled by a custom setter - that setter checks if the set value is the same - \n    // if it is - it won't call handleStateChange, and it won't reach here.\n    if (stateNodes) {\n        stateNodes.forEach(node=> {\n            if (!nodeActionsMap.has(node)) nodeActionsMap.set(node, {});\n            const nodeActionsObject = nodeActionsMap.get(node);\n            setStateNodeAction(node, nodeActionsObject, value);\n        });\n    }\n\n    if (stateMapElements) {\n        // An array of state objects\n        const stateMapArray = value;\n        stateMapElements.forEach((customElementName, parentElement)=> {\n            //const newMappedElement = parentElement.cloneNode(true);\n            const stateMapNodeActions = getNewNodeActionsObject();\n            let currentStateMapArrayIndex = -1;\n            const isParentAList = isElementAList(parentElement);\n            // Compares state map arrays to actual DOM elements (by comparing state objects)\n            if (parentElement.children.length) {\n                Array.prototype.forEach.call(parentElement.children, (childElement, currentIndex)=> {\n                    let customElement = childElement;\n                    // State map elements inside Lists are wrapped with a <li>\n                    if (isParentAList) customElement = childElement.firstElementChild;\n                    let stateItem = stateMapArray[currentIndex]; \n                    if (stateItem?.hasOwnProperty('state')) stateItem = stateItem.state;\n                    if (!stateItem) {\n                        addRemoveAction(stateMapNodeActions, childElement);\n                        // newMappedElement.removeChild(newMappedElement.children[currentIndex]);\n                    }\n                    else if (customElement.state !== stateItem) {\n                        const replaceWithChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                        // newMappedElement.replaceChild(replaceWithChild, newMappedElement.children[currentIndex]);\n                        addReplaceAction(stateMapNodeActions, childElement, replaceWithChild);\n                    }\n                    currentStateMapArrayIndex = currentIndex;\n                });\n            }\n\n            // If there are more state objects in the stateMapArray - append equivalent child elements \n            currentStateMapArrayIndex++;\n            for (let i = currentStateMapArrayIndex, len=stateMapArray.length; i<len; i++) {\n                const stateItem = stateMapArray[i];\n                // New state item === new child element to append\n                if (stateItem) {\n                    const newChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                    // newMappedElement.appendChild(newChild);\n                    addAppendAction(stateMapNodeActions, newChild, stateItem);\n                }\n            }\n\n            // addSwitchAction(stateMapNodeActions, newMappedElement);\n            if (stateMapNodeActions.hasPendingActions) {\n                nodeActionsMap.set(parentElement, stateMapNodeActions);\n            }\n        });\n    }\n\n    if (conditionallyRenderingElements) {\n        // Should be slot element\n        conditionallyRenderingElements.forEach(element=> {\n            queueConditionalRender(this, ()=> element.render());\n        });\n    }\n\n    if (nodeActionsMap.size) queuePaint();\n}\n\nfunction resolveNodeActionsMapToDOMActions() {\n    const batchActions = [];\n    const attributeActions = [];\n    const elementActions = [];\n\n    const { nodeActionsMap } = NODES_STATE;\n\n    nodeActionsMap.forEach((nodeActions, node)=> {\n        // Attribute change\n        if (nodeActions.hasOwnProperty(\"setAttribute\")) {\n            const value = nodeActions.setAttribute;\n            if (typeof value === \"boolean\") {\n                if (!node.hasOwnProperty(\"originalOwnerElement\")) {\n                    console.error(\"originalOwnerElement not found on boolean attribute node! Should never happen!\");\n                }\n                if (value === false) {\n                    // Remove attribute if it exists, otherwise - do nothing\n                    if (node.originalOwnerElement.hasAttribute(node.name)) {\n                        attributeActions.push(()=> {\n                            node.originalOwnerElement.removeAttributeNode(node);\n                        });\n                    }\n                }\n                // state changed to true\n                else {\n                    if (!node.originalOwnerElement.hasAttribute(node.name)) {\n                        attributeActions.push(()=> {\n                            node.originalOwnerElement.setAttributeNode(node);\n                        });\n                    }\n                }\n            }\n            else {\n                if (typeof value === \"string\" && node.nodeValue !== value) {\n                    attributeActions.push (()=> node.nodeValue = value);\n                }\n            }\n        }\n\n        // Text change\n        else if (nodeActions.hasOwnProperty(\"textContent\")) {\n            const value = String(nodeActions.textContent);\n            if (node.nodeValue === value) return;\n            elementActions.push (()=> node.nodeValue = value);\n        }\n\n        // DOM change\n        else if (nodeActions.switch) {\n            elementActions.push(()=> node.replaceWith(nodeActions.switch));\n        }\n        else {\n            nodeActions.replace.forEach((newNode, oldNode)=> {\n                elementActions.push(()=> \n                    //oldNode.replaceWith(newNode));\n                    node.replaceChild(newNode, oldNode));\n            });\n            for (const removes of nodeActions.remove.values()) {\n                for (const nodeToRemove of removes) {\n                    if (nodeToRemove.parentNode && nodeToRemove.parentNode === node) {\n                        elementActions.push(()=> node.removeChild(nodeToRemove));\n                    }\n                }\n            }\n            for (const appends of nodeActions.append.values()) {\n                for (const newChildElement of appends) {\n                    elementActions.push(()=> node.appendChild(newChildElement));\n                }\n            }\n        }\n    });\n\n    return [...attributeActions, ...elementActions];\n}\n\n// For debugging purposes\nexport function logNodeActions() {\n    const { nodeActionsMap } = NODES_STATE;\n    [...nodeActionsMap.entries()]\n    .map(([node, actions])=> {\n\n        switch (node.nodeType) {\n            case Node.ELEMENT_NODE: {\n                console.log (\"Actions for\", node);\n                const appendElements = [...actions.append.values()];\n                if (appendElements.length) {\n                    console.log(\"Append\", appendElements);\n                }\n                const replaceElements = [...actions.replace.entries()];\n                if (replaceElements.length) {\n                    console.log(\"Append\", replaceElements);\n                }\n                if (actions.remove.size) {\n                    console.log (\"Remove\", actions.remove);\n                }\n                break;\n            }\n\n            case Node.ATTRIBUTE_NODE: {\n                console.log (\"Set Attribute\", node.nodeName, \"on\", node.originalOwnerElement, \"to\", actions.setAttribute);\n                break;\n            }\n\n            case Node.TEXT_NODE: {\n                console.log (\"Set text content for\", node.parentNode, \"to\", actions.textContent);\n                break;\n            }\n        }\n    });\n}\n// This function runs on requestAnimationFrame to run pending Node actions\nexport function doUpdateDOM() {\n    let { nodeActionsMap } = NODES_STATE;\n    if (nodeActionsMap.size) {\n        // logNodeActions();\n        const DOMActions = resolveNodeActionsMapToDOMActions(nodeActionsMap);\n        DOMActions.forEach(DOMAction=> DOMAction());\n        NODES_STATE.nodeActionsMap = new Map();\n    }\n}\n\n","\n// Sets an internal read-only \"hidden\" property on an object:\nexport function setHiddenProperty(obj, propName, propValue, enumerable=false) {\n    Object.defineProperty(obj, propName, {\n        value: propValue,\n        configurable: false,\n        writable: false,\n        enumerable,\n    });\n}","import { BOOLEAN_ATTRIBUTES, BUILT_IN_STATE_PROPS } from \"./consts.js\";\nimport { generateStateNodeActions } from './node_actions.js';\nimport { setHiddenProperty } from \"./prop_utils.js\";\n\n\nif (typeof HTMLElement === 'undefined') {\n    console.warn (\"HTMLElement was not found! This probably means you are running in a non-browser environment, and can lead to unexpected results\");\n}\nelse {\n    // Make sure \"setAttribute\" is not overridable\n    Object.defineProperty(globalThis, \"elementSetAttribute\", {\n        value: HTMLElement.prototype.setAttribute,\n        writable: false,\n        configurable: false\n    });\n}\n\n\nexport const setAttribute = function(attrName, attrValue) {\n    if (BOOLEAN_ATTRIBUTES.includes(attrName)) {\n        if (attrValue === \"false\") {\n            this.removeAttribute(attrName);\n        }\n        else {\n            elementSetAttribute.call(this, attrName, \"\");\n        }\n    }\n    else {\n        elementSetAttribute.call(this, attrName, attrValue);\n    }\n}\n\n// This creates the binding to state props on \"State attributes\".\n// This function is called when a custom element instance ic connected to the DOM\nexport const setStateAttribute = function(attrName, stateProp) {\n    let equalityValue = null;\n    if (stateProp.indexOf(':') !== -1) {\n        if (stateProp.indexOf('is_') === 0) {\n            const colonIndex = stateProp.indexOf(':');\n            if (colonIndex === -1) {\n                throw Error(\"When using conditional equality state attribute, you must include a colon character followed by an equality value!\");\n            }\n            equalityValue = stateProp.substring(colonIndex+1);\n            stateProp = stateProp.substring(3, colonIndex);\n        }\n    }\n    let [stateVal, theState] = this.getState(stateProp, true); \n\n    if (stateVal === undefined) {\n        console.warn(`State value for ${stateProp} is undefined. State values should never be undefined.`)\n        return;\n    }\n    if (!theState) {\n        console.warn (\"No State object with state prop: \" + stateProp);\n        return;\n    }\n    if (equalityValue) {\n        const conditionalStateProp = \"is_\"+stateProp+equalityValue;\n        const originalStateProp = stateProp;\n        Object.defineProperty(theState, conditionalStateProp, {\n            get() {\n                return this[originalStateProp] === equalityValue\n            },\n            enumerable: false\n        });\n        theState._stateManager.addStateDependency(stateProp, conditionalStateProp);\n        stateVal = theState[conditionalStateProp];\n        stateProp = conditionalStateProp;\n    }\n\n    const valueToSet = stateVal;\n    this.removeAttribute(attrName);\n    // Create an \"Attribute Node\"\n    const stateAttrNode = document.createAttribute(attrName);\n    stateAttrNode.nodeValue = valueToSet;\n    // Saves a readonly boolean that marks this as a \"state attribute node\"\n    setHiddenProperty(stateAttrNode, \"isStateAttribute\", true);\n    // Save ownerElement to a different property,\n    // so if the attribute is removed (in case of a boolean attribute),\n    // and later re-attached, we would know which element to add it back to.\n    setHiddenProperty(stateAttrNode, \"originalOwnerElement\", this);\n/*\n    Object.defineProperty(stateAttrNode, \"stateValue\", {\n        value: valueToSet,\n        writeable: true,\n        configurable: false,\n        enumerable: true\n    });\n*/\n    if (typeof valueToSet === \"boolean\") {\n        // A boolean attribute value should ALWAYS be an empty string,\n        // the value itself never changes, it is removed fron the element if false, \n        // and added if true\n        stateAttrNode.nodeValue = \"\";\n    }\n\n    // Adds the attribute to the element\n    if (valueToSet !== false) {\n        this.setAttributeNode(stateAttrNode);\n    }\n\n    theState._stateManager.addStateNode(stateProp, stateAttrNode, typeof valueToSet === \"boolean\");\n\n}\nexport const setStateText = function(stateProp) {\n    const [stateVal, theState] = this.getState(stateProp, true); \n\n    if (stateVal === undefined || stateVal === null) {\n        console.warn(`State value for ${stateProp} is undefined or null for _text command`);\n        return;\n    }\n    if (!theState) {\n        console.warn (\"No State object with state prop: \" + stateProp);\n        return;\n    }\n    const valueToSet = stateVal;\n    const textNode = document.createTextNode(valueToSet);\n    setHiddenProperty(textNode, \"isStateAttribute\", true);\n    this.appendChild(textNode);\n    theState._stateManager.addStateNode(stateProp, textNode);\n}\n\n// Convert a stateObject to a custom element, used in State Map Arrays\nexport function stateToElement(stateObject, elemName, wrapInElement) {\n    const customElementInstance = document.createElement(elemName);\n    customElementInstance.setInitialState(stateObject);\n    let returnElement;\n    if (wrapInElement) {\n        returnElement = document.createElement(wrapInElement);\n        returnElement.appendChild(customElementInstance);\n    }\n    else {\n        returnElement = customElementInstance;\n    }\n    return returnElement;\n}\n\nexport function mapStateArrayToElements(stateItems, elemName, wrapInElement) {\n    // Each state item should be a stateManager\n    return stateItems.map(stateItem => {\n        if (stateItem.hasOwnProperty('state')) stateItem = stateItem.state;\n        if (typeof stateItem !== 'object') {\n            console.warn(\"item in State array for _map is not an object: \", stateItem);\n            return {};\n        }\n        return stateToElement(stateItem, elemName, wrapInElement);\n    });\n}\n\n// Main function that handles all state changes in a state object\nexport function handleStateChange(stateManager, stateProp) {\n    if (BUILT_IN_STATE_PROPS.includes(stateProp)) return;\n    // Populate the next Node Actions to perform\n    generateStateNodeActions(stateManager, stateProp);\n\n    const state = stateManager.state;\n    // Run on[stateProp]Change hooks\n    if (state.hasOwnProperty(`on_${stateProp}Change`)) {\n        if (typeof state[`on_${stateProp}Change`] === \"function\")\n            state[`on_${stateProp}Change`].call(state);\n    }\n\n    const stateDependencies = stateManager.stateDependencies[stateProp];\n    if (stateDependencies) {\n        stateDependencies.forEach(depStateProp=> {\n            // A \"Setter\" hook\n            if (depStateProp.indexOf('set_') === 0) {\n                const setStateProp = depStateProp.substring(4);\n                const func = state[depStateProp][0];\n                if (func && typeof func === \"function\") {\n                    state[setStateProp] = func.call(state);\n                    return;\n                }\n            }\n            generateStateNodeActions(stateManager, depStateProp);\n            if (state.hasOwnProperty(`on${depStateProp}Change`)) {\n                if (typeof state[`on${depStateProp}Change`] === \"function\")\n                    state[`on${depStateProp}Change`].call(state);\n            }\n        });\n    }\n\n    // Global state\n    if (!state._global) {\n        const globalStateDependencies = stateManager.globalStateDependencies[stateProp];\n        globalStateDependencies?.forEach((depStateProps, depStateManager)=> {\n            const depState = depStateManager.state;\n            depStateProps.forEach(depStateProp=> {\n                // A \"Setter\" hook\n                if (depStateProp.indexOf('set_') === 0) {\n                    const setStateProp = depStateProp.substring(4);\n                    const func = state[depStateProp][0];\n                    if (func && typeof func === \"function\") {\n                        depState[setStateProp] = func.call(depState);\n                        return;\n                    }\n                }\n                generateStateNodeActions(depStateManager, depStateProp);\n                if (state.hasOwnProperty(`on${depStateProp}Change`)) {\n                    if (typeof state[`on${depStateProp}Change`] === \"function\")\n                        depState[`on${depStateProp}Change`].call(depState);\n                }\n            });\n        });\n    }\n}\n\nexport function populateStateFromInitialState(state, initialState) {\n    state._populate = true;\n    const descriptors = Object.getOwnPropertyDescriptors(initialState);\n    let descrp;\n    for (let key in descriptors) {\n        if (BUILT_IN_STATE_PROPS.includes(key)) {\n            delete descriptors[key];\n            continue;\n        }\n        descrp = descriptors[key];\n        if (descrp.hasOwnProperty('get') && typeof descrp.get === \"function\") {\n            descrp.get.bind(state);\n        }\n        if (descrp.hasOwnProperty('value')) {\n            const value = descrp.value;\n            if (typeof value === \"function\") {\n                descrp.value.bind(state);\n            }\n            else if (Array.isArray(value) && key.indexOf(\"set_\") === 0) {\n                const func = value?.[0];\n                if (func && typeof func === \"function\") {\n                    func.bind(state);\n                }\n            }\n        }\n    }\n\n    // If state set hooks should run on initialization - \n    // they should run by the proxy handler for \"defineProperty\"\n    Object.defineProperties(state, descriptors);\n    delete state._populate;\n}\n\n/* Experimental rendering of state maps using DocumentFragment. Not stable */\n/* \nexport function resolveStateMapToDocumentFragment({ customElementName, parentElement}, stateMapArray) {\n    const resolvedDocumentFragment = new DocumentFragment();\n    // const stateMapNodeActions = getNewNodeActionsObject();\n    let currentStateMapArrayIndex = -1;\n    const isParentAList = isElementAList(parentElement);\n    // Compares state map arrays to actual DOM elements (by comparing state objects)\n    if (parentElement.children.length) {\n        Array.prototype.forEach.call(parentElement.children, (childElement, currentIndex)=> {\n            let customElementChild = childElement;\n            // State map elements inside Lists are wrapped with a <li>\n            if (isParentAList) customElementChild = childElement.firstElementChild;\n            let stateItem = stateMapArray[currentIndex]; \n            if (stateItem?.hasOwnProperty('state')) stateItem = stateItem.state;\n            if (stateItem && customElementChild.state !== stateItem) {\n                const newCustomElementChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n                resolvedDocumentFragment.appendChild(newCustomElementChild);\n            }\n            else {\n                resolvedDocumentFragment.append(childElement)\n            }\n            currentStateMapArrayIndex = currentIndex;\n        });\n    }\n\n    // If there are more state objects in the stateMapArray - append equivalent child elements \n    currentStateMapArrayIndex++;\n    for (let i = currentStateMapArrayIndex, len=stateMapArray.length; i<len; i++) {\n        const stateItem = stateMapArray[i];\n        // New state item === new child element to append\n        if (stateItem) {\n            // Make sure we don't already have a pending append action for the same state object\n            const newChild = stateToElement(stateItem, customElementName, isElementAList(parentElement) ? \"li\" : undefined);\n            resolvedDocumentFragment.appendChild(newChild);\n        }\n    }\n\n    return resolvedDocumentFragment;\n    if (resolvedDocumentFragment.children.length) {\n        parentElement.innerHTML = '';\n        //addReplaceAction(stateMapNodeActions, childElement, replaceWithChild);\n        //nodeActionsMap.set(parentElement, stateMapNodeActions);\n    }    \n}\n*/\n\n","import { mapStateArrayToElements } from \"./state_utils.js\";\nimport { SUPPORTED_ATTRIBUTES_FOR_BINDING, SUPPORTED_PROPERTIES_FOR_BINDING, SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING } from \"./consts.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { isElementAList } from \"./DOM_utils.js\";\nimport { attributeValueToTypedValue } from \"./attr_utils.js\";\n\nfunction mapStateToElements(stateItemsPropertyName, customElementName, parentElement) {\n    const [stateItemsArray, theState] = parentElement.getState(stateItemsPropertyName, true);\n    if (!stateItemsArray || !Array.isArray(stateItemsArray)) {\n        console.warn (\"state value for _map is not an array, in state property: \" + stateItemsPropertyName);\n        return null;\n    }\n    const wrapInElement = isElementAList(parentElement) ? \"li\" : undefined;\n    const elements = mapStateArrayToElements(stateItemsArray, customElementName, wrapInElement);\n    parentElement.innerHTML = \"\";\n    if (elements.length) {\n        parentElement.append(...elements);\n    }\n    return theState;\n}\n\n// Functions that run and handles \"Command\" attributes. Note, they should always be called\n// with the \"this\" context set to the custom element the command is defined on\nexport const COMMANDS = {\n    map: function(commandValue) {\n        // The command value (\"argument\") is \"<stateProp>:<custom element name>\"\n        const [stateItemsPropertyName, customElementName] = commandValue.split(':');\n        const thiselement = this;\n        const theState = mapStateToElements(stateItemsPropertyName, customElementName, thiselement);\n        if (!theState) {\n            console.warn (`Mapping ${stateItemsPropertyName} to ${customElementName} failed!`);\n            return;\n        }\n        theState._stateManager.addStateMap(stateItemsPropertyName, customElementName, thiselement);\n    },\n    text: function(commandValue) {\n        const stateProp = commandValue;\n        this.initialSetText(stateProp);\n        // DO NOT CALL .normalize()! It might change the Text Nodes!\n    },\n    bind: function(commandValue) {\n        const [attributeName, statePropName] = commandValue.split(':');\n        if (!attributeName || !statePropName) {\n            console.warn (\"Incorrect usage of _bind command! Please pass <attribute-name>:<state-prop-name>\");\n            return;\n        }\n        if (!attributeName in SUPPORTED_ATTRIBUTES_FOR_BINDING) {\n            console.warn (`Attribute ${attributeName} is not supported for _bind command!`);\n            return;\n        }\n        this.bindAttributeToState(attributeName, statePropName);\n\n        if (SUPPORTED_PROPERTIES_FOR_BINDING.includes(attributeName)) {\n            if (attributeName === \"value\" && this.tagName === \"INPUT\" && SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING.includes(this.getAttribute('type'))) {\n                this.addEventListener(\"input\", \n                    ()=> this.updateStateFromProperty(\"value\")\n                );\n            }\n            else if (attributeName === \"checked\" && this.tagName === \"INPUT\" && this.getAttribute('type') === \"checkbox\") {\n                this.addEventListener(\"change\", \n                    ()=> this.updateStateFromProperty(\"checked\")\n                );\n            }\n        }\n   },\n}","import { COMMANDS as COMMAND_ATTRIBUTES } from \"./commands.js\";\nimport { BOOLEAN_ATTRIBUTES, SUPPORTED_ATTRIBUTES_FOR_BINDING, GLOBAL_STATE_FUNCTION_NAME, DEFAULT_TEMPLATE_DOM } from \"./consts.js\";\nimport { queueActivate } from \"./paint_utils.js\";\nimport { setAttribute, setStateAttribute, setStateText } from \"./state_utils.js\";\n\nexport function extendElementClassWithReactiveElementClass(elementClass, appScope = window) {\n    class ReactiveElement extends elementClass {\n        // Should contain the \"root\" DOM element containing this element\n        host = null\n\n        // For input elements - to force bubble-up of change events\n        #changeEventHandler\n\n        #wasMounted = false\n\n        // Used for the _bind command, which allows \"reverse-binding\" attribute values to state props,\n        // keys are attribute names, values are state prop names\n        #boundAttributesToState = {}\n        static observedAttributes = [\"ref\"]\n                                    .concat(SUPPORTED_ATTRIBUTES_FOR_BINDING)\n                                    .concat(Object.keys(COMMAND_ATTRIBUTES).map(command => ('_' + command.toLowerCase())));\n\n\n        bindAttributeToState(attrName, statePropName) {\n            this.#boundAttributesToState[attrName] = statePropName;\n        }\n        unbindAttributeToState(attrName) {\n            delete this.#boundAttributesToState[attrName];\n        }\n        \n        // For input elements\n        updateStateFromProperty(propertyName) {\n            let newValue = this[propertyName];\n            const stateProp = this.#boundAttributesToState[propertyName];\n            const [stateValue, theState] = this.getState(stateProp, true);\n            if (stateValue !== newValue) theState[stateProp] = newValue;\n\n        }\n\n        #updateStateFromAttribute(attributeName) {\n            let newValue = this.getAttribute(attributeName);\n            if (BOOLEAN_ATTRIBUTES.includes(attributeName)) {\n                if (newValue === null) newValue = false;\n                else newValue = true;\n            }\n            const stateProp = this.#boundAttributesToState[attributeName];\n            const [stateValue, theState] = this.getState(stateProp, true);\n            if (stateValue !== newValue) theState[stateProp] = newValue;\n        }\n\n        disconnectedCallback() {\n            if (this.#changeEventHandler) this.removeEventListener('change', this.#changeEventHandler);\n            const host = this.host ?? this;\n            if (host.ref) {\n                const thisRefName = this.getAttribute('ref');\n                if (thisRefName) { \n                    delete host.ref[thisRefName];\n                    delete host.events[thisRefName];\n                }\n            }\n            this.#boundAttributesToState = {};\n        }\n\n        activate() {\n            // Keep it here and not in bindEvents! \n            if (this?.tagName === \"INPUT\") {\n                this.#changeEventHandler = function() {\n                    const changeEvent = new Event('inputChange', { bubbles: true, composed: true });\n                    this.dispatchEvent(changeEvent);\n                }\n                // Change events does not automatically bubbles, we need to listen and bubble up a new event\n                this.addEventListener('change', this.#changeEventHandler, false);\n            }\n\n            const commands = [];\n            const attributeNames = this.getAttributeNames();\n            for (const attrName of attributeNames) {\n                const attrValue = this.getAttribute(attrName);\n                // This also resolves \"State attributes\"\n                this.initialSetAttribute(attrName, attrValue);\n\n                // Save \"Command attributes\"\\\n                if (attrName.indexOf('_') === 0) {\n                    const command = attrName.substring(1);\n                    commands.push({ command, args: attrValue });\n                }\n            } \n            commands.forEach(({ command, args})=> {\n                COMMAND_ATTRIBUTES[command]?.call(this, args);\n            });\n\n        }\n        connectedCallback() {\n            if (this.#wasMounted) return;\n            // IMPORTANT: THIS *CAN* be NULL, DO NOT CHANGE IT!\n            // It is part of the way a check is made to see if an element is part of ShadowDOM!\n            // host will be null if the element is part of the DOM === the \"root\" custom element will have null in .host\n            // THIS SHOULD BE THE FIRST THING THAT HAPPENS!\n            this.host = this.getRootNode().host;\n            if (this.host) {\n                // Once the host custom element is connected\n                // then its 'State' is ready and activated,\n                // then we can call the sub-elements 'activate()',\n                // which relies on an active state.\n                // Doing it like this, allow visual render faster,\n                // defering the state handling.\n                this.host.addEventListener(\"connected\", \n                    ()=> this.activate()),\n                { once: true }\n            }\n            else {\n                // queueActivate(this, ()=> this.activate());\n                queueMicrotask(()=> this.activate());\n\n            }\n            this.#wasMounted = true;\n        }\n\n        attributeChangedCallback(attributeName, oldValue, newValue) { \n            if (oldValue === newValue) return;\n            if (!this.isConnected) return;\n\n            if (attributeName === \"ref\") {\n                const host = this.isNativeElement ? this.host : this;\n                const refValue = newValue;\n                host.ref[refValue] = this;\n                return;\n            }\n\n            if (attributeName in this.#boundAttributesToState) {\n                this.#updateStateFromAttribute(attributeName);\n                return;\n            }\n\n            if (attributeName.indexOf('@') === 0) {\n                const propName = attributeName.substring(1);\n                const attrNode = this.getAttributeNode(attributeName);\n                attrNode.nodeValue = this.host.getAttribute(propName);\n                if (!this.host.propAttributes.has(propName)) {\n                    this.host.propAttributes.set(propName, new Set());\n                }\n                this.host.propAttributes.get(propName).add(attrNode);\n            }\n\n        }\n\n        // Gets state value of stateProp,\n        // tries to resolve from local state(s) first,\n        // and then from global. If the second argument is true, returns both the state value and the state objec\n        getState(stateProp, returnStateObject=false) {\n            let theState;\n            // If this is a reactive element inside a reactive web component - the host should be the containing web component - \n            // we should reference its state, if host is null - it is most likely the host web component\n            let thisInstance = this.isNativeElement && this.host ? this.host : this;\n            // if (!thisInstance) return returnStateObject ? [undefined, undefined] : undefined;\n            let stateVal;\n            if (thisInstance && thisInstance.state) {\n                stateVal = thisInstance.state?.[stateProp];\n            }\n\n            let globalState = false;\n            while (stateVal === undefined && typeof thisInstance.host !== 'undefined' && thisInstance.host !== null) {\n                thisInstance = thisInstance.host;\n                stateVal = thisInstance.state?.[stateProp];\n            }\n\n            if (stateVal !== undefined) theState = thisInstance.state;\n            else {\n                globalState = appScope[GLOBAL_STATE_FUNCTION_NAME]();\n                stateVal = globalState?.[stateProp];\n                if (stateVal !== undefined) theState = globalState;\n            } \n            if (returnStateObject) {\n                return [stateVal, theState];\n            }\n            return stateVal;\n        }\n        \n        findElement(refName) {\n            const host = this.host || this;\n            // if Shadow DOM is used, the \"root\" element is shadowRoot, otherwise it is the \n            // web component itself\n            let root = host;\n            if (appScope.SPROUT_CONFIG.useShadow) {\n                root = host.shadowRoot;\n            }\n            return host.ref.hasOwnProperty(refName) ? host.ref[refName] : root.querySelector(`[ref=\"${refName}\"]`);\n        }\n\n        // The \"initialSetX\" functions are called:\n        // 1. When a custom element instance is first created (before it's connected) - \n        // state attribute values are set to their state prop names (e.g: '$name').\n        // 2. When a custom element instance becomes connected (added to the DOM) - state attribute values are actually resolved to the\n        // value of their respective state prop values, and binding between them occurs.\n        initialSetText(stateProp) {\n            setStateText.call(this, stateProp);\n        }\n        initialSetAttribute(attributeName, attributeValue) {\n            attributeValue = String(attributeValue);\n            let valueToSet = attributeValue;\n            /*\n            // \"Property Attribute\"\n            if (attributeValue.indexOf('@') === 0 && this.host && this.isConnected) {\n                valueToSet = this.host.getAttribute(attributeValue.substring(1));\n            } \n            */\n            \n            // \"State attribute\"\n            if (attributeValue.indexOf('$') === 0 && this.isConnected)  {\n                let stateProp = attributeValue.substring(1);\n                setStateAttribute.call(this, attributeName, stateProp);\n            }\n            // normal attribute\n            else {\n                setAttribute.call(this, attributeName, valueToSet);\n            }\n        }\n    }\n\n    /*\n    if (DEBUG_MODE) {\n        const descriptors = Object.getOwnPropertyDescriptors(ReactiveElement.prototype);\n        for (const key in descriptors) {\n            const descrp = descriptors[key];\n            Object.defineProperty(ReactiveElement.prototype, key, {\n                writable: descrp.writable,\n                configurable: descrp.configurable,\n                enumerable: descrp.enumerable,\n                value: ()=> {\n                    `Calling ${key} on ReactiveElement for ${elementClass.toString()}`;\n                    descrp.value();\n                }\n            });\n        }\n    }\n    */\n\n    return ReactiveElement;\n}\n","import StateManager from \"./StateManager.js\";\nimport { StatefulArrayHandler } from \"./proxy_handlers.js\";\nimport { handleStateChange } from \"./state_utils.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\n\nclass StatefulArray extends Array {\n\n    // This will define which \"constructor\" JS calls whenever it needs to construct a new array while calling some Array native functions\n    static get [Symbol.species]() {\n        return Array;\n    }\n\n    // If any of these are \"set\" - handle state change in the value\n    dependencyProps = new Map();\n\n    // We set the $$operation property on functions that manipulates the array in a way that can change its length,\n    // to prevent redundant calls for handleStateChange.\n    // The call will be made when the \"length\" property of the array will be changed\n    splice(...args) {\n        this.$$operation = \"splice\";\n        const result = super.splice(...args);\n        delete this.$$operation;\n        return result;\n    }\n    shift(...args) {\n        this.$$operation = \"shift\";\n        const result = super.shift(...args);\n        delete this.$$operation;\n        return result;\n    }\n    unshift(...args) {\n        this.$$operation = \"splice\";\n        const result = super.unshift(...args);\n        delete this.$$operation;\n        return result;\n    }\n\n    sort(...args) {\n        this.$$operation = \"sort\";\n        const result = super.sort(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    reverse(...args) {\n        this.$$operation = \"reverse\";\n        const result = super.reverse(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    fill(...args) {\n        this.$$operation = \"fill\";\n        const result = super.fill(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n    \n    copyWithin(...args) {\n        this.$$operation = \"copyWithin\";\n        const result = super.sort(...args);\n        delete this.$$operation;\n        handleStateChange(this.parentStateObject._stateManager, this.arrayStateProp);\n        return result;\n    }\n\n    slice(...args) {\n        this.$$operation = \"slice\";\n        const result = super.slice(...args);\n        delete this.$$operation;\n        return result;\n    }\n\n    /*\n    clone() {\n        this.$$operation = \"clone\";\n        const result = this.map(item=> item);\n        delete this.$$operation;\n        return result;\n    }\n    */\n    toArray() {\n        this.$$operation = \"toArray\";\n        /*\n        const result = [];\n        for (let i = 0, len=this.length; i<len; i++) {\n            result.push(Object.assign({}, this[i]));\n        }\n        */\n        const result = this.rawArray;\n        delete this.$$operation;\n        return result;\n    }\n    // noConvertToStateItems can be used in internal methods where a normal array is returned and you just want to recreate a StatefulArray,\n    // with the same state items\n\n    // NOTE: original Array constructor can get a series of arguments to build an array from, OR a single number,\n    // to create an array with that number as a length\n    constructor(initialArray, parentStateObject, arrayStateProp, noConvertToStateItems=false, appScope = window) {\n        const StateManager = appScope.SPROUT_CONFIG.stateManagerClass;\n\n        if (!Array.isArray(initialArray)) {\n            throw Error(\"Argument for StateFulArray constructor must be an array!\");\n        }\n\n        const rawArray = initialArray;\n        let statefulArray;\n        if (!noConvertToStateItems) {\n            statefulArray = rawArray.map((item, index)=> {\n                if (item?.hasOwnProperty('state')) return item;\n                if (Array.isArray(item)) return item; // return new StatefulArray(item, this[index].state, index, false, appScope); \n                if (typeof item === 'object') return new StateManager(item, arrayStateProp, parentStateObject._stateManager, false, appScope);\n                return item;\n            });\n        }\n        super(...statefulArray);\n\n        this.parentStateObject = parentStateObject;\n        this.arrayStateProp = arrayStateProp;\n        this.rawArray = rawArray;\n\n        statefulArray = new Proxy(this, StatefulArrayHandler(parentStateObject?._stateManager, arrayStateProp, appScope));\n        return statefulArray;\n    }\n}\n\nif (DEBUG_MODE) {\n    StatefulArray = putObjectInDebugMode(StatefulArray, \"StatefulArray\");\n}\n\nexport default StatefulArray;","import StateManager from \"./StateManager.js\";\nimport { handleStateChange } from \"./state_utils.js\";\nimport StatefulArray from \"./StatefulArray.js\";\nimport { BUILT_IN_STATE_PROPS, ERROR_MESSAGES } from \"./consts.js\";\n\nexport const StatefulArrayHandler = function(parentStateManager, arrayStateProp, appScope = window) {\n    const StateManager = appScope.SPROUT_CONFIG.stateManagerClass;\n    return {\n        set(targetArray, property, value) {\n            // A change in array length triggers state change in the array state prop\n            if (property === \"length\") {\n                const setResult = Reflect.set(targetArray, property, value);\n                parentStateManager.setDirtyProp(arrayStateProp);\n                // queueMicrotask(()=> handleStateChange(parentStateManager, arrayStateProp));\n                return setResult;\n            }\n\n            // Return if the value is the same\n            if (targetArray[property] === value) return true;\n\n            const index = Number(property);\n            if (!isNaN(index)) { // Check if the property is a numeric index\n                // If we set it to a new object, convert it to a state object\n                if (typeof value === 'object' && (!value.hasOwnProperty('_stateManager') && !value.hasOwnProperty('state'))) {\n                    value = new StateManager(value, arrayStateProp, parentStateManager, false, appScope);\n                }\n                // Make sure state values are always state manager values\n                // Sometimes they can be state objects (because of the custom get handler in the Proxy)\n                if (value.hasOwnProperty('_stateManager')) {\n                    value = value._stateManager;\n                }\n                // This means the object actions are part of a native array function ('splice' etc.), and that we should NOT\n                // mark $$mapAction on values\n                if (!targetArray.hasOwnProperty('$$operation')) {\n                    let doStateChangeHandle = false;\n                    if (index < targetArray.length) {\n                        doStateChangeHandle = true;\n                    }\n                    const setResult = Reflect.set(targetArray, property, value);\n                    // Only handle state change if this is a change for an existing array item,\n                    // if it's a new item, it will already be handled on the \"length\" property set\n                    // Without this check we will have a redundant state check\n                    if (doStateChangeHandle) {\n                        parentStateManager.setDirtyProp(arrayStateProp);\n                        //queueMicrotask(()=> handleStateChange(parentStateManager, arrayStateProp));\n                    }\n                    return setResult;\n                }\n            }\n            return Reflect.set(targetArray, property, value);\n        },\n        \n        get(targetArray, property, receiver) {\n            // if (typeof property === 'symbol') return Reflect.get(...arguments);\n            // if (property === 'hasOwnProperty') return Reflect.get(...arguments);\n            const index = Number(property);\n            if (!isNaN(index)) {\n                if (!targetArray[index]) return undefined;\n                if (targetArray[index].hasOwnProperty('state')) return targetArray[index].state;\n                // Could be another array\n                return targetArray[index];\n            }\n\n            /*\n            // If this property is set on the array, it means the get is part of a \"dependency check\"\n            if (targetArray.hasOwnProperty(\"_gettingDependenciesFor\")) {\n                targetArray.dependencyProps.set(property, targetArray._gettingDependenciesFor);\n                delete targetArray._gettingDependenciesFor;\n            }\n            */\n            \n            return Reflect.get(...arguments);\n        }\n    }\n}\n\nexport const StateObjectValueHandler = function(rootStateObj, objPropertyName, appScope = window) {\n    return {\n        defineProperty(targetObj, property, descriptor) {\n            if (typeof descriptor?.value !== \"undefined\") {\n                const value = descriptor.value;\n                // Could already be a StatefulArray (needs to find better way to detect this)\n                if (Array.isArray(value)) {\n                    if (!value?.[0]?._stateManager) {\n                        descriptor.value = new StatefulArray(descriptor.value, rootStateObj, objPropertyName, false, appScope);\n                    }\n                }\n                else if (typeof value === \"object\") {\n                    descriptor.value = new Proxy(descriptor.value, StateObjectValueHandler(rootStateObj, objPropertyName, appScope))\n\n                }\n            }\n            else if (typeof descriptor?.get === \"function\") {\n                descriptor.get.call(targetObj);\n            }\n            // Don't use \"arguments\" here - they are not linked to argument changes in 'strict'\n            const definePropertyResult = Reflect.defineProperty(targetObj, property, descriptor);\n            const stateManager = rootStateObj._stateManager;\n            stateManager.setDirtyProp(objPropertyName);\n            // queueMicrotask(()=> handleStateChange(stateManager, objPropertyName));\n            return definePropertyResult;\n        },\n    }\n}\nexport const StateHandler = function(stateObj, appScope = window) {\n    return {\n        defineProperty(targetState, stateProp, descriptor) {\n            if (BUILT_IN_STATE_PROPS.includes(stateProp) || targetState?._binding) {\n                return Reflect.defineProperty(...arguments);\n            }\n            const origTargetState = targetState;\n            const dependencies = new Set();\n            // Will be the actual prop name if this is a state hook setter\n            let setStateProp;\n            targetState = new Proxy(targetState, {\n                get(target, property, receiver) {\n                    if (property === \"_global\") {\n                        target._global._gettingDependenciesFor = stateProp;\n                        target._global._localStateManager = target._stateManager;\n\n                    }\n                    if (BUILT_IN_STATE_PROPS.includes(property)) {\n                        return Reflect.get(...arguments);\n                    }\n                    if (Array.isArray(target[property])) {\n                        target[property]._gettingDependenciesFor = stateProp;\n                    }\n                    dependencies.add(property);\n                    return Reflect.get(...arguments);\n                }\n            });\n            if (typeof descriptor?.value !== \"undefined\") {\n                const value = descriptor.value;\n                // Could already be a StatefulArray (needs to find better way to detect this)\n                if (Array.isArray(value)) {\n                    // Setter Hook\n                    if (stateProp.indexOf('set_') === 0) {\n                        const deps = value?.[1];\n                        if (!deps) throw Error(ERROR_MESSAGES.NO_DEPENDENCIES_ARRAY_IN_SET_HOOK(stateProp));\n                        // Second item should be an array of dependencies\n                        value?.[1].forEach(depProp=> {\n                            dependencies.add(depProp);\n                        });\n                        // Third item can be a boolean stating if to run the setter on initialization\n                        if (value?.[2] === true) {\n                            setStateProp = stateProp.substring(4);\n                            const func = value?.[0];\n                            if (func && typeof func === \"function\") {\n                                stateObj[setStateProp] = func.call(stateObj);\n                            }\n                        }\n                        else {\n                            if (value?.[3]) {\n                                stateObj[setStateProp] = value[3]\n                            }\n                        }\n                    }\n                    else if (!value?.[0]?._stateManager) {\n                        descriptor.value = new StatefulArray(descriptor.value, stateObj, stateProp, false, appScope);\n                    }\n                }\n                else if (typeof value === 'object') {\n                    descriptor.value = new Proxy(descriptor.value, StateObjectValueHandler(stateObj, stateProp, appScope));\n                }\n            }\n            else if (typeof descriptor?.get === \"function\") {\n                descriptor.get.call(targetState);\n            }\n\n            if (dependencies.size) {\n                dependencies.forEach(dep=> stateObj._stateManager.addStateDependency(dep, stateProp));\n            }\n\n            // Don't use \"arguments\" here - they are not linked to argument changes in 'strict'\n            const definePropertyResult = Reflect.defineProperty(origTargetState, stateProp, descriptor);\n            const stateManager = stateObj._stateManager;\n            if (setStateProp) stateProp = setStateProp;\n            if (!origTargetState.hasOwnProperty(\"_populate\"))\n                stateManager.setDirtyProp(stateProp);\n                // queueMicrotask(()=> handleStateChange(stateManager, stateProp));\n            return definePropertyResult;\n        },\n        get(targetState, property, receiver) {\n            if (property === 'hasOwnProperty') return Reflect.get(...arguments);\n            // Global state access\n            if (!targetState.hasOwnProperty('_global')) {\n                if (targetState.hasOwnProperty(\"_gettingDependenciesFor\")) {\n                    targetState._stateManager.addGlobalStateDependency(property, targetState._gettingDependenciesFor, targetState._localStateManager);\n                    delete targetState._gettingDependenciesFor;\n                    delete targetState._localStateManager;\n                    return Reflect.get(...arguments);\n                }\n            }\n            // property can be a Symbol on rare occasions, then indexOf will be undefined (that's the reason for the question mark)\n            // This handles using the negate operator on state properties\n            if (typeof property?.indexOf === 'function' && property?.indexOf('!') === 0) {\n                const originalProperty = property.substring(1);\n                if (targetState.hasOwnProperty(originalProperty)) {\n                    return !targetState[originalProperty];\n                }\n            }\n            return Reflect.get(...arguments);\n        }\n    }\n};\n","import { handleStateChange, populateStateFromInitialState } from \"./state_utils.js\";\nimport { StateHandler } from \"./proxy_handlers.js\";\nimport { GLOBAL_STATE_FUNCTION_NAME } from \"./consts.js\";\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\nimport { setHiddenProperty } from \"./prop_utils.js\";\n\n// This class actually handles \"State\". It returns a proxied \"state\" object,\n// while handling all state changes and triggers behind the scenes\nclass StateManager {\n\n    // The privateState is used to actually contain values to read from,\n    // as custom getters and setters are defined\n    privateState = {}\n    // This represents the \"publicly\" exposed state object\n    state = {};\n\n    // Saves \"map\" connections between a state array value and a custom element name,\n    // this will enable creating/removing new custom elements when items of a state array change\n    stateArrayMaps = {};\n    // conditionallyRenderingElements = {};\n    // A map that maps state props to \"dependencies\", each time a stateProp which is a key here,\n    // is changed, a state change is triggered for its dependencies as well\n    stateDependencies = {};\n    conditionallyRenderingElements = {};\n\n    // Maps state props to state nodes,\n    // Keys are state props, and values are sets of Nodes\n    stateNodes = {}\n\n    // These are used when the state object is part of Stateful Array\n    parentStateProp\n    parentStateManager\n    // parentStatePropName is used if the state object is e.g. an item of an array on a state object,\n    // or a value in an object on a state object - any change on the child state object should trigger state\n    // changes on the parentStateProp\n    // host is the host element that the state is attached to\n    \n    dirtyProps = new Set();\n\n    #handleStateChangeRAF_ID = null;\n    setDirtyProp(prop) {\n        this.dirtyProps.add(prop);\n        if (this.#handleStateChangeRAF_ID) {\n            cancelAnimationFrame(this.#handleStateChangeRAF_ID);\n            // clearTimeout(this.#handleStateChangeRAF_ID);\n\n        }\n        this.#handleStateChangeRAF_ID = requestAnimationFrame(()=> {\n            this.#handleStateChangeRAF_ID = null;\n            if (this.dirtyProps.size > 0) {\n                this.handleStateChanges();\n            }\n        });\n    }\n\n    handleStateChanges() {\n        const stateProps = [...this.dirtyProps];\n        this.dirtyProps.clear();\n        stateProps.forEach(prop=> {\n            handleStateChange(this, prop);\n        });\n    }\n    constructor(initialState, parentStateProp, parentStateManager, isGlobal = false, appScope=window) {\n        this.parentStateProp = parentStateProp;\n        this.parentStateManager = parentStateManager;\n\n        // Saves the actual state manager instance to a readonly _stateManager\n        setHiddenProperty(this.state, \"_stateManager\", this, true);\n        \n        // Initialize a proxy on the \"public state\"\n        this.state = new Proxy(this.state, StateHandler(this.state, appScope));\n        if (!isGlobal) setHiddenProperty(this.state, \"_global\", appScope[GLOBAL_STATE_FUNCTION_NAME](), true);\n        else {\n            // This maps depencdies between \"local\" state properties to global state changes\n            // The difference between the normal dependencies object, is that each depenency\n            // also includes a state object (which is the state context of the property),\n            // in other words, if a local state \"relies\" on a global state change - we save this\n            // mapping here.\n            // The keys are global state properties, where each value is a Map,\n            // in the map, the keys are local state manager objects, and the values are sets with\n            // local property names\n            this.globalStateDependencies = {};\n            this.addGlobalStateDependency = (stateProp, depStateProp, stateManager)=> {\n                if (!this.globalStateDependencies.hasOwnProperty(stateProp)) {\n                    this.globalStateDependencies[stateProp] = new Map();\n                }\n                if (!this.globalStateDependencies[stateProp].has(stateManager)) {\n                    this.globalStateDependencies[stateProp].set(stateManager, new Set());\n                }\n                this.globalStateDependencies[stateProp].get(stateManager).add(depStateProp);\n            }\n        }\n        if (initialState) {\n            populateStateFromInitialState(this.state, initialState);\n        }\n\n        setHiddenProperty(this.state, \"_isActive\", this, true);\n    }\n\n    addStateDependency(stateProp, depStateProp) {\n        if (!this.stateDependencies.hasOwnProperty(stateProp)) {\n            this.stateDependencies[stateProp] = new Set();\n        }\n        this.stateDependencies[stateProp].add(depStateProp);\n    }\n\n    addStateMap(stateProp, customElementName, parentElement) {\n        if (!this.stateArrayMaps.hasOwnProperty(stateProp)) {\n            this.stateArrayMaps[stateProp] = new Map();\n        }\n        this.stateArrayMaps[stateProp].set(parentElement, customElementName);\n    }\n\n\n    addConditionallyRenderingElements(stateProp, element) {\n        if (!this.conditionallyRenderingElements.hasOwnProperty(stateProp)){\n            this.conditionallyRenderingElements[stateProp] = new Set();\n        }\n        element.originalParentElement = element.parentElement || element.host?.shadowRoot;\n        this.conditionallyRenderingElements[stateProp].add(element);\n    }\n    \n   \n    // Node here is either an Attribute Node or a Text Node\n    addStateNode(stateProp, stateNode, isBooleanStateProp=false) {\n        if (!this.stateNodes.hasOwnProperty(stateProp)) {\n            this.stateNodes[stateProp] = new Set();\n            this.setAndBindStateProperty(stateProp, isBooleanStateProp);\n        }\n        this.stateNodes[stateProp].add(stateNode);\n    }\n    setAndBindStateProperty(stateProp) {\n        let stateObj = this.state;\n        let originalStateProp = stateProp;\n        const isNegationProp = stateProp.indexOf('!') === 0;\n        if (isNegationProp) {\n            originalStateProp = stateProp.substring(1);\n        }\n        let descriptor = Object.getOwnPropertyDescriptor(stateObj, originalStateProp);\n        if (!descriptor) {\n            stateObj = stateObj._global;\n            descriptor = Object.getOwnPropertyDescriptor(stateObj, originalStateProp);\n            if (!descriptor) {\n                throw Error(`Could not bind state prop ${stateProp}. State prop ${originalStateProp} not defined!`);\n            }\n        }\n\n        stateObj._binding = true;\n\n        // Some state props can be getters (which usually references other state values)\n        // These should be treated differently: should not be saved in privateState, and should not have a setter defined\n        const isValueProp = descriptor.hasOwnProperty('value');\n        const stateManager = stateObj._stateManager;\n\n        if (isNegationProp) {\n            const negateStateProp = stateProp;\n            if (isValueProp) {\n                if (!stateManager.privateState.hasOwnProperty(negateStateProp)) {\n                    Object.defineProperty(stateObj, negateStateProp, {\n                        get() {\n                            return !stateManager.privateState[originalStateProp];\n                        },\n                        set() {\n                            throw Error(\"Cannot directly set a negation State property!\");\n                        },\n                        enumerable: true,\n                    });\n                    stateManager.addStateDependency(originalStateProp, negateStateProp);\n                }\n            }\n            else {\n                if (!stateManager.state.hasOwnProperty(negateStateProp)) {\n                    Object.defineProperty(stateObj, negateStateProp, {\n                        get() {\n                            return !stateManager.state[originalStateProp];\n                        },\n                        set() {\n                            throw Error(\"Cannot directly set a negation State property!\");\n                        },\n                        enumerable: true,\n                    });\n                    stateManager.addStateDependency(originalStateProp, negateStateProp);\n                }\n            }\n        }\n        else {\n            if (isValueProp) {\n                if (!stateManager.privateState.hasOwnProperty(stateProp)) {\n                    stateManager.privateState[stateProp] = stateObj[stateProp];\n                }\n                Object.defineProperty(stateObj, stateProp, {\n                    set(value) {\n                        const currentVal = stateManager.privateState[stateProp];\n                        if (value === currentVal) return;\n                        // Sets value to \"private state\"\n                        stateManager.privateState[stateProp] = value;\n                        handleStateChange(stateManager, stateProp);\n                        // If this is an item in a Stateful Array, also trigger a state change for the state prop that contains the array\n                        if (stateManager.parentStateManager) {\n                            handleStateChange(stateManager.parentStateManager, stateManager.parentStateProp);\n                        }\n                    },\n                    get() {\n                        // Value is always retrieved from the \"private\" state\n                        return stateManager.privateState[stateProp];\n                    }\n                });\n            }\n            // If is a getter then - it can't be set, and the getter will return the value.\n        }\n        delete this.state._binding;\n    }\n}    \n\nif (DEBUG_MODE) {\n    StateManager = putObjectInDebugMode(StateManager, 'StateManager');\n}\n\nexport default StateManager;\n","\n\n// This is the script that takes Template elements from the page and defines Reactive Custom Elements\nexport default function(appScope, appName) {\n\n    // Create custom elements from templates\n    async function defineCustomElementFromTemplate(template, elemName, globalStylesheet) {\n        const templateContent = document.importNode(template.content, true);\n        const style = templateContent.querySelector('style');\n        if (style) templateContent.removeChild(style);\n        const runtime = templateContent.querySelector('script');\n        if (runtime) templateContent.removeChild(runtime);\n\n        customElements.define(\n            elemName, \n            class extends appScope.ReactiveCustomElement {\n                constructor() {\n                    super(templateContent, runtime, style?.textContent, globalStylesheet);\n                }\n            }\n        );\n    }\n\n    function build() {\n        let globalStylesheet;\n        const globalStyle = document.querySelector(`head > style[app=\"${appName}\"]`);\n        if (globalStyle) {\n            globalStylesheet = new CSSStyleSheet();\n            globalStylesheet.replaceSync(globalStyle.textContent);\n        }\n        Array.prototype.forEach.call(document.querySelectorAll(`template[app=\"${appName}\"]`), template => {\n            defineCustomElementFromTemplate(template, template.getAttribute('for'), globalStylesheet);\n        });\n        if (typeof globalThis[`${appName}_runtime`] === 'function') {\n            const globalRuntimeFunction = globalThis[`${appName}_runtime`];\n            globalRuntimeFunction.call(appScope);\n        }\n    }\n    build();\n}","import { attributeValueToTypedValue } from \"./attr_utils\";\nimport { CONDITIONAL_OPERATORS } from \"./consts\";\nimport { queueConditionalRender } from \"./paint_utils\";\n\n// returns a Boolean according to the conditional equality of conditional to conditionStateValue\nexport function resolveConditional(conditional, conditionStateValue) {\n    const typeOf = typeof conditional;\n    if (typeOf !== 'string') {\n        return conditionStateValue === conditional;\n    }\n    else {\n        if (conditional === \"always\") return true;\n        if (CONDITIONAL_OPERATORS.includes(conditional[0])) {\n            const conditionFn = new Function(`return ${conditionStateValue}${conditional}`);\n            return conditionFn();\n        }\n        else {\n            return conditionStateValue === conditional;\n        }\n    }\n}\n\nexport function getConditionalElementClass(ReactiveElementClass) {\n    class ConditionalElement extends ReactiveElementClass {\n\n        #conditionStateProp\n        #renderMap\n        #wasMounted = false\n\n        render(isFirstRender=false) {\n            const stateValue = this.getState(this.#conditionStateProp);\n\n            if (stateValue === undefined) {\n                throw Error(`State value for ${this.#conditionStateProp} not found while rendering conditional-render element:`, this);\n            }\n            const elementsToRender = [];\n            this.#renderMap.forEach((elements, conditional)=> {\n                if (resolveConditional(conditional, stateValue)) {\n                    elementsToRender.push(...elements);\n                }\n            });\n\n            if (isFirstRender) {\n                this.innerHTML = \"\";\n                this.append(...elementsToRender);\n            }\n            else if (elementsToRender.length) {\n                queueConditionalRender(this, ()=> {\n                    this.innerHTML = \"\";\n                    this.append(...elementsToRender);\n                });\n            }\n        }\n        connectedCallback() {\n            this.host = this.getRootNode().host;\n            if (!this.host) {\n                throw Error(\"<conditional-render> must be used as part of a custom element template! Cannot be used outside of a custom element.\");\n            }\n            if (this.#wasMounted) return;\n            const conditionAttributeValue = this.getAttribute(\"_condition\");\n            if (!conditionAttributeValue) {\n                throw Error(\"conditional-render elements must have a _condition command attribute\");\n            }\n            if (!this.children || !this.children.length) {\n                console.warn(\"Conditional element doesn't have any children!\");\n            }\n\n            const statePropName = conditionAttributeValue;\n            this.#conditionStateProp = statePropName;\n\n            const [stateValue, stateObject] = this.getState(statePropName, true);\n            if (typeof stateValue === \"undefined\") {\n                throw Error(`State property ${statePropName} not defined for _condition command!`);\n            }\n\n            const renderMap = new Map();\n            renderMap.set(\"always\", []);\n            const children = [...this.children];\n\n            children.forEach(conditionalChild=> {\n                const _if = conditionalChild.getAttribute('_if');\n                if (_if) {\n                    const expectedValue = attributeValueToTypedValue(_if);\n                    if (!renderMap.has(expectedValue)) renderMap.set(expectedValue, []);\n                    renderMap.get(expectedValue).push(conditionalChild);\n                }\n                else {\n                    renderMap.get(\"always\").push(conditionalChild);\n                }\n            });\n            this.#renderMap = renderMap;\n            stateObject._stateManager.addConditionallyRenderingElements(statePropName, this);\n            this.render(true);\n            this.#wasMounted = true;\n        }\n    }\n    return ConditionalElement;\n}\n\n","// Convert attribute values to \"typed\" values\nexport function attributeValueToTypedValue(attrValue) {\n    let typedValue = attrValue;\n    if (attrValue === \"true\") typedValue = true;\n    else if (attrValue === \"false\") typedValue = false;\n    else if (!isNaN(Number(attrValue))) typedValue = Number(attrValue);\n    return typedValue; \n}\n\n// Check if attribute node is a \"Command\" or a \"State Attribute\" \nexport function isSpecialAttribute(attrNode) {\n    if (typeof attrNode !== \"object\" && attrNode.constructor.name !== \"Attr\") throw Error(\"Passed non Attribute to isSpecialAttribute!\");\n    return attrNode.nodeName.indexOf('_') === 0 || attrNode.nodeValue.indexOf('$') === 0;\n}","import { COMMANDS as COMMAND_ATTRIBUTES } from \"./commands.js\";\nimport { BOOLEAN_ATTRIBUTES, SUPPORTED_ATTRIBUTES_FOR_BINDING, GLOBAL_STATE_FUNCTION_NAME, DEFAULT_TEMPLATE_DOM } from \"./consts.js\";\nimport { setAttribute, setStateAttribute, setStateText } from \"./state_utils.js\";\nimport StateManager from \"./StateManager.js\";\nimport { queueActivate, queueBindEvents } from \"./paint_utils.js\";\nimport { extendElementClassWithReactiveElementClass } from './ReactiveElement.js';\n\nexport function getReactiveCustomElementClass(appScope = window) {\n    const ReactiveHTMLElement = extendElementClassWithReactiveElementClass(HTMLElement, appScope);\n    const StateManager = appScope.SPROUT_CONFIG.stateManagerClass;\n    class ReactiveCustomElement extends ReactiveHTMLElement {\n        // Should contain the \"root\" DOM element containing this element\n        host = null\n\n        #wasMounted = false\n\n        // Callback function for when the element is connected to a DOM tree on the page and rendered\n        #onMount\n        // Callback function for when the element is connected to a DOM tree on the page, just before render\n        #beforeRender\n        // Callback function for when the element is connected to a DOM tree on the page, just after render,\n        // before state/reactivity activation\n        #afterRender\n        // Should only be used on non native custom elements\n        #templateContent\n        #stylesheet\n        #globalStylesheet\n        // This will be an object where keys are element \"ref\" names,\n        // and the value is either a \"click\" event handler (if it's a function),\n        // or an object with DOM event names as keys and event handlers as functions.\n        // Only relevant for non native custom elements - event bubbling from child elements will be used\n        events\n\n        // Name of events that are bound to the main event handler function\n        #boundEventNames = [];\n        // Main event handler function \n        #eventHandler\n\n        propAttributes = new Map();\n        constructor(template=null, runtimeScript, style, globalStylesheet) {\n            super();\n            const isFrameworkElement = this.tagName === \"CONDITIONAL-ELEMENT\";\n            if (isFrameworkElement) return;\n\n            if (runtimeScript) {\n                const dynamicRuntimeFn = new Function(runtimeScript.textContent);\n                const runtime = dynamicRuntimeFn();\n                this.#setRuntime(runtime);\n            }\n\n            if (style) {\n                const stylesheet = new CSSStyleSheet();\n                stylesheet.replaceSync(style);\n                this.#stylesheet = stylesheet;\n            }\n            if (globalStylesheet) {\n                this.#globalStylesheet = globalStylesheet;\n            }\n\n            this.#templateContent = \n                template?.cloneNode(true) ||\n                DEFAULT_TEMPLATE_DOM.cloneNode();\n            // Maps \"ref names\" to actual elements in the component DOM tree,\n            // for fast access.\n            this.ref = {};\n        }\n\n        #setRuntime(runtime) {\n            if (runtime.events) {\n                this.events = runtime.events;\n                if (this.isConnected) this.#bindEvents();\n            }\n            if (runtime.state) {\n                this.setInitialState(runtime.state);\n                // If this is not mounted yet, #setStateFromInitialState will be called from onConnected callback\n                if (this.isConnected) this.#setActiveStateFromInitialState();\n            }\n            if (runtime.onMount) {\n                this.#onMount = runtime.onMount;\n            }\n            if (runtime.beforeRender) {\n                this.#beforeRender = runtime.beforeRender;\n            }\n        }\n\n        setInitialState(initState) {\n            if (this.initialState) {\n                Object.assign(this.initialState, initState);\n            }\n            else {\n                this.initialState = initState;\n            }\n        }\n\n        #setActiveStateFromInitialState() {\n            if (!this.initialState) return;\n            const initialState = this.initialState;\n            if (initialState._stateManager) {\n                this.state = initialState._stateManager.state;\n            }\n            else {\n                this.state = new StateManager(initialState, undefined, undefined, false, appScope).state;\n            }\n            delete this.initialState;\n        }\n\n        #renderTemplate() {\n            if (appScope.SPROUT_CONFIG.useShadow) {\n                const shadowRoot = this.attachShadow({ mode: \"open\" });\n                this.shadowRoot.adoptedStyleSheets = [];\n                if (this.#globalStylesheet) this.shadowRoot.adoptedStyleSheets.push(this.#globalStylesheet);\n                if (this.#stylesheet) this.shadowRoot.adoptedStyleSheets.push(this.#stylesheet);\n                shadowRoot.appendChild(this.#templateContent);\n            }\n            else {\n                const fragment = new DocumentFragment();\n                fragment.appendChild(this.#templateContent);\n                this.appendChild(fragment);\n            }\n        }\n\n        #unbindEvents() {\n            if (!this.#boundEventNames.length) return;\n            const thiselement = this;\n            this.#boundEventNames.forEach(eventName=> {\n                thiselement.removeEventListener(eventName, this.#eventHandler, false);\n            });\n\n        }\n        #bindEvents() {\n            if (!this.events) return;\n            const eventRefNames = Object.keys(this.events);\n            const clickActions = {};\n            const otherActions = {};\n            eventRefNames.forEach(refName=> {\n                const value = this.events[refName];\n                if (typeof value === 'function') {\n                    clickActions[refName] = value;\n                }\n                else if (typeof value === 'object') {\n                    const eventNames = Object.keys(value);\n                    eventNames.forEach(eventName=> {\n                        if (eventName === 'click') {\n                            clickActions[refName] = value[eventName];\n                        }\n                        else {\n                            if (!otherActions[eventName]) otherActions[eventName] = {};\n                            otherActions[eventName][refName] = value[eventName];\n                        }\n                    });\n                }\n            });\n            const globalState = appScope[GLOBAL_STATE_FUNCTION_NAME]();\n            this.#eventHandler = function(event) {\n                const start = performance.now();\n                const elementsPath = event.composedPath();\n                let target;\n                if (elementsPath) {\n                    target = elementsPath.find(element => element.hasAttribute && element.hasAttribute('ref') && (element.getAttribute('ref') in this.events));\n                }\n                else {\n                    target = (event.target.hasAttribute && event.target.hasAttribute('ref') && (event.target.getAttribute('ref') in this.events)) ? event.target : null;\n                }\n                if (target) {\n                    const ref = target.getAttribute('ref');\n                    const eventName = event.type;\n                    if (eventName === \"click\") {\n                        const clickEvent = typeof this.events[ref] === \"function\" ? this.events[ref] : null;\n                        clickEvent?.call(target, event, event.target, globalState);\n                    }\n                    else {\n                        this.events[ref][eventName]?.call(target, event, event.target, globalState);\n                    }\n                }\n            }\n\n            const thiselement = this;\n            if (Object.keys(clickActions).length) {\n                thiselement.addEventListener('click', this.#eventHandler);\n                this.#boundEventNames.push('click');\n            }\n            const eventNames = Object.keys(otherActions);\n            for (const eventName of eventNames)\n                thiselement.addEventListener(eventName, this.#eventHandler);\n            this.#boundEventNames.push(...eventNames);\n        }\n\n        disconnectedCallback() {\n            this.#unbindEvents();\n            this.state = undefined;\n        }\n\n        activate() {\n            const attributeNames = this.getAttributeNames();\n            for (const attrName of attributeNames) {\n                const attrValue = this.getAttribute(attrName);\n                // This also resolves \"State attributes\"\n                this.initialSetAttribute(attrName, attrValue);\n            }\n\n            queueBindEvents(this, ()=> this.#bindEvents());\n            if (this.#onMount) queueMicrotask(()=> this.#onMount.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]()));\n        }\n        connectedCallback() {\n            if (this.#wasMounted) return;\n            // IMPORTANT: THIS *CAN* be NULL, DO NOT CHANGE IT!\n            // It is part of the way a check is made to see if an element is part of ShadowDOM!\n            // host will be null if the element is part of the DOM === the \"root\" custom element will have null in .host\n            // THIS SHOULD BE THE FIRST THING THAT HAPPENS!\n            this.host = this.getRootNode().host;\n            if (this.#beforeRender) this.#beforeRender.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]());\n            this.#renderTemplate();\n            if (this.#afterRender) this.#afterRender.call(this, appScope[GLOBAL_STATE_FUNCTION_NAME]());\n\n            queueMicrotask(()=> {\n                this.#setActiveStateFromInitialState();\n                this.dispatchEvent(\n                    new CustomEvent(\"connected\"),\n                );\n                this.activate();\n            });\n            this.#wasMounted = true;\n        }\n\n        attributeChangedCallback(attributeName, oldValue, newValue) {\n            if (oldValue === newValue) return;\n            if (this.propAttributes.has(attributeName)) {\n                const propAttributeNodes = this.propAttributes.get(attributeName);\n                propAttributeNodes.forEach(attrNode=> attrNode.nodeValue = newValue);\n            }\n        }\n\n    }\n\n    return ReactiveCustomElement;\n}\n","import { extendElementClassWithReactiveElementClass } from \"./ReactiveElement.js\";\nimport StateManager from \"./StateManager.js\";\nimport { GLOBAL_STATE_VAR_NAME, GLOBAL_STATE_FUNCTION_NAME, HTML_ELEMENTS_CLASSES_MAP } from \"./consts.js\";\nimport SproutBuild from '../build/index.js';\nimport { putObjectInDebugMode } from \"./debug_utils.js\";\nimport { DEBUG_MODE } from \"./consts.js\";\nimport { setHiddenProperty } from \"./prop_utils.js\";\nimport { getConditionalElementClass } from \"./ConditionalElement.js\";\nimport { getReactiveCustomElementClass } from \"./ReactiveCustomElement.js\";\n\nconst allowAppScopeAccess = document.currentScript.hasAttribute(\"allowappscopeaccess\");\nconst stateManagerClass = StateManager;\nglobalThis.SproutInitApp = function(appName) {\n    \n    let appScope = (function() { return { window, document: window?.document }})(window);\n\n    const config = {\n        useShadow: true, // Always use shadow DOM for now, may add configurability later\n        allowAppScopeAccess: allowAppScopeAccess,\n        stateManagerClass\n    }\n\n    if (config.allowAppScopeAccess) {\n        Object.defineProperty(globalThis, \"sproutApps\", {\n            value: {},\n            writable: false\n        });\n        Object.defineProperty(globalThis.sproutApps, appName, {\n            value: appScope,\n            writable: false\n        });\n        \n    }\n\n    appScope.SPROUT_CONFIG = Object.seal(config);\n\n    // Prevent \"hasOwnProperty\" shenanigans\n    const hasOwnProperty = Object.prototype.hasOwnProperty;\n    setHiddenProperty(Object.prototype, \"hasOwnProperty\", hasOwnProperty);\n\n    appScope[GLOBAL_STATE_FUNCTION_NAME] = function() {\n        return {};\n    }\n    // If initialState is passed - also sets it to global state\n    appScope.setGlobalState = function(initialState = {}) {\n        const globalState =  new appScope.SPROUT_CONFIG.stateManagerClass(initialState, undefined, undefined, true, appScope).state;\n        const globalStateVarName = GLOBAL_STATE_VAR_NAME;\n        Object.defineProperty(appScope, globalStateVarName, {\n            value: globalState,\n            writable: DEBUG_MODE ? true : false,\n            configurable: false\n        });\n        Object.defineProperty(appScope, GLOBAL_STATE_FUNCTION_NAME, {\n            value: function() {\n                return appScope[globalStateVarName];\n            },\n        });\n    };\n\n\n    const HTML_REACTIVE_ELEMENT_CLASSES = {};\n    HTML_ELEMENTS_CLASSES_MAP.forEach(elementDefinition=>\n        HTML_REACTIVE_ELEMENT_CLASSES[elementDefinition.element] = extendElementClassWithReactiveElementClass(elementDefinition.class, appScope, true)\n    );\n\n    appScope.ReactiveCustomElement = getReactiveCustomElementClass(appScope);\n\n    // Extend specific HTMLElement classes to enable reactivity (use it by adding an \"is\" attribute to an element)\n    HTML_ELEMENTS_CLASSES_MAP.forEach(itemDefinition => {\n        customElements.define(\n            `reactive-${itemDefinition.element}`, \n            // extendElementClassWithReactiveElementClass(itemDefinition.class, appScope, true),\n            HTML_REACTIVE_ELEMENT_CLASSES[itemDefinition.element],\n            { extends: itemDefinition.element });\n        }\n    );\n\n    const ReactiveHeadingClass = extendElementClassWithReactiveElementClass(HTMLHeadingElement, appScope);\n    [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"].forEach(hTag=> {\n        customElements.define(`reactive-${hTag}`,\n            class extends ReactiveHeadingClass {},\n            { extends: hTag}\n        );\n\n    });\n    const ReactiveConditionalElementClass = extendElementClassWithReactiveElementClass(HTMLElement, appScope);\n    const ConditionalElementClass = getConditionalElementClass(ReactiveConditionalElementClass); \n    customElements.define('conditional-render', ConditionalElementClass);\n\n    return function() {\n        SproutBuild(appScope, appName);\n    }.bind(appScope);\n}\n\n\n\n"],"names":["BOOLEAN_ATTRIBUTES","SUPPORTED_ATTRIBUTES_FOR_BINDING","SUPPORTED_PROPERTIES_FOR_BINDING","SUPPORTED_INPUT_TYPES_FOR_VALUE_BINDING","BUILT_IN_STATE_PROPS","GLOBAL_STATE_FUNCTION_NAME","ERROR_MESSAGES","stateProp","concat","HTML_ELEMENTS_CLASSES_MAP","class","HTMLAnchorElement","element","HTMLAreaElement","HTMLAudioElement","HTMLBodyElement","HTMLBRElement","HTMLButtonElement","HTMLCanvasElement","HTMLDataElement","HTMLDataListElement","HTMLDetailsElement","HTMLDialogElement","HTMLDivElement","HTMLDListElement","HTMLEmbedElement","HTMLFieldSetElement","HTMLFormElement","HTMLHRElement","HTMLHtmlElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLLabelElement","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLObjectElement","HTMLOListElement","HTMLOptGroupElement","HTMLOptionElement","HTMLParagraphElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSelectElement","HTMLSourceElement","HTMLSpanElement","HTMLTableElement","HTMLTableCellElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLVideoElement","HTMLSlotElement","DEBUG_MODE","DEFAULT_TEMPLATE_DOM","document","createElement","NODES_STATE","nodeActionsMap","Map","eventBindingFunctions","conditionalRenders","paintRafId","eventBindRafId","conditionalRenderRafId","activateRafId","elementActivateFunctions","CONDITIONAL_OPERATORS","MAX_OPERATIONS_PER_ANIMATION_FRAME","isElementAList","tagName","queuePaint","size","cancelAnimationFrame","requestAnimationFrame","DOMActions","attributeActions","elementActions","forEach","nodeActions","node","hasOwnProperty","value","setAttribute","originalOwnerElement","hasAttribute","name","push","removeAttributeNode","setAttributeNode","nodeValue","String","textContent","replaceWith","replace","newNode","oldNode","replaceChild","_step","_iterator","_createForOfIteratorHelper","remove","values","s","n","done","_step3","_iterator3","_loop","nodeToRemove","parentNode","removeChild","err","e","f","_step2","_iterator2","append","_step4","_iterator4","_loop2","newChildElement","appendChild","resolveNodeActionsMapToDOMActions","DOMAction","doUpdateDOM","queueConditionalRender","renderFunction","set","renderFn","clear","setStateNodeAction","nodeActionsObject","nodeType","Node","ATTRIBUTE_NODE","TEXT_NODE","addAppendAction","nodeToAppend","stateIdentifier","has","Set","get","add","getNewNodeActionsObject","after","switch","hasPendingActions","this","generateStateNodeActions","stateManager","_this","state","stateNodes","stateMapElements","stateArrayMaps","conditionallyRenderingElements","stateMapArray","customElementName","parentElement","stateMapNodeActions","currentStateMapArrayIndex","isParentAList","children","length","Array","prototype","call","childElement","currentIndex","_stateItem","customElement","firstElementChild","elementToRemove","stateItem","replaceWithChild","stateToElement","undefined","oldElement","newElement","addReplaceAction","i","len","newChild","render","setHiddenProperty","obj","propName","propValue","enumerable","arguments","Object","defineProperty","configurable","writable","HTMLElement","globalThis","attrName","attrValue","includes","removeAttribute","elementSetAttribute","setStateAttribute","equalityValue","indexOf","colonIndex","Error","substring","_this$getState2","_slicedToArray","getState","stateVal","theState","conditionalStateProp","originalStateProp","_stateManager","addStateDependency","valueToSet","stateAttrNode","createAttribute","addStateNode","setStateText","_this$getState4","textNode","createTextNode","stateObject","elemName","wrapInElement","returnElement","customElementInstance","setInitialState","handleStateChange","stateDependencies","depStateProp","setStateProp","func","_global","globalStateDependencies","depStateProps","depStateManager","depState","mapStateToElements","stateItemsPropertyName","_parentElement$getSta2","stateItemsArray","isArray","elements","stateItems","map","_typeof","mapStateArrayToElements","innerHTML","apply","_toConsumableArray","COMMANDS","commandValue","_commandValue$split2","split","addStateMap","text","initialSetText","bind","_commandValue$split4","attributeName","statePropName","bindAttributeToState","getAttribute","addEventListener","updateStateFromProperty","extendElementClassWithReactiveElementClass","elementClass","appScope","window","_changeEventHandler","WeakMap","_wasMounted","_boundAttributesToState","_ReactiveElement_brand","WeakSet","ReactiveElement","_elementClass","_classCallCheck","_len","args","_key","_callSuper","_defineProperty","_classPrivateFieldInitSpec","_inherits","key","_classPrivateFieldGet","propertyName","newValue","stateValue","_this$host","removeEventListener","host","ref","thisRefName","events","_classPrivateFieldSet","_this2","changeEvent","Event","bubbles","composed","dispatchEvent","commands","getAttributeNames","initialSetAttribute","command","_ref","_COMMAND_ATTRIBUTES$c","COMMAND_ATTRIBUTES","_this3","getRootNode","activate","queueMicrotask","oldValue","isConnected","_assertClassBrand","_updateStateFromAttribute","attrNode","getAttributeNode","propAttributes","refValue","isNativeElement","_thisInstance$state","returnStateObject","thisInstance","_globalState","globalState","_thisInstance$state2","refName","root","SPROUT_CONFIG","useShadow","shadowRoot","querySelector","attributeValue","keys","toLowerCase","StatefulArray","_Array","initialArray","parentStateObject","arrayStateProp","noConvertToStateItems","StateManager","stateManagerClass","statefulArray","rawArray","item","index","_possibleConstructorReturn","Proxy","StatefulArrayHandler","_get2","$$operation","result","_get","_getPrototypeOf","_get3","_len2","_key2","_get4","_len3","_key3","_get5","_len4","_key4","_get6","_len5","_key5","_get7","_len6","_key6","_get8","_len7","_key7","_get9","_len8","_key8","Symbol","species","_wrapNativeSuper","parentStateManager","targetArray","property","setResult","Reflect","setDirtyProp","Number","isNaN","doStateChangeHandle","receiver","StateObjectValueHandler","rootStateObj","objPropertyName","targetObj","descriptor","_value$","definePropertyResult","StateHandler","stateObj","targetState","_targetState","_binding","origTargetState","dependencies","target","_gettingDependenciesFor","_localStateManager","_value$2","depProp","dep","addGlobalStateDependency","originalProperty","_handleStateChangeRAF_ID","initialState","parentStateProp","isGlobal","_populate","descrp","descriptors","getOwnPropertyDescriptors","defineProperties","populateStateFromInitialState","prop","dirtyProps","handleStateChanges","stateProps","_element$host","originalParentElement","stateNode","isBooleanStateProp","setAndBindStateProperty","isNegationProp","getOwnPropertyDescriptor","isValueProp","negateStateProp","privateState","_regeneratorRuntime","t","r","o","a","iterator","c","asyncIterator","u","toStringTag","define","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","h","l","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","displayName","isGeneratorFunction","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","_defineProperties","_toPropertyKey","toPrimitive","_toPrimitive","ReferenceError","_assertThisInitialized","_isNativeReflectConstruct","construct","Boolean","valueOf","_setPrototypeOf","asyncGeneratorStep","appName","_defineCustomElementFromTemplate","_callee","template","globalStylesheet","templateContent","style","runtime","_context","importNode","content","customElements","_appScope$ReactiveCus","_class","ReactiveCustomElement","_next","_throw","globalStyle","CSSStyleSheet","replaceSync","querySelectorAll","_x","_x2","_x3","defineCustomElementFromTemplate","getConditionalElementClass","ReactiveElementClass","_conditionStateProp","_renderMap","ConditionalElement","_ReactiveElementClass","isFirstRender","elementsToRender","conditional","conditionStateValue","Function","conditionFn","resolveConditional","conditionAttributeValue","renderMap","conditionalChild","typedValue","_if","expectedValue","addConditionallyRenderingElements","getReactiveCustomElementClass","ReactiveHTMLElement","_onMount","_beforeRender","_afterRender","_templateContent","_stylesheet","_globalStylesheet","_boundEventNames","_eventHandler","_ReactiveCustomElement_brand","_ReactiveHTMLElement","runtimeScript","_classPrivateMethodInitSpec","dynamicRuntimeFn","_setRuntime","stylesheet","cloneNode","initState","assign","_unbindEvents","bindFunction","_bindEvents","bindFn","_renderTemplate","_setActiveStateFromInitialState","CustomEvent","onMount","beforeRender","attachShadow","mode","adoptedStyleSheets","fragment","DocumentFragment","_this4","thiselement","eventName","_classPrivateFieldGet2","_this5","eventRefNames","clickActions","otherActions","event","_this6","elementsPath","performance","now","composedPath","find","clickEvent","_this$events$ref$even","eventNames","_i","_eventNames2","allowAppScopeAccess","currentScript","SproutInitApp","_window","config","sproutApps","seal","setGlobalState","globalStateVarName","HTML_REACTIVE_ELEMENT_CLASSES","elementDefinition","itemDefinition","extends","ReactiveHeadingClass","HTMLHeadingElement","hTag","_ReactiveHeadingClass","ConditionalElementClass","SproutBuild"],"sourceRoot":""}